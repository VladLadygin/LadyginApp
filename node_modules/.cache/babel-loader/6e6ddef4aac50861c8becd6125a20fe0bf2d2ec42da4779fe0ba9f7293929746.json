{"ast":null,"code":"require(\"core-js/modules/es.array.push.js\");\nrequire(\"core-js/modules/es.array.unshift.js\");\n(function (w) {\n  if (w.fastXDM) {\n    module.exports = w.fastXDM;\n    return;\n  }\n  ;\n  var handlers = {};\n  var onEnvLoad = [];\n  var env = {};\n\n  // Key generation\n  function genKey() {\n    var key = '';\n    for (i = 0; i < 5; i++) key += Math.ceil(Math.random() * 15).toString(16);\n    return key;\n  }\n  function waitFor(obj, prop, func, self, count) {\n    if (obj[prop]) {\n      func.apply(self);\n    } else {\n      count = count || 0;\n      if (count < 1000) setTimeout(function () {\n        waitFor(obj, prop, func, self, count + 1);\n      }, 0);\n    }\n  }\n  function attachScript(url) {\n    setTimeout(function () {\n      var newScript = w.document.createElement('script');\n      newScript.type = 'text/javascript';\n      newScript.src = url || fastXDM.helperUrl;\n      waitFor(w.document, 'body', function () {\n        w.document.getElementsByTagName('HEAD')[0].appendChild(newScript);\n      });\n    }, 0);\n  }\n  function walkVar(value, clean) {\n    switch (typeof value) {\n      case 'string':\n        if (clean) {\n          return value.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\"/g, '&quot;').replace(/'/g, '&#039;');\n        }\n        return value.replace(/&#039;/g, '\\'').replace(/&quot;/g, '\"').replace(/&gt;/g, '>').replace(/&lt;/g, '<').replace(/&amp;/g, '&');\n      case 'object':\n        if (Object.prototype.toString.apply(value) === '[object Array]') {\n          newValue = [];\n          for (var i = 0; i < value.length; i++) {\n            newValue[i] = walkVar(value[i], clean);\n          }\n        } else {\n          for (var k in value) {\n            newValue = {};\n            if (Object.hasOwnProperty.call(value, k)) {\n              newValue[k] = walkVar(value[k], clean);\n            }\n          }\n        }\n      default:\n        newValue = value;\n    }\n    return newValue;\n  }\n\n  // Env functions\n  function getEnv(callback, self) {\n    if (env.loaded) {\n      callback.apply(self, [env]);\n    } else {\n      onEnvLoad.push([self, callback]);\n    }\n  }\n  function envLoaded() {\n    env.loaded = true;\n    var i = onEnvLoad.length;\n    while (i--) {\n      onEnvLoad[i][1].apply(onEnvLoad[i][0], [env]);\n    }\n  }\n  function applyMethod(strData, self) {\n    getEnv(function (env) {\n      var data = env.json.parse(strData);\n      if (data[0]) {\n        if (!data[1]) data[1] = [];\n        var i = data[1].length;\n        while (i--) {\n          if (data[1][i]._func) {\n            var funcNum = data[1][i]._func;\n            data[1][i] = function () {\n              var args = Array.prototype.slice.call(arguments);\n              args.unshift('_func' + funcNum);\n              self.callMethod.apply(self, args);\n            };\n          } else if (self.options.safe) {\n            data[1][i] = walkVar(data[1][i], true);\n          }\n        }\n        setTimeout(function () {\n          if (!self.methods[data[0]]) {\n            throw Error('fastXDM: Method ' + data[0] + ' is undefined');\n          }\n          self.methods[data[0]].apply(self, data[1]);\n        }, 0);\n      }\n    });\n  }\n\n  // XDM object\n  var fastXDM = {\n    _id: 0,\n    helperUrl: (location.protocol === 'https:' ? 'https:' : 'http:') + '//vk.com/js/api/xdmHelper.js',\n    Server: function (methods, filter, options) {\n      this.methods = methods || {};\n      this.id = fastXDM._id++;\n      this.options = options || {};\n      this.filter = filter;\n      this.key = genKey();\n      this.methods['%init%'] = this.methods.__fxdm_i = function () {\n        fastXDM.run(this.id);\n        if (this.methods.onInit) this.methods.onInit();\n      };\n      this.frameName = 'fXD' + this.key;\n      this.server = true;\n      handlers[this.key] = [applyMethod, this];\n    },\n    Client: function (methods, options) {\n      this.methods = methods || {};\n      this.id = fastXDM._id++;\n      this.options = options || {};\n      fastXDM.run(this.id);\n      if (w.name.indexOf('fXD') === 0) {\n        this.key = w.name.substr(3);\n      } else {\n        throw Error('Wrong window.name property.');\n      }\n      this.caller = w.parent;\n      handlers[this.key] = [applyMethod, this];\n      this.client = true;\n      fastXDM.on('helper', function () {\n        fastXDM.onClientStart(this);\n      }, this);\n      getEnv(function (env) {\n        env.send(this, env.json.stringify(['%init%']));\n        var methods = this.methods;\n        setTimeout(function () {\n          if (methods.onInit) methods.onInit();\n        }, 0);\n      }, this);\n    },\n    onMessage: function (e) {\n      if (!e.data) return false;\n      var data = e.data;\n      if (typeof data != 'string' && !(data instanceof String)) return false;\n      var key = data.substr(0, 5);\n      if (handlers[key]) {\n        var self = handlers[key][1];\n        if (self && (!self.filter || self.filter(e.origin))) {\n          handlers[key][0](e.data.substr(6), self);\n        }\n      }\n    },\n    setJSON: function (json) {\n      env.json = json;\n    },\n    getJSON: function (callback) {\n      if (!callback) return env.json;\n      getEnv(function (env) {\n        callback(env.json);\n      });\n    },\n    setEnv: function (exEnv) {\n      var i;\n      for (i in exEnv) {\n        env[i] = exEnv[i];\n      }\n      envLoaded();\n    },\n    _q: {},\n    on: function (key, act, self) {\n      if (!this._q[key]) this._q[key] = [];\n      if (this._q[key] == -1) {\n        act.apply(self);\n      } else {\n        this._q[key].push([act, self]);\n      }\n    },\n    run: function (key) {\n      var len = (this._q[key] || []).length;\n      if (this._q[key] && len > 0) {\n        for (var i = 0; i < len; i++) this._q[key][i][0].apply(this._q[key][i][1]);\n      }\n      this._q[key] = -1;\n    },\n    waitFor: waitFor\n  };\n  fastXDM.Server.prototype.start = function (obj, count) {\n    if (obj.contentWindow) {\n      this.caller = obj.contentWindow;\n      this.frame = obj;\n      fastXDM.on('helper', function () {\n        fastXDM.onServerStart(this);\n      }, this);\n    } else {\n      // Opera old versions\n      var self = this;\n      count = count || 0;\n      if (count < 50) setTimeout(function () {\n        self.start.apply(self, [obj, count + 1]);\n      }, 100);\n    }\n  };\n  fastXDM.Server.prototype.destroy = function () {\n    handlers.splice(handlers.indexOf(this.key), 1);\n  };\n  function extend(obj1, obj2) {\n    for (var i in obj2) {\n      if (obj1[i] && typeof obj1[i] == 'object') {\n        extend(obj1[i], obj2[i]);\n      } else {\n        obj1[i] = obj2[i];\n      }\n    }\n  }\n  fastXDM.Server.prototype.append = function (obj, options) {\n    var div = w.document.createElement('DIV');\n    div.innerHTML = '<iframe name=\"' + this.frameName + '\" ></iframe>';\n    var frame = div.firstChild;\n    var self = this;\n    setTimeout(function () {\n      frame.frameBorder = '0';\n      if (options) extend(frame, options);\n      obj.insertBefore(frame, obj.firstChild);\n      self.start(frame);\n    }, 0);\n    return frame;\n  };\n  fastXDM.Client.prototype.callMethod = fastXDM.Server.prototype.callMethod = function () {\n    var args = Array.prototype.slice.call(arguments);\n    var method = args.shift();\n    var i = args.length;\n    while (i--) {\n      if (typeof args[i] == 'function') {\n        this.funcsCount = (this.funcsCount || 0) + 1;\n        var func = args[i];\n        var funcName = '_func' + this.funcsCount;\n        this.methods[funcName] = function () {\n          func.apply(this, arguments);\n          delete this.methods[funcName];\n        };\n        args[i] = {\n          _func: this.funcsCount\n        };\n      } else if (this.options.safe) {\n        args[i] = walkVar(args[i], false);\n      }\n    }\n    waitFor(this, 'caller', function () {\n      fastXDM.on(this.id, function () {\n        getEnv(function (env) {\n          env.send(this, env.json.stringify([method, args]));\n        }, this);\n      }, this);\n    }, this);\n  };\n  if (w.JSON && typeof w.JSON == 'object' && w.JSON.parse && w.JSON.stringify && w.JSON.stringify({\n    a: [1, 2, 3]\n  }).replace(/ /g, '') == '{\"a\":[1,2,3]}') {\n    env.json = {\n      parse: w.JSON.parse,\n      stringify: w.JSON.stringify\n    };\n  } else {\n    fastXDM._needJSON = true;\n  }\n\n  // PostMessage cover\n  if (w.postMessage) {\n    env.protocol = 'p';\n    env.send = function (xdm, strData) {\n      var win = xdm.frame ? xdm.frame.contentWindow : xdm.caller;\n      win.postMessage(xdm.key + ':' + strData, \"*\");\n    };\n    if (w.addEventListener) {\n      w.addEventListener(\"message\", fastXDM.onMessage, false);\n    } else {\n      w.attachEvent(\"onmessage\", fastXDM.onMessage);\n    }\n    if (fastXDM._needJSON) {\n      fastXDM._onlyJSON = true;\n      attachScript();\n    } else {\n      envLoaded();\n    }\n  } else {\n    attachScript();\n  }\n  module.exports = fastXDM;\n})(window);","map":{"version":3,"names":["w","fastXDM","module","exports","handlers","onEnvLoad","env","genKey","key","i","Math","ceil","random","toString","waitFor","obj","prop","func","self","count","apply","setTimeout","attachScript","url","newScript","document","createElement","type","src","helperUrl","getElementsByTagName","appendChild","walkVar","value","clean","replace","Object","prototype","newValue","length","k","hasOwnProperty","call","getEnv","callback","loaded","push","envLoaded","applyMethod","strData","data","json","parse","_func","funcNum","args","Array","slice","arguments","unshift","callMethod","options","safe","methods","Error","_id","location","protocol","Server","filter","id","__fxdm_i","run","onInit","frameName","server","Client","name","indexOf","substr","caller","parent","client","on","onClientStart","send","stringify","onMessage","e","String","origin","setJSON","getJSON","setEnv","exEnv","_q","act","len","start","contentWindow","frame","onServerStart","destroy","splice","extend","obj1","obj2","append","div","innerHTML","firstChild","frameBorder","insertBefore","method","shift","funcsCount","funcName","JSON","a","_needJSON","postMessage","xdm","win","addEventListener","attachEvent","_onlyJSON","window"],"sources":["/home/vlad12345/Projects/api.ru/node_modules/vk-openapi/fast-xdm.js"],"sourcesContent":["(function(w) {\n  if (w.fastXDM) {module.exports = w.fastXDM; return;};\n\n  var handlers = {};\n  var onEnvLoad = [];\n  var env = {};\n\n// Key generation\n  function genKey() {\n    var key = '';\n    for (i=0;i<5;i++) key += Math.ceil(Math.random()*15).toString(16);\n    return key;\n  }\n\n  function waitFor(obj, prop, func, self,  count) {\n    if (obj[prop]) {\n      func.apply(self);\n    } else {\n      count = count || 0;\n      if (count < 1000) setTimeout(function() {\n        waitFor(obj, prop, func, self, count + 1)\n      }, 0);\n    }\n  }\n\n  function attachScript(url) {\n    setTimeout(function() {\n      var newScript = w.document.createElement('script');\n      newScript.type = 'text/javascript';\n      newScript.src = url || fastXDM.helperUrl;\n      waitFor(w.document, 'body', function() {\n        w.document.getElementsByTagName('HEAD')[0].appendChild(newScript);\n      });\n    }, 0);\n  }\n\n  function walkVar(value, clean) {\n    switch (typeof value) {\n      case 'string':\n        if (clean) {\n          return value.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\"/g, '&quot;').replace(/'/g, '&#039;');\n        }\n        return value.replace(/&#039;/g, '\\'').replace(/&quot;/g, '\"').replace(/&gt;/g, '>').replace(/&lt;/g, '<').replace(/&amp;/g, '&');\n\n      case 'object':\n        if (Object.prototype.toString.apply(value) === '[object Array]') {\n          newValue = [];\n          for (var i = 0; i < value.length; i++) {\n            newValue[i] = walkVar(value[i], clean);\n          }\n        } else {\n          for (var k in value) {\n            newValue = {};\n            if (Object.hasOwnProperty.call(value, k)) {\n              newValue[k] = walkVar(value[k], clean);\n            }\n          }\n        }\n      default:\n        newValue = value;\n    }\n\n    return newValue;\n  }\n\n// Env functions\n  function getEnv(callback, self) {\n    if (env.loaded) {\n      callback.apply(self, [env]);\n    } else {\n      onEnvLoad.push([self, callback]);\n    }\n  }\n\n  function envLoaded() {\n    env.loaded = true;\n    var i = onEnvLoad.length;\n    while (i--) {\n      onEnvLoad[i][1].apply(onEnvLoad[i][0], [env]);\n    }\n  }\n\n  function applyMethod(strData, self) {\n    getEnv(function(env) {\n      var data = env.json.parse(strData);\n      if (data[0]) {\n        if (!data[1]) data[1] = [];\n        var i = data[1].length;\n        while (i--) {\n          if (data[1][i]._func) {\n            var funcNum = data[1][i]._func;\n            data[1][i] = function() {\n              var args = Array.prototype.slice.call(arguments);\n              args.unshift('_func'+funcNum);\n              self.callMethod.apply(self, args);\n            }\n          } else if (self.options.safe) {\n            data[1][i] = walkVar(data[1][i], true);\n          }\n        }\n        setTimeout(function() {\n          if (!self.methods[data[0]]) {\n            throw Error('fastXDM: Method ' + data[0] + ' is undefined');\n          }\n          self.methods[data[0]].apply(self, data[1]);\n        }, 0);\n      }\n    });\n  }\n\n// XDM object\n  var fastXDM = {\n    _id: 0,\n    helperUrl: ((location.protocol === 'https:') ? 'https:' : 'http:') + '//vk.com/js/api/xdmHelper.js',\n\n    Server: function(methods, filter, options) {\n      this.methods = methods || {};\n      this.id = fastXDM._id++;\n      this.options = options || {};\n      this.filter = filter;\n      this.key = genKey();\n      this.methods['%init%'] = this.methods.__fxdm_i = function() {\n        fastXDM.run(this.id);\n        if (this.methods.onInit) this.methods.onInit();\n      };\n      this.frameName = 'fXD'+this.key;\n      this.server = true;\n      handlers[this.key] = [applyMethod, this];\n    },\n\n    Client: function(methods, options) {\n      this.methods = methods || {};\n      this.id = fastXDM._id++;\n      this.options = options || {};\n      fastXDM.run(this.id);\n      if (w.name.indexOf('fXD') === 0) {\n        this.key = w.name.substr(3);\n      } else {\n        throw Error('Wrong window.name property.');\n      }\n      this.caller = w.parent;\n      handlers[this.key] = [applyMethod, this];\n      this.client = true;\n\n      fastXDM.on('helper', function() {\n        fastXDM.onClientStart(this);\n      }, this);\n\n      getEnv(function(env) {\n        env.send(this, env.json.stringify(['%init%']));\n        var methods = this.methods;\n        setTimeout(function() {\n          if (methods.onInit) methods.onInit();\n        }, 0);\n      }, this);\n    },\n\n    onMessage: function(e) {\n      if (!e.data) return false;\n      var data = e.data;\n      if (typeof data != 'string' && !(data instanceof String)) return false;\n      var key = data.substr(0, 5);\n      if (handlers[key]) {\n        var self = handlers[key][1];\n        if (self && (!self.filter || self.filter(e.origin))) {\n          handlers[key][0](e.data.substr(6), self);\n        }\n      }\n    },\n\n    setJSON: function(json) {\n      env.json = json;\n    },\n\n    getJSON: function(callback) {\n      if (!callback) return env.json;\n      getEnv(function(env) {\n        callback(env.json);\n      });\n    },\n\n    setEnv: function(exEnv) {\n      var i;\n      for (i in exEnv) {\n        env[i] = exEnv[i];\n      }\n      envLoaded();\n    },\n\n    _q: {},\n\n    on: function(key, act, self) {\n      if (!this._q[key]) this._q[key] = [];\n      if (this._q[key] == -1) {\n        act.apply(self);\n      } else {\n        this._q[key].push([act, self]);\n      }\n    },\n\n    run: function(key) {\n      var len = (this._q[key] || []).length;\n      if (this._q[key] && len > 0) {\n        for (var i = 0; i < len; i++) this._q[key][i][0].apply(this._q[key][i][1]);\n      }\n      this._q[key] = -1;\n    },\n\n    waitFor: waitFor\n  }\n\n  fastXDM.Server.prototype.start = function(obj, count) {\n    if (obj.contentWindow) {\n      this.caller = obj.contentWindow;\n      this.frame = obj;\n\n      fastXDM.on('helper', function() {\n        fastXDM.onServerStart(this);\n      }, this);\n\n    } else { // Opera old versions\n      var self = this;\n      count = count || 0;\n      if (count < 50) setTimeout(function() {\n        self.start.apply(self, [obj, count+1]);\n      }, 100);\n    }\n  }\n\n  fastXDM.Server.prototype.destroy = function() {\n    handlers.splice(handlers.indexOf(this.key), 1);\n  }\n\n  function extend(obj1, obj2){\n    for (var i in obj2) {\n      if (obj1[i] && typeof(obj1[i]) == 'object') {\n        extend(obj1[i], obj2[i])\n      } else {\n        obj1[i] = obj2[i];\n      }\n    }\n  }\n\n  fastXDM.Server.prototype.append = function(obj, options) {\n    var div = w.document.createElement('DIV');\n    div.innerHTML = '<iframe name=\"'+this.frameName+'\" ></iframe>';\n    var frame = div.firstChild;\n    var self = this;\n    setTimeout(function() {\n      frame.frameBorder = '0';\n      if (options) extend(frame, options);\n      obj.insertBefore(frame, obj.firstChild);\n      self.start(frame);\n    }, 0);\n    return frame;\n  }\n\n  fastXDM.Client.prototype.callMethod = fastXDM.Server.prototype.callMethod = function() {\n    var args = Array.prototype.slice.call(arguments);\n    var method = args.shift();\n    var i = args.length;\n    while (i--) {\n      if (typeof(args[i]) == 'function') {\n        this.funcsCount = (this.funcsCount || 0) + 1;\n        var func = args[i];\n        var funcName = '_func' + this.funcsCount;\n        this.methods[funcName] = function() {\n          func.apply(this, arguments);\n          delete this.methods[funcName];\n        }\n        args[i] = {_func: this.funcsCount};\n      } else if (this.options.safe) {\n        args[i] = walkVar(args[i], false);\n      }\n    }\n    waitFor(this, 'caller', function() {\n      fastXDM.on(this.id, function() {\n        getEnv(function(env) {\n          env.send(this, env.json.stringify([method, args]));\n        }, this);\n      }, this);\n    }, this);\n  }\n\n  if (w.JSON && typeof(w.JSON) == 'object' && w.JSON.parse && w.JSON.stringify && w.JSON.stringify({a:[1,2,3]}).replace(/ /g, '') == '{\"a\":[1,2,3]}') {\n    env.json = {parse: w.JSON.parse, stringify: w.JSON.stringify};\n  } else {\n    fastXDM._needJSON = true;\n  }\n\n// PostMessage cover\n  if (w.postMessage) {\n    env.protocol = 'p';\n    env.send = function(xdm, strData) {\n      var win = (xdm.frame ? xdm.frame.contentWindow : xdm.caller);\n      win.postMessage(xdm.key+':'+strData, \"*\");\n    }\n    if (w.addEventListener) {\n      w.addEventListener(\"message\", fastXDM.onMessage, false);\n    } else {\n      w.attachEvent(\"onmessage\", fastXDM.onMessage);\n    }\n\n    if (fastXDM._needJSON) {\n      fastXDM._onlyJSON = true;\n      attachScript();\n    } else {\n      envLoaded();\n    }\n  } else {\n    attachScript();\n  }\n\nmodule.exports = fastXDM;\n\n})(window);\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}