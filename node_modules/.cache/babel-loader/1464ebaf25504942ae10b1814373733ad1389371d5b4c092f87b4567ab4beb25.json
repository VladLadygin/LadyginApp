{"ast":null,"code":"require(\"core-js/modules/es.array.push.js\");\nrequire(\"core-js/modules/es.array.unshift.js\");\nvar IS_CLIENT_SIDE = typeof window !== 'undefined';\nvar IS_ANDROID_WEBVIEW = Boolean(IS_CLIENT_SIDE && window.AndroidBridge);\nvar IS_IOS_WEBVIEW = Boolean(IS_CLIENT_SIDE && window.webkit && window.webkit.messageHandlers && window.webkit.messageHandlers.VKWebAppClose);\nvar IS_WEB = IS_CLIENT_SIDE && !IS_ANDROID_WEBVIEW && !IS_IOS_WEBVIEW;\nvar androidBridge = IS_CLIENT_SIDE ? window.AndroidBridge : undefined;\nvar iosBridge = IS_IOS_WEBVIEW ? window.webkit.messageHandlers : undefined;\nfunction _bridgeSend(method, props) {\n  if (androidBridge && androidBridge[method]) {\n    androidBridge[method](JSON.stringify(props));\n  } else if (iosBridge && iosBridge[method] && typeof iosBridge[method].postMessage === 'function') {\n    iosBridge[method].postMessage(props);\n  }\n}\nfunction _bridgeSupports(method) {\n  if (IS_ANDROID_WEBVIEW) {\n    return androidBridge && typeof androidBridge[method] === 'function';\n  } else if (IS_IOS_WEBVIEW) {\n    return iosBridge && iosBridge[method] && typeof iosBridge[method].postMessage === 'function';\n  }\n  return false;\n}\nvar IS_BRIDGE_AVAILABLE = !IS_WEB && _bridgeSupports('VKWebAppConversionHit');\n(function (w) {\n  if (w.fastXDM) return;\n  var handlers = {};\n  var proxyToServer = {};\n  var onEnvLoad = [];\n  var env = {};\n\n  // Key generation\n  function genKey() {\n    var key = '';\n    for (var i = 0; i < 5; i++) {\n      key += Math.ceil(Math.random() * 15).toString(16);\n    }\n    return key;\n  }\n  function waitFor(obj, prop, func, self, count) {\n    if (obj[prop]) {\n      func.apply(self);\n    } else {\n      count = count || 0;\n      if (count < 1000) {\n        setTimeout(function () {\n          waitFor(obj, prop, func, self, count + 1);\n        }, 0);\n      }\n    }\n  }\n  function attachScript(url) {\n    setTimeout(function () {\n      var newScript = document.createElement('script');\n      newScript.type = 'text/javascript';\n      newScript.src = url || w.fastXDM.helperUrl;\n      waitFor(document, 'body', function () {\n        document.getElementsByTagName('HEAD')[0].appendChild(newScript);\n      });\n    }, 0);\n  }\n  function walkVar(value, clean) {\n    var newValue;\n    switch (typeof value) {\n      case 'string':\n        if (clean) {\n          newValue = value.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\"/g, '&quot;').replace(/'/g, '&#039;');\n        } else {\n          newValue = value.replace(/&#039;/g, '\\'').replace(/&quot;/g, '\"').replace(/&gt;/g, '>').replace(/&lt;/g, '<').replace(/&amp;/g, '&');\n        }\n        break;\n      case 'object':\n        if (Object.prototype.toString.apply(value) === '[object Array]') {\n          newValue = [];\n          for (var i = 0, len = value.length; i < len; i++) {\n            newValue[i] = walkVar(value[i], clean);\n          }\n        } else {\n          newValue = {};\n          for (var k in value) {\n            if (Object.hasOwnProperty.call(value, k)) {\n              newValue[k] = walkVar(value[k], clean);\n            }\n          }\n        }\n        break;\n      default:\n        newValue = value;\n        break;\n    }\n    return newValue;\n  }\n\n  // Env functions\n  function getEnv(callback, self) {\n    if (env.loaded) {\n      callback.apply(self, [env]);\n    } else {\n      onEnvLoad.push([self, callback]);\n    }\n  }\n  function envLoaded() {\n    env.loaded = true;\n    for (var i = 0, len = onEnvLoad.length; i < len; i++) {\n      onEnvLoad[i][1].apply(onEnvLoad[i][0], [env]);\n    }\n  }\n  function applyMethod(strData, self, origin) {\n    getEnv(function (env) {\n      var data = env.json.parse(strData);\n      var method = data[0];\n      if (method) {\n        if (env.protocol === 'p' && self.options.sameOrigin && origin !== w.origin && !self.isUnsafeMethod(method)) {\n          throw Error('Insecure method call.');\n        }\n        if (!data[1]) data[1] = [];\n        for (var i = 0, len = data[1].length; i < len; i++) {\n          if (data[1][i] && data[1][i]._func) {\n            var funcNum = data[1][i]._func;\n            data[1][i] = function () {\n              var args = Array.prototype.slice.call(arguments);\n              args.unshift('_func' + funcNum);\n              self.callMethod.apply(self, args);\n            };\n          } else if (self.options.safe) {\n            data[1][i] = walkVar(data[1][i], true);\n          }\n        }\n        setTimeout(function () {\n          if (!self.methods[method]) {\n            throw Error('fastXDM: Method ' + method + ' is undefined');\n          }\n          self.methods[method].apply(self, data[1]);\n        }, 0);\n      }\n    });\n  }\n  function extend(obj1, obj2) {\n    for (var i in obj2) {\n      if (obj1[i] && typeof obj1[i] === 'object') {\n        extend(obj1[i], obj2[i]);\n      } else {\n        obj1[i] = obj2[i];\n      }\n    }\n  }\n\n  // XDM object\n  w.fastXDM = {\n    _id: 0,\n    helperUrl: 'https://vk.com/js/api/xdmHelper.js',\n    Server: function (methods, filter, options) {\n      this.methods = methods || {};\n      this.filter = filter;\n      this.options = options || {};\n      this.id = w.fastXDM._id++;\n      this.key = genKey();\n      this.frameName = 'fXD' + this.key;\n      this.server = true;\n      this.methods['%init%'] = this.methods.__fxdm_i = function () {\n        getEnv(function (env) {\n          for (var method in this.methods) {\n            if (this.methods[method] instanceof w.fastXDM.Server) {\n              var proxyFromServer = this;\n              var proxyToServer = this.methods[method];\n              if (env.protocol === 'p') {\n                env.send(proxyFromServer, env.json.stringify(['%proxy%', [method, proxyToServer.key]]));\n              }\n              this.methods[method] = function () {\n                this.callMethod.apply(this, arguments);\n              }.bind(proxyToServer);\n            }\n          }\n        }, this);\n        w.fastXDM.run(this.id);\n        if (this.methods.onInit) {\n          this.methods.onInit();\n        }\n      };\n      handlers[this.key] = [applyMethod, this];\n    },\n    Client: function (methods, options) {\n      this.methods = methods || {};\n      this.options = options || {};\n      this.id = w.fastXDM._id++;\n      this.client = true;\n      w.fastXDM.run(this.id);\n      if (window.name.indexOf('fXD') === 0) {\n        this.key = window.name.substr(3);\n      } else {\n        throw Error('Wrong window.name property.');\n      }\n      this.caller = window.parent;\n      if (!proxyToServer[this.key]) {\n        proxyToServer[this.key] = {};\n      }\n      this.methods['%proxy%'] = function (method, key) {\n        if (method && key && this.caller.frames['fXD' + key]) {\n          proxyToServer[this.key][method] = {\n            key: key,\n            frame: {\n              contentWindow: this.caller.frames['fXD' + key]\n            }\n          };\n        }\n      }.bind(this);\n      handlers[this.key] = [applyMethod, this];\n      w.fastXDM.on('helper', function () {\n        w.fastXDM.onClientStart(this);\n      }, this);\n      getEnv(function (env) {\n        env.send(this, env.json.stringify(['%init%']));\n        var methods = this.methods;\n        setTimeout(function () {\n          if (methods.onInit) {\n            methods.onInit();\n          }\n        }, 0);\n      }, this);\n    },\n    onMessage: function (e) {\n      var data = e.data;\n      if (!data) {\n        return false;\n      }\n      if (typeof data !== 'string' && !(data instanceof String)) {\n        return false;\n      }\n      var key = data.substr(0, 5);\n      if (handlers[key]) {\n        var self = handlers[key][1];\n        if (self && (!self.filter || self.filter(e.origin))) {\n          handlers[key][0](data.substr(6), self, e.origin);\n        }\n      }\n    },\n    setJSON: function (json) {\n      env.json = json;\n    },\n    getJSON: function (callback) {\n      if (!callback) {\n        return env.json;\n      }\n      getEnv(function (env) {\n        callback(env.json);\n      });\n    },\n    getProxyToServer: function (key, method) {\n      return proxyToServer[key] && proxyToServer[key][method];\n    },\n    setEnv: function (exEnv) {\n      for (var i in exEnv) {\n        env[i] = exEnv[i];\n      }\n      envLoaded();\n    },\n    _q: {},\n    on: function (key, act, self) {\n      if (!this._q[key]) this._q[key] = [];\n      if (this._q[key] == -1) {\n        act.apply(self);\n      } else {\n        this._q[key].push([act, self]);\n      }\n    },\n    run: function (key) {\n      var len = (this._q[key] || []).length;\n      for (var i = 0; i < len; i++) {\n        this._q[key][i][0].apply(this._q[key][i][1]);\n      }\n      this._q[key] = -1;\n    },\n    waitFor: waitFor\n  };\n  w.fastXDM.Server.prototype.start = function (obj, count) {\n    if (obj.contentWindow) {\n      this.caller = obj.contentWindow;\n      this.frame = obj;\n      w.fastXDM.on('helper', function () {\n        w.fastXDM.onServerStart(this);\n      }, this);\n    } else {\n      // Opera old versions\n      var self = this;\n      count = count || 0;\n      if (count < 50) {\n        setTimeout(function () {\n          self.start.apply(self, [obj, count + 1]);\n        }, 100);\n      }\n    }\n  };\n  w.fastXDM.Server.prototype.destroy = function () {\n    delete handlers[this.key];\n  };\n  w.fastXDM.Server.prototype.append = function (obj, options, attrs) {\n    var div = document.createElement('DIV');\n    div.innerHTML = '<iframe name=\"' + this.frameName + '\" ' + (attrs || '') + '></iframe>';\n    var frame = div.firstChild;\n    var self = this;\n    setTimeout(function () {\n      frame.frameBorder = '0';\n      if (options) extend(frame, options);\n      obj.insertBefore(frame, obj.firstChild);\n      self.start(frame);\n    }, 0);\n    return frame;\n  };\n  w.fastXDM.Client.prototype.callMethod = w.fastXDM.Server.prototype.callMethod = function () {\n    var args = Array.prototype.slice.call(arguments);\n    var method = args.shift();\n    for (var i = 0, len = args.length; i < len; i++) {\n      if (typeof args[i] === 'function') {\n        this.funcsCount = (this.funcsCount || 0) + 1;\n        var func = args[i];\n        var funcName = '_func' + this.funcsCount;\n        this.methods[funcName] = function () {\n          func.apply(this, arguments);\n          delete this.methods[funcName];\n        };\n        args[i] = {\n          _func: this.funcsCount\n        };\n      } else if (this.options.safe) {\n        args[i] = walkVar(args[i], false);\n      }\n    }\n    waitFor(this, 'caller', function () {\n      w.fastXDM.on(this.id, function () {\n        getEnv(function (env) {\n          var xdm = this;\n          var proxyToServer = w.fastXDM.getProxyToServer(this.key, method);\n          if (proxyToServer) {\n            xdm = proxyToServer;\n            method = args.shift();\n          }\n          env.send(xdm, env.json.stringify([method, args]));\n        }, this);\n      }, this);\n    }, this);\n  };\n  w.fastXDM.Client.prototype.isUnsafeMethod = w.fastXDM.Server.prototype.isUnsafeMethod = function (method) {\n    return ~['%proxy%', '%init%'].indexOf(method) || this.options.unsafeMethods && ~this.options.unsafeMethods.indexOf(method);\n  };\n  if (w.JSON && typeof w.JSON === 'object' && w.JSON.parse && w.JSON.stringify && w.JSON.stringify({\n    a: [1, 2, 3]\n  }).replace(/ /g, '') === '{\"a\":[1,2,3]}') {\n    env.json = {\n      parse: w.JSON.parse,\n      stringify: w.JSON.stringify\n    };\n  } else {\n    w.fastXDM._needJSON = true;\n  }\n\n  // PostMessage cover\n  if (w.postMessage) {\n    env.protocol = 'p';\n    env.send = function (xdm, strData) {\n      var win = xdm.frame ? xdm.frame.contentWindow : xdm.caller;\n      if (win) {\n        try {\n          win.postMessage(xdm.key + ':' + strData, \"*\");\n        } catch (e) {\n          window.postMessage.call(win, xdm.key + ':' + strData, \"*\");\n        }\n      }\n    };\n    if (w.addEventListener) {\n      w.addEventListener(\"message\", w.fastXDM.onMessage, false);\n    } else {\n      w.attachEvent(\"onmessage\", w.fastXDM.onMessage);\n    }\n    if (w.fastXDM._needJSON) {\n      w.fastXDM._onlyJSON = true;\n      attachScript();\n    } else {\n      envLoaded();\n    }\n  } else {\n    attachScript();\n  }\n})(window);\nif (!window.VK) window.VK = {};\n\n/*\n * Based on JavaScript implementation of the RSA Data Security, Inc. MD5 Message\n * Copyright (C) Paul Johnston 1999 - 2009\n * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet\n * Distributed under the BSD License\n */\nif (!VK.MD5) {\n  VK.MD5 = function (n) {\n    var j = function (o, r) {\n        var q = (o & 65535) + (r & 65535),\n          p = (o >> 16) + (r >> 16) + (q >> 16);\n        return p << 16 | q & 65535;\n      },\n      g = function (o, p) {\n        return o << p | o >>> 32 - p;\n      },\n      k = function (w, r, p, o, v, u) {\n        return j(g(j(j(r, w), j(o, u)), v), p);\n      },\n      a = function (q, p, w, v, o, u, r) {\n        return k(p & w | ~p & v, q, p, o, u, r);\n      },\n      h = function (q, p, w, v, o, u, r) {\n        return k(p & v | w & ~v, q, p, o, u, r);\n      },\n      c = function (q, p, w, v, o, u, r) {\n        return k(p ^ w ^ v, q, p, o, u, r);\n      },\n      m = function (q, p, w, v, o, u, r) {\n        return k(w ^ (p | ~v), q, p, o, u, r);\n      },\n      b = function (A, u) {\n        var z = 1732584193,\n          y = -271733879,\n          w = -1732584194,\n          v = 271733878,\n          r,\n          q,\n          p,\n          o;\n        A[u >> 5] |= 128 << u % 32;\n        A[(u + 64 >>> 9 << 4) + 14] = u;\n        for (var t = 0, s = A.length; t < s; t += 16) {\n          r = z;\n          q = y;\n          p = w;\n          o = v;\n          z = a(z, y, w, v, A[t + 0], 7, -680876936);\n          v = a(v, z, y, w, A[t + 1], 12, -389564586);\n          w = a(w, v, z, y, A[t + 2], 17, 606105819);\n          y = a(y, w, v, z, A[t + 3], 22, -1044525330);\n          z = a(z, y, w, v, A[t + 4], 7, -176418897);\n          v = a(v, z, y, w, A[t + 5], 12, 1200080426);\n          w = a(w, v, z, y, A[t + 6], 17, -1473231341);\n          y = a(y, w, v, z, A[t + 7], 22, -45705983);\n          z = a(z, y, w, v, A[t + 8], 7, 1770035416);\n          v = a(v, z, y, w, A[t + 9], 12, -1958414417);\n          w = a(w, v, z, y, A[t + 10], 17, -42063);\n          y = a(y, w, v, z, A[t + 11], 22, -1990404162);\n          z = a(z, y, w, v, A[t + 12], 7, 1804603682);\n          v = a(v, z, y, w, A[t + 13], 12, -40341101);\n          w = a(w, v, z, y, A[t + 14], 17, -1502002290);\n          y = a(y, w, v, z, A[t + 15], 22, 1236535329);\n          z = h(z, y, w, v, A[t + 1], 5, -165796510);\n          v = h(v, z, y, w, A[t + 6], 9, -1069501632);\n          w = h(w, v, z, y, A[t + 11], 14, 643717713);\n          y = h(y, w, v, z, A[t + 0], 20, -373897302);\n          z = h(z, y, w, v, A[t + 5], 5, -701558691);\n          v = h(v, z, y, w, A[t + 10], 9, 38016083);\n          w = h(w, v, z, y, A[t + 15], 14, -660478335);\n          y = h(y, w, v, z, A[t + 4], 20, -405537848);\n          z = h(z, y, w, v, A[t + 9], 5, 568446438);\n          v = h(v, z, y, w, A[t + 14], 9, -1019803690);\n          w = h(w, v, z, y, A[t + 3], 14, -187363961);\n          y = h(y, w, v, z, A[t + 8], 20, 1163531501);\n          z = h(z, y, w, v, A[t + 13], 5, -1444681467);\n          v = h(v, z, y, w, A[t + 2], 9, -51403784);\n          w = h(w, v, z, y, A[t + 7], 14, 1735328473);\n          y = h(y, w, v, z, A[t + 12], 20, -1926607734);\n          z = c(z, y, w, v, A[t + 5], 4, -378558);\n          v = c(v, z, y, w, A[t + 8], 11, -2022574463);\n          w = c(w, v, z, y, A[t + 11], 16, 1839030562);\n          y = c(y, w, v, z, A[t + 14], 23, -35309556);\n          z = c(z, y, w, v, A[t + 1], 4, -1530992060);\n          v = c(v, z, y, w, A[t + 4], 11, 1272893353);\n          w = c(w, v, z, y, A[t + 7], 16, -155497632);\n          y = c(y, w, v, z, A[t + 10], 23, -1094730640);\n          z = c(z, y, w, v, A[t + 13], 4, 681279174);\n          v = c(v, z, y, w, A[t + 0], 11, -358537222);\n          w = c(w, v, z, y, A[t + 3], 16, -722521979);\n          y = c(y, w, v, z, A[t + 6], 23, 76029189);\n          z = c(z, y, w, v, A[t + 9], 4, -640364487);\n          v = c(v, z, y, w, A[t + 12], 11, -421815835);\n          w = c(w, v, z, y, A[t + 15], 16, 530742520);\n          y = c(y, w, v, z, A[t + 2], 23, -995338651);\n          z = m(z, y, w, v, A[t + 0], 6, -198630844);\n          v = m(v, z, y, w, A[t + 7], 10, 1126891415);\n          w = m(w, v, z, y, A[t + 14], 15, -1416354905);\n          y = m(y, w, v, z, A[t + 5], 21, -57434055);\n          z = m(z, y, w, v, A[t + 12], 6, 1700485571);\n          v = m(v, z, y, w, A[t + 3], 10, -1894986606);\n          w = m(w, v, z, y, A[t + 10], 15, -1051523);\n          y = m(y, w, v, z, A[t + 1], 21, -2054922799);\n          z = m(z, y, w, v, A[t + 8], 6, 1873313359);\n          v = m(v, z, y, w, A[t + 15], 10, -30611744);\n          w = m(w, v, z, y, A[t + 6], 15, -1560198380);\n          y = m(y, w, v, z, A[t + 13], 21, 1309151649);\n          z = m(z, y, w, v, A[t + 4], 6, -145523070);\n          v = m(v, z, y, w, A[t + 11], 10, -1120210379);\n          w = m(w, v, z, y, A[t + 2], 15, 718787259);\n          y = m(y, w, v, z, A[t + 9], 21, -343485551);\n          z = j(z, r);\n          y = j(y, q);\n          w = j(w, p);\n          v = j(v, o);\n        }\n        return [z, y, w, v];\n      },\n      f = function (r) {\n        var q = \"\",\n          s = -1,\n          p = r.length,\n          o,\n          t;\n        while (++s < p) {\n          o = r.charCodeAt(s);\n          t = s + 1 < p ? r.charCodeAt(s + 1) : 0;\n          if (55296 <= o && o <= 56319 && 56320 <= t && t <= 57343) {\n            o = 65536 + ((o & 1023) << 10) + (t & 1023);\n            s++;\n          }\n          if (o <= 127) {\n            q += String.fromCharCode(o);\n          } else {\n            if (o <= 2047) {\n              q += String.fromCharCode(192 | o >>> 6 & 31, 128 | o & 63);\n            } else {\n              if (o <= 65535) {\n                q += String.fromCharCode(224 | o >>> 12 & 15, 128 | o >>> 6 & 63, 128 | o & 63);\n              } else {\n                if (o <= 2097151) {\n                  q += String.fromCharCode(240 | o >>> 18 & 7, 128 | o >>> 12 & 63, 128 | o >>> 6 & 63, 128 | o & 63);\n                }\n              }\n            }\n          }\n        }\n        return q;\n      },\n      e = function (p) {\n        var o = Array(p.length >> 2),\n          r,\n          q;\n        for (r = 0, q = o.length; r < q; r++) {\n          o[r] = 0;\n        }\n        for (r = 0, q = p.length * 8; r < q; r += 8) {\n          o[r >> 5] |= (p.charCodeAt(r / 8) & 255) << r % 32;\n        }\n        return o;\n      },\n      l = function (p) {\n        var o = \"\";\n        for (var r = 0, q = p.length * 32; r < q; r += 8) {\n          o += String.fromCharCode(p[r >> 5] >>> r % 32 & 255);\n        }\n        return o;\n      },\n      d = function (o) {\n        return l(b(e(o), o.length * 8));\n      },\n      i = function (q) {\n        var t = \"0123456789abcdef\",\n          p = \"\",\n          o;\n        for (var s = 0, r = q.length; s < r; s++) {\n          o = q.charCodeAt(s);\n          p += t.charAt(o >>> 4 & 15) + t.charAt(o & 15);\n        }\n        return p;\n      };\n    return i(d(f(n)));\n  };\n}\n\n/*\n * VKontakte Open API JavaScript library\n * http://vk.com/\n */\n\nVK.extend = function (target, source, overwrite) {\n  for (var key in source) {\n    if (overwrite || typeof target[key] === 'undefined') {\n      target[key] = source[key];\n    }\n  }\n  return target;\n};\nVK.extend(VK, {\n  _domain: {\n    base: 'https://vk.com',\n    login: 'https://login.vk.com',\n    main: 'https://oauth.vk.com',\n    api: 'https://api.vk.com'\n  }\n}, true);\nif (!VK.xdConnectionCallbacks) {\n  VK.extend(VK, {\n    version: 1,\n    _apiId: null,\n    _session: null,\n    _userStatus: 'unknown',\n    _path: {\n      login: 'authorize',\n      proxy: 'fxdm_oauth_proxy.html'\n    },\n    _rootId: 'vk_api_transport',\n    _nameTransportPath: '',\n    xdReady: false,\n    access: {\n      FRIENDS: 0x2,\n      PHOTOS: 0x4,\n      AUDIO: 0x8,\n      VIDEO: 0x10,\n      MATCHES: 0x20,\n      QUESTIONS: 0x40,\n      WIKI: 0x80\n    }\n  });\n  VK.init = function (options) {\n    var body, root;\n    VK._apiId = null;\n    if (!options.apiId) {\n      throw Error('VK.init() called without an apiId');\n    }\n    VK._apiId = options.apiId;\n    if (options.onlyWidgets) return true;\n    if (options.nameTransportPath && options.nameTransportPath !== '') {\n      VK._nameTransportPath = options.nameTransportPath;\n    }\n    root = document.getElementById(VK._rootId);\n    if (!root) {\n      root = document.createElement('div');\n      root.id = VK._rootId;\n      body = document.body;\n      body.insertBefore(root, body.childNodes[0]);\n    }\n    root.style.position = 'absolute';\n    root.style.top = '-10000px';\n    var session = VK.Cookie.load();\n    if (session) {\n      VK.Auth._loadState = 'loaded';\n      VK.Auth.setSession(session, session ? 'connected' : 'unknown');\n    }\n  };\n  if (!VK.Cookie) {\n    VK.Cookie = {\n      _domain: null,\n      load: function () {\n        var cookie = document.cookie.match('\\\\bvk_app_' + VK._apiId + '=([^;]*)\\\\b');\n        var session;\n        if (cookie) {\n          session = this.decode(cookie[1]);\n          if (session.secret != 'oauth') {\n            return false;\n          }\n          session.expire = parseInt(session.expire, 10);\n          VK.Cookie._domain = '.' + window.location.hostname;\n        }\n        return session;\n      },\n      setRaw: function (val, ts, domain, time) {\n        var rawCookie;\n        rawCookie = 'vk_app_' + VK._apiId + '=' + val + '';\n        var exp = time ? new Date().getTime() + time * 1000 : ts * 1000;\n        rawCookie += val && ts === 0 ? '' : '; expires=' + new Date(exp).toGMTString();\n        rawCookie += '; path=/';\n        rawCookie += domain ? '; domain=.' + domain : '';\n        document.cookie = rawCookie;\n        this._domain = domain;\n      },\n      set: function (session, resp) {\n        if (session) {\n          this.setRaw(this.encode(session), session.expire, window.location.hostname, (resp || {}).time);\n        } else {\n          this.clear();\n        }\n      },\n      clear: function () {\n        this.setRaw('', 0, this._domain, 0);\n      },\n      encode: function (params) {\n        var pairs = [],\n          key;\n        for (key in params) {\n          if (key != 'user') pairs.push(encodeURIComponent(key) + '=' + encodeURIComponent(params[key]));\n        }\n        pairs.sort();\n        return pairs.join('&');\n      },\n      decode: function (str) {\n        var params = {},\n          parts = str.split('&'),\n          i,\n          pair;\n        for (i = 0; i < parts.length; i++) {\n          pair = parts[i].split('=', 2);\n          if (pair && pair[0]) {\n            params[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\n          }\n        }\n        return params;\n      }\n    };\n  }\n  function obj2qs(obj) {\n    if (!obj) return '';\n    var qs = [];\n    for (var k in obj) {\n      if (obj.hasOwnProperty(k)) {\n        qs.push(encodeURIComponent(k) + '=' + encodeURIComponent(obj[k].toString() || ''));\n      }\n    }\n    return qs.length ? '?' + qs.join('&') : '';\n  }\n  if (!VK.Api) {\n    VK.Api = {\n      _headId: null,\n      _callbacks: {},\n      ie6_7: function () {\n        if (!VK.Api.ieTested) {\n          VK.Api.isIE6_7 = navigator.userAgent.match(/MSIE [6|7]/i);\n          VK.Api.ieTested = true;\n        }\n        return VK.Api.isIE6_7;\n      },\n      supportCORS: function () {\n        var xhr = new XMLHttpRequest();\n        if (\"withCredentials\" in xhr) {\n          return true;\n        }\n        if (typeof XDomainRequest != \"undefined\") {\n          return true;\n        }\n        return false;\n      },\n      makeRequest: function (url, cb) {\n        var xhr = VK.Api.createRequest('GET', url);\n        if (!xhr) {\n          return false;\n        }\n        xhr.onload = function () {\n          var text = xhr.responseText;\n          if (xhr.status === 200) {\n            cb(text);\n          } else {\n            try {\n              console.error('Open api access error', xhr.response);\n            } catch (e) {\n              //nop\n            }\n          }\n        };\n        xhr.onerror = function () {\n          try {\n            console.error('Open api access error');\n          } catch (e) {\n            //nop\n          }\n        };\n        xhr.send();\n        return true;\n      },\n      createRequest: function (method, url) {\n        var xhr = new XMLHttpRequest();\n        if (\"withCredentials\" in xhr) {\n          // XHR for Chrome/Firefox/Opera/Safari.\n          xhr.open(method, url, true);\n          xhr.withCredentials = true;\n        } else if (typeof XDomainRequest != \"undefined\") {\n          // XDomainRequest for IE.\n          xhr = new XDomainRequest();\n          xhr.open(method, url);\n          xhr.withCredentials = true;\n        } else {\n          // CORS not supported.\n          xhr = null;\n        }\n        return xhr;\n      },\n      attachScript: function (url) {\n        if (!VK.Api._headId) VK.Api._headId = document.getElementsByTagName(\"head\")[0];\n        var newScript = document.createElement('script');\n        newScript.type = 'text/javascript';\n        newScript.setAttribute('encoding', 'UTF-8');\n        newScript.src = url;\n        VK.Api._headId.appendChild(newScript);\n      },\n      checkMethod: function (method, params, cb, queryTry) {\n        var m = method.toLowerCase();\n        if (m === 'wall.post') {\n          var validAttacheRegexp = /(^https?:\\/\\/)|(^(poll|album|photo|video|doc|audio|page|note)-?\\d+_-?\\d+)$/,\n            validAttachments = [],\n            methodAccess,\n            queryParams,\n            query,\n            timer;\n          if (!params.v) {\n            params.v = '5.95';\n          }\n          params.attachments = params.attachments || params.attachment || [];\n          if (typeof params.attachments === 'string') {\n            params.attachments = params.attachments.split(',');\n          }\n          for (var i = 0; i < params.attachments.length; i++) {\n            var attach = params.attachments[i].trim();\n            if (validAttacheRegexp.test(attach)) {\n              validAttachments.push(attach);\n            }\n          }\n          params.attachments = validAttachments.length ? validAttachments : '';\n          methodAccess = '_' + Math.random().toString(16).substr(2);\n          queryParams = {\n            act: 'wall_post_box',\n            method: m,\n            widget: 4,\n            aid: parseInt(VK._apiId, 10),\n            text: params.message || '',\n            method_access: methodAccess\n          };\n          queryParams = VK.extend(queryParams, params);\n          queryParams.owner_id = parseInt(params.owner_id || 0, 10);\n          queryParams.publish_date = params.publish_date || '';\n          query = VK._domain.base + '/al_apps.php';\n          query += obj2qs(queryParams);\n          VK.UI.popup({\n            url: query,\n            width: 560,\n            height: 304\n          });\n          timer = setInterval(function () {\n            if (VK.UI.active.closed) {\n              clearInterval(timer);\n              params.method_access = methodAccess;\n              VK.Api.call(method, params, cb, queryTry);\n            }\n          }, 500);\n          return false;\n        }\n        if (m == 'messages.allowmessagesfromgroup') {\n          methodAccess = '_' + Math.random().toString(16).substr(2);\n          query = VK._domain.base + '/widget_allow_messages_from_community.php?act=allow_box&group_id=' + parseInt(params.group_id, 10) + '&app_id=' + parseInt(VK._apiId, 10) + '&method_access=' + methodAccess;\n          VK.UI.popup({\n            url: query,\n            width: 560,\n            height: 304\n          });\n          timer = setInterval(function () {\n            if (VK.UI.active.closed) {\n              clearInterval(timer);\n              params.method_access = methodAccess;\n              VK.Api.call(method, params, cb, queryTry);\n            }\n          }, 500);\n          return false;\n        }\n        return true;\n      },\n      call: function (method, params, cb, queryTry) {\n        var query = params || {},\n          qs,\n          responseCb;\n        if (typeof query != 'object' || typeof cb != 'function') {\n          return false;\n        }\n        if (!params.method_access && !params.method_force && !VK.Api.checkMethod(method, params, cb, queryTry)) {\n          return;\n        }\n        if (!queryTry) queryTry = 0;\n        if (VK.Auth._loadState != 'loaded') {\n          var authFunc = function (result) {\n            if (result && result.session) {\n              VK.Observer.unsubscribe('auth.loginStatus', authFunc);\n              VK.Api.call(method, params, cb);\n            }\n          };\n          VK.Observer.subscribe('auth.loginStatus', authFunc);\n          VK.Auth.getLoginStatus();\n          return;\n        }\n        if (VK.Api.queryLength(query) < 1500 && !VK.Api.ie6_7()) {\n          var useXDM = false;\n          var rnd = parseInt(Math.random() * 10000000, 10);\n          while (VK.Api._callbacks[rnd]) {\n            rnd = parseInt(Math.random() * 10000000, 10);\n          }\n          query.callback = 'VK.Api._callbacks[' + rnd + ']';\n        } else {\n          var useXDM = true;\n        }\n        if (VK._session && VK._session.sid) {\n          query.access_token = VK._session.sid;\n        }\n        qs = VK.Cookie.encode(query);\n        responseCb = function (response) {\n          if (response.error && (response.error.error_code == 3 || response.error.error_code == 4 || response.error.error_code == 5)) {\n            if (queryTry > 3) return false;\n            var repeatCall = function (resp) {\n              VK.Observer.unsubscribe('auth.sessionChange', repeatCall);\n              delete params.access_token;\n              if (resp.session) VK.Api.call(method, params, cb, queryTry + 1);\n            };\n            VK.Observer.subscribe('auth.sessionChange', repeatCall);\n            VK.Auth.getLoginStatus();\n          } else {\n            cb(response);\n          }\n          if (!useXDM) delete VK.Api._callbacks[rnd];\n        };\n        if (useXDM) {\n          if (VK.xdReady) {\n            VK.XDM.remote.callMethod('apiCall', method, qs, responseCb);\n          } else {\n            VK.Observer.subscribe('xdm.init', function () {\n              VK.XDM.remote.callMethod('apiCall', method, qs, responseCb);\n            });\n            VK.XDM.init();\n          }\n        } else {\n          VK.Api._callbacks[rnd] = responseCb;\n          VK.Api.attachScript(VK._domain.api + '/method/' + method + '?' + qs);\n        }\n      },\n      queryLength: function (query) {\n        var len = 100,\n          i; // sid + sig\n        for (i in query) {\n          len += i.length + encodeURIComponent(query[i]).length + 1;\n        }\n        return len;\n      }\n    };\n\n    // Alias\n    VK.api = function (method, params, cb) {\n      VK.Api.call(method, params, cb);\n    };\n  }\n  ;\n  if (!VK.Auth) {\n    VK.Auth = {\n      popup: null,\n      lsCb: {},\n      setSession: function (session, status, settings, resp) {\n        var login = !VK._session && session,\n          logout = VK._session && !session,\n          both = VK._session && session && VK._session.mid != session.mid,\n          sessionChange = login || logout || VK._session && session && VK._session.sid != session.sid,\n          statusChange = status != VK._userStatus,\n          response = {\n            'session': session,\n            'status': status,\n            'settings': settings\n          };\n        VK._session = session;\n        VK._userStatus = status;\n        VK.Cookie.set(session, resp);\n        if (sessionChange || statusChange || both) {\n          setTimeout(function () {\n            if (statusChange) {\n              VK.Observer.publish('auth.statusChange', response);\n            }\n            if (logout || both) {\n              VK.Observer.publish('auth.logout', response);\n            }\n            if (login || both) {\n              VK.Observer.publish('auth.login', response);\n            }\n            if (sessionChange) {\n              VK.Observer.publish('auth.sessionChange', response);\n            }\n          }, 0);\n        }\n        return response;\n      },\n      // Public VK.Auth methods\n      login: function (cb, settings) {\n        if (!VK._apiId) {\n          return false;\n        }\n        var url = VK._domain.main + '/' + VK._path.login + '?client_id=' + VK._apiId + '&display=popup&redirect_uri=close.html&response_type=token&openapi=1';\n        if (settings && parseInt(settings, 10) > 0) {\n          url += '&scope=' + settings;\n        }\n        VK.Observer.unsubscribe('auth.onLogin');\n        VK.Observer.subscribe('auth.onLogin', cb);\n        VK.UI.popup({\n          width: 665,\n          height: 370,\n          url: url\n        });\n        var authCallback = function () {\n          VK.Auth.getLoginStatus(function (resp) {\n            VK.Observer.publish('auth.onLogin', resp);\n            VK.Observer.unsubscribe('auth.onLogin');\n          }, true);\n        };\n        VK.UI.popupOpened = true;\n        var popupCheck = function () {\n          if (!VK.UI.popupOpened) {\n            return false;\n          }\n          try {\n            if (!VK.UI.active.top || VK.UI.active.closed) {\n              VK.UI.popupOpened = false;\n              authCallback();\n              return true;\n            }\n          } catch (e) {\n            VK.UI.popupOpened = false;\n            authCallback();\n            return true;\n          }\n          setTimeout(popupCheck, 100);\n        };\n        setTimeout(popupCheck, 100);\n      },\n      // Logout user from app, vk.com & login.vk.com\n      logout: function (cb) {\n        VK.Auth.revokeGrants(cb);\n      },\n      revokeGrants: function (cb) {\n        var onLogout = function (resp) {\n          VK.Observer.unsubscribe('auth.statusChange', onLogout);\n          if (cb) {\n            cb(resp);\n          }\n        };\n        VK.Observer.subscribe('auth.statusChange', onLogout);\n        if (VK._session && VK._session.sid) {\n          var url = VK._domain.login + '?act=openapi&oauth=1&aid=' + parseInt(VK._apiId, 10) + '&location=' + encodeURIComponent(window.location.hostname) + '&do_logout=1&token=' + VK._session.sid;\n          if (VK.Api.supportCORS()) {\n            var logoutCallback = function () {\n              VK.Auth.setSession(null, 'unknown');\n            };\n            VK.Api.makeRequest(url + '&new=1', logoutCallback);\n          } else {\n            VK.Api.attachScript(url);\n          }\n        }\n        VK.Cookie.clear();\n      },\n      // Get current login status from session (sync) (not use on load time)\n      getSession: function () {\n        return VK._session;\n      },\n      // Get current login status from vk.com (async)\n      getLoginStatus: function (cb, force) {\n        if (!VK._apiId) {\n          return;\n        }\n        if (cb) {\n          if (!force && VK.Auth._loadState == 'loaded') {\n            cb({\n              status: VK._userStatus,\n              session: VK._session\n            });\n            return;\n          } else {\n            VK.Observer.subscribe('auth.loginStatus', cb);\n          }\n        }\n        if (!force && VK.Auth._loadState == 'loading') {\n          return;\n        }\n        VK.Auth._loadState = 'loading';\n        var url = VK._domain.login + '?act=openapi&oauth=1&aid=' + parseInt(VK._apiId, 10) + '&location=' + encodeURIComponent(window.location.hostname);\n        if (VK.Api.supportCORS()) {\n          var loginCallback = function (response) {\n            if (!this.JSON) {\n              this.JSON = {};\n            }\n            if (typeof JSON.parse !== 'function') {\n              //IE6 and IE7\n              response = eval(response);\n            } else {\n              response = JSON.parse(response);\n            }\n            VK.Auth._loadState = 'loaded';\n            if (response && response.auth) {\n              var session = {\n                mid: response.user.id,\n                sid: response.access_token,\n                sig: response.sig,\n                secret: response.secret,\n                expire: response.expire\n              };\n              if (force) {\n                session.user = response.user;\n              }\n              var status = 'connected';\n            } else {\n              var session = null;\n              var status = response.user ? 'not_authorized' : 'unknown';\n              VK.Cookie.clear();\n            }\n            VK.Auth.setSession(session, status, false, response);\n            VK.Observer.publish('auth.loginStatus', {\n              session: session,\n              status: status\n            });\n            VK.Observer.unsubscribe('auth.loginStatus');\n          };\n          VK.Api.makeRequest(url + '&new=1', loginCallback);\n        } else {\n          var rnd = parseInt(Math.random() * 10000000, 10);\n          while (VK.Auth.lsCb[rnd]) {\n            rnd = parseInt(Math.random() * 10000000, 10);\n          }\n          VK.Auth.lsCb[rnd] = function (response) {\n            delete VK.Auth.lsCb[rnd];\n            VK.Auth._loadState = 'loaded';\n            if (response && response.auth) {\n              var session = {\n                mid: response.user.id,\n                sid: response.access_token,\n                sig: response.sig,\n                secret: response.secret,\n                expire: response.expire\n              };\n              if (force) session.user = response.user;\n              var status = 'connected';\n            } else {\n              var session = null;\n              var status = response.user ? 'not_authorized' : 'unknown';\n              VK.Cookie.clear();\n            }\n            VK.Auth.setSession(session, status, false, response);\n            VK.Observer.publish('auth.loginStatus', {\n              session: session,\n              status: status\n            });\n            VK.Observer.unsubscribe('auth.loginStatus');\n          };\n\n          // AttachScript here\n          VK.Api.attachScript(url + '&rnd=' + rnd);\n        }\n      }\n    };\n  }\n  if (!VK.App) {\n    VK.App = {\n      _appOpened: false,\n      _addToGroupPopup: null,\n      open: function (url, params) {\n        if (VK.App._appOpened || !VK._apiId) {\n          return;\n        }\n        if (!VK._session) {\n          VK.Auth.login(function (resp) {\n            if (resp && resp.session) {\n              VK.App._openApp(url, params);\n            }\n          });\n        } else {\n          VK.App._openApp(url, params);\n        }\n      },\n      _openApp: function (url, params) {\n        var src,\n          box,\n          request = [];\n        params = params || {};\n        if (!url || !VK._apiId || VK.App._appOpened) {\n          return;\n        }\n        if (Object.prototype.toString.call(params.data) === '[object Object]') {\n          try {\n            params.data = JSON.stringify(params.data);\n          } catch (e) {\n            params.data = '';\n          }\n        }\n        src = VK._domain.base + '/apps?act=open_external_app_openapi&aid=' + VK._apiId;\n        params['aid'] = VK._apiId;\n        for (var arg in params) {\n          var val = '';\n          if (!params.hasOwnProperty(arg)) {\n            continue;\n          }\n          if (params[arg] !== undefined) {\n            val = encodeURIComponent(params[arg]);\n          }\n          request.push(encodeURIComponent(arg) + '=' + val);\n        }\n        src += '&url=' + url;\n        src += '&q=' + encodeURIComponent(request.join('&'));\n        box = VK.Util.Box(src, {}, {\n          closeExternalApp: function () {\n            if (VK.App._result) {\n              VK.Observer.publish('app.done', VK.App._result);\n              VK.App._result = null;\n            } else {\n              VK.Observer.publish('app.closed');\n            }\n            box.hide();\n            VK.App._appOpened = false;\n          },\n          externalAppDone: function (params, noCloseLayer) {\n            if (noCloseLayer) {\n              VK.App._result = params;\n            } else {\n              VK.Observer.publish('app.done', params);\n              box.hide();\n              VK.App._appOpened = false;\n              VK.App._result = null;\n            }\n          }\n        });\n        box.show();\n        VK.App._appOpened = true;\n        VK.App._result = null;\n      },\n      addToGroup: function (appId) {\n        if (this._addToGroupPopup && !this._addToGroupPopup.closed) {\n          return;\n        }\n        if (this._onAddToGroupDone) {\n          VK.Util.removeEvent('message', this._onAddToGroupDone, window);\n        }\n        this._onAddToGroupDone = function (event) {\n          if (event.origin === VK._domain.base && event.data.method === 'app.addToGroup') {\n            VK.Observer.publish('app.addToGroupDone', {\n              app_id: event.data.app_id,\n              group_ids: event.data.group_ids\n            });\n            VK.Util.removeEvent('message', this._onAddToGroupDone, window);\n            this._onAddToGroupDone = null;\n          }\n        }.bind(this);\n        if (window.postMessage) {\n          VK.Util.addEvent('message', this._onAddToGroupDone, window);\n        }\n        this._addToGroupPopup = VK.UI.popup({\n          url: VK._domain.base + '/add_community_app.php?aid=' + appId,\n          width: 560,\n          height: 650\n        });\n      }\n    };\n  }\n} else {\n  // if VK.xdConnectionCallbacks\n  setTimeout(function () {\n    var callback;\n    while (callback = VK.xdConnectionCallbacks.pop()) {\n      callback();\n    }\n  }, 0);\n  if (VK.Widgets && !VK.Widgets._constructor) {\n    VK.Widgets = false;\n  }\n}\nif (!VK.UI) {\n  VK.UI = {\n    active: null,\n    _buttons: [],\n    popup: function (options) {\n      var screenX = typeof window.screenX != 'undefined' ? window.screenX : window.screenLeft,\n        screenY = typeof window.screenY != 'undefined' ? window.screenY : window.screenTop,\n        outerWidth = typeof window.outerWidth != 'undefined' ? window.outerWidth : document.body.clientWidth,\n        outerHeight = typeof window.outerHeight != 'undefined' ? window.outerHeight : document.body.clientHeight - 22,\n        width = options.width,\n        height = options.height,\n        left = parseInt(screenX + (outerWidth - width) / 2, 10),\n        top = parseInt(screenY + (outerHeight - height) / 2.5, 10),\n        features;\n      left = window.screen && window.screenX && screen.left && screen.left > 1000 ? 0 : left; // FF with 2 monitors fix\n      features = 'width=' + width + ',height=' + height + ',left=' + left + ',top=' + top;\n      this.active = window.open(options.url, 'vk_openapi', features);\n      return this.active;\n    },\n    button: function (el, handler) {\n      var html = '';\n      if (typeof el == 'string') {\n        el = document.getElementById(el);\n      }\n      this._buttons.push(el);\n      index = this._buttons.length - 1;\n      html = '<table cellspacing=\"0\" cellpadding=\"0\" id=\"openapi_UI_' + index + '\" onmouseover=\"VK.UI._change(1, ' + index + ');\" onmouseout=\"VK.UI._change(0, ' + index + ');\" onmousedown=\"VK.UI._change(2, ' + index + ');\" onmouseup=\"VK.UI._change(1, ' + index + ');\" style=\"cursor: pointer; border: 0px; font-family: tahoma, arial, verdana, sans-serif, Lucida Sans; font-size: 10px;\"><tr style=\"vertical-align: middle\">' + '<td><div style=\"border: 1px solid #3b6798;border-radius: 2px 0px 0px 2px;-moz-border-radius: 2px 0px 0px 2px;-webkit-border-radius: 2px 0px 0px 2px;\"><div style=\"border: 1px solid #5c82ab; border-top-color: #7e9cbc; background-color: #6D8DB1; color: #fff; text-shadow: 0px 1px #45688E; height: 15px; padding: 2px 4px 0px 6px;line-height: 13px;\">&#1042;&#1086;&#1081;&#1090;&#1080;</div></div></td>' + '<td><div style=\"background: url(' + VK._domain.base + '/images/btns.png) 0px -42px no-repeat; width: 21px; height: 21px\"></div></td>' + '<td><div style=\"border: 1px solid #3b6798;border-radius: 0px 2px 2px 0px;-moz-border-radius: 0px 2px 2px 0px;-webkit-border-radius: 0px 2px 2px 0px;\"><div style=\"border: 1px solid #5c82ab; border-top-color: #7e9cbc; background-color: #6D8DB1; color: #fff; text-shadow: 0px 1px #45688E; height: 15px; padding: 2px 6px 0px 4px;line-height: 13px;\">&#1050;&#1086;&#1085;&#1090;&#1072;&#1082;&#1090;&#1077;</div></div></td>' + '</tr></table>';\n      el.innerHTML = html;\n      el.style.width = el.childNodes[0].offsetWidth + 'px';\n    },\n    _change: function (state, index) {\n      var row = document.getElementById('openapi_UI_' + index).rows[0];\n      var elems = [row.cells[0].firstChild.firstChild, row.cells[2].firstChild.firstChild];\n      for (var i = 0; i < 2; ++i) {\n        var elem = elems[i];\n        if (state === 0) {\n          elem.style.backgroundColor = '#6D8DB1';\n          elem.style.borderTopColor = '#7E9CBC';\n          elem.style.borderLeftColor = elem.style.borderRightColor = elem.style.borderBottomColor = '#5C82AB';\n        } else if (state == 1) {\n          elem.style.backgroundColor = '#7693B6';\n          elem.style.borderTopColor = '#88A4C4';\n          elem.style.borderLeftColor = elem.style.borderRightColor = elem.style.borderBottomColor = '#6088B4';\n        } else if (state == 2) {\n          elem.style.backgroundColor = '#6688AD';\n          elem.style.borderBottomColor = '#7495B8';\n          elem.style.borderLeftColor = elem.style.borderRightColor = elem.style.borderTopColor = '#51779F';\n        }\n      }\n      if (state === 0 || state == 2) {\n        row.cells[2].firstChild.style.backgroundPosition = '0px -42px';\n      } else if (state == 1) {\n        row.cells[2].firstChild.style.backgroundPosition = '0px -63px';\n      }\n    }\n  };\n}\nif (!VK.XDM) {\n  VK.XDM = {\n    remote: null,\n    init: function () {\n      if (this.remote) return false;\n      var url = VK._domain.api + '/' + VK._path.proxy;\n      this.remote = new fastXDM.Server({\n        onInit: function () {\n          VK.xdReady = true;\n          VK.Observer.publish('xdm.init');\n        }\n      });\n      this.remote.append(document.getElementById(VK._rootId), {\n        src: url\n      });\n    },\n    xdHandler: function (code) {\n      try {\n        eval('VK.' + code);\n      } catch (e) {}\n    }\n  };\n}\nif (!VK.Observer) {\n  VK.Observer = {\n    _subscribers: function () {\n      if (!this._subscribersMap) {\n        this._subscribersMap = {};\n      }\n      return this._subscribersMap;\n    },\n    publish: function (eventName) {\n      var args = Array.prototype.slice.call(arguments),\n        eventName = args.shift(),\n        subscribers = this._subscribers()[eventName],\n        i,\n        j;\n      if (!subscribers) return;\n      for (i = 0, j = subscribers.length; i < j; i++) {\n        if (subscribers[i] != null) {\n          subscribers[i].apply(this, args);\n        }\n      }\n    },\n    subscribe: function (eventName, handler) {\n      var subscribers = this._subscribers();\n      if (typeof handler != 'function') return false;\n      if (!subscribers[eventName]) {\n        subscribers[eventName] = [handler];\n      } else {\n        subscribers[eventName].push(handler);\n      }\n    },\n    unsubscribe: function (eventName, handler) {\n      var subscribers = this._subscribers()[eventName],\n        i,\n        j;\n      if (!subscribers) return false;\n      if (typeof handler == 'function') {\n        for (i = 0, j = subscribers.length; i < j; i++) {\n          if (subscribers[i] == handler) {\n            subscribers[i] = null;\n          }\n        }\n      } else {\n        delete this._subscribers()[eventName];\n      }\n    }\n  };\n}\nif (!VK.Widgets) {\n  VK.Widgets = {};\n  VK.Widgets.count = 0;\n  VK.Widgets.RPC = {};\n  VK.Widgets.loading = function (obj, enabled) {\n    obj.style.background = enabled ? 'url(\"' + VK._domain.base + '/images/upload.gif\") center center no-repeat transparent' : 'none';\n  };\n  VK.Widgets.Comments = function (objId, options, page) {\n    var pData = VK.Util.getPageData();\n    if (!VK._apiId) throw Error('VK not initialized. Please use VK.init');\n    options = VK.Util.parseOptions(options);\n    var obj = document.getElementById(objId),\n      params = {\n        limit: options.limit || 10,\n        height: options.height || 0,\n        mini: options.mini === undefined ? 'auto' : options.mini,\n        norealtime: options.norealtime ? 1 : 0\n      },\n      mouseup = function () {\n        rpc.callMethod('mouseUp');\n        return false;\n      },\n      move = function (event) {\n        rpc.callMethod('mouseMove', {\n          screenY: event.screenY\n        });\n      },\n      iframe,\n      rpc;\n    if (options.browse) {\n      // browse all comments\n      params.browse = 1;\n      params.replies = options.replies || 0;\n    } else {\n      // page\n      var url = options.pageUrl || pData.url;\n      if (url.substr(0, 1) == '/') {\n        url = location.protocol + '//' + location.host + url;\n      }\n      VK.extend(params, {\n        page: page || 0,\n        status_publish: options.autoPublish === undefined ? 0 : options.autoPublish,\n        attach: options.attach === undefined ? '*' : options.attach ? options.attach : '',\n        url: url,\n        title: options.pageTitle || pData.title,\n        description: options.pageDescription || pData.description,\n        image: options.pageImage || pData.image\n      });\n    }\n    if (options.onChange) {\n      // DEPRECATED\n      VK.Observer.subscribe('widgets.comments.new_comment', options.onChange);\n      VK.Observer.subscribe('widgets.comments.delete_comment', options.onChange);\n    }\n    return VK.Widgets._constructor('widget_comments.php', objId, options, params, {\n      showBox: function (url, props) {\n        var box = VK.Util.Box(VK.Util.getAbsUrl(url), [], {\n          proxy: rpc\n        });\n        box.show();\n      },\n      startDrag: function () {\n        cursorBack = window.document.body.style.cursor;\n        window.document.body.style.cursor = 'pointer';\n        VK.Util.addEvent('mousemove', move);\n        VK.Util.addEvent('mouseup', mouseup);\n      },\n      stopDrag: function () {\n        window.document.body.style.cursor = cursorBack;\n        VK.Util.removeEvent('mousemove', move);\n        VK.Util.removeEvent('mouseup', mouseup);\n      }\n    }, {\n      startHeight: 133,\n      minWidth: 300\n    }, function (o, i, r) {\n      iframe = i;\n      rpc = r;\n    });\n  };\n  VK.Widgets.CommentsBrowse = function (objId, options) {\n    options = VK.Util.parseOptions(options);\n    options.browse = 1;\n    return VK.Widgets.Comments(objId, options);\n  };\n  VK.Widgets.Recommended = function (objId, options) {\n    var pData = VK.Util.getPageData();\n    if (!VK._apiId) throw Error('VK not initialized. Please use VK.init');\n    options = VK.Util.parseOptions(options);\n    var params = {\n      limit: options.limit || 5,\n      max: options.max || 0,\n      sort: options.sort || 'friend_likes',\n      verb: options.verb || 0,\n      period: options.period || 'week',\n      target: options.target || 'parent'\n    };\n    return VK.Widgets._constructor('widget_recommended.php', objId, options, params, {}, {\n      startHeight: 116 + params.limit * 47 - 15,\n      minWidth: 150\n    });\n  };\n  VK.Widgets.Post = function (objId, ownerId, postId, hash, options) {\n    options = VK.Util.parseOptions(options);\n    var obj = document.getElementById(objId),\n      params = {\n        owner_id: ownerId,\n        post_id: postId,\n        hash: hash || '',\n        from: options ? options.from : ''\n      },\n      iframe,\n      rpc,\n      cursorBack;\n    return VK.Widgets._constructor('widget_post.php', objId, options, params, {\n      showBox: function (url, props) {\n        var box = VK.Util.Box(VK.Util.getAbsUrl(url), [], {\n          proxy: rpc\n        });\n        box.show();\n      },\n      startDrag: function () {\n        cursorBack = window.document.body.style.cursor;\n        window.document.body.style.cursor = 'pointer';\n      },\n      stopDrag: function () {\n        window.document.body.style.cursor = cursorBack;\n      }\n    }, {\n      startHeight: 90,\n      minWidth: 250\n    }, function (o, i, r) {\n      iframe = i;\n      rpc = r;\n    });\n  };\n  VK.Widgets.TextLive = function (widgetRootElementId, textLiveId, textPostId, hash, options) {\n    options = VK.Util.parseOptions(options);\n    return VK.Widgets._constructor('widget_textlive.php', widgetRootElementId, options, {\n      textlive_id: textLiveId,\n      textpost_id: textPostId,\n      hash: hash || ''\n    }, null, {\n      startHeight: textPostId ? 176 : 167,\n      minWidth: 320\n    });\n  };\n  VK.Widgets.Like = function (Like) {\n    if (Like) return Like;\n    var instances = [];\n    Like = function (objId, options, page) {\n      var pData = VK.Util.getPageData();\n      if (!VK._apiId) throw Error('VK not initialized. Please use VK.init');\n      options = VK.extend(VK.Util.parseOptions(options), {\n        allowTransparency: true\n      });\n      var verticalBtnHeightWidth = {\n          18: 43,\n          20: 47,\n          22: 51,\n          24: 55,\n          30: 67\n        },\n        type = options.type == 'full' || options.type == 'button' || options.type == 'vertical' || options.type == 'mini' ? options.type : 'full',\n        autoWidth = options.width === 'auto' && (type == 'button' || type == 'mini'),\n        btnHeight = parseInt(options.height, 10) || 22,\n        size = btnHeight && verticalBtnHeightWidth[btnHeight] ? btnHeight : 22,\n        width = autoWidth ? 153 : type == 'full' ? Math.max(200, options.width || 350) : type == 'button' ? 180 : type == 'mini' ? 115 : verticalBtnHeightWidth[size],\n        height = type == 'vertical' ? 2 * btnHeight + 7 : btnHeight,\n        params = {\n          page: page || 0,\n          url: options.pageUrl || pData.url,\n          type: type,\n          verb: options.verb == 1 ? 1 : 0,\n          color: options.color || '',\n          title: options.pageTitle || pData.title,\n          description: options.pageDescription || pData.description,\n          image: options.pageImage || pData.image,\n          text: (options.text || '').substr(0, 140),\n          h: btnHeight\n        },\n        ttHere = options.ttHere || false,\n        isOver = false,\n        hideTimeout = null,\n        obj,\n        buttonIfr,\n        buttonRpc,\n        tooltipIfr,\n        tooltipRpc,\n        checkTO;\n      if (type == 'vertical' || type == 'button' || type == 'mini') delete options.width;\n      if (autoWidth) params.auto_width = 1;\n      function showTooltip(force) {\n        if (!isOver && !force || !tooltipRpc) return;\n        if (!tooltipIfr || !tooltipRpc || tooltipIfr.style.display != 'none' && tooltipIfr.getAttribute('vkhidden') != 'yes') return;\n        hideTimeout && clearTimeout(hideTimeout);\n        checkTO && clearTimeout(checkTO);\n        var scrollTop = options.getScrollTop ? options.getScrollTop() : document.body.scrollTop || document.documentElement.scrollTop || 0;\n        var objPos = VK.Util.getXY(obj, options.fixed);\n        var startY = ttHere ? 0 : objPos[1];\n        if (scrollTop > objPos[1] - 120 && options.tooltipPos != 'top' || type == 'vertical' || options.tooltipPos == 'bottom') {\n          tooltipIfr.style.top = startY + height + 2 + 'px';\n          tooltipRpc.callMethod('show', false, type + '_' + size);\n        } else {\n          tooltipIfr.style.top = startY - 128 + 'px';\n          tooltipRpc.callMethod('show', true, type + '_' + size);\n        }\n        VK.Util.ss(tooltipIfr, {\n          left: (ttHere ? 0 : objPos[0]) - (type == 'full' || type == 'button' ? 32 : 2) + 'px',\n          display: 'block',\n          opacity: 1,\n          filter: 'none'\n        });\n        tooltipIfr.setAttribute('vkhidden', 'no');\n        isOver = true;\n      }\n      function hideTooltip(force) {\n        if (isOver && !force || !tooltipRpc) return;\n        tooltipRpc.callMethod('hide');\n        buttonRpc.callMethod('hide');\n        hideTimeout = setTimeout(function () {\n          tooltipIfr.style.display = 'none';\n        }, 400);\n      }\n      var widgetId = VK.Widgets._constructor('widget_like.php', objId, options, params, {\n        initTooltip: function (counter) {\n          tooltipRpc = new fastXDM.Server({\n            onInit: counter ? function () {\n              showTooltip();\n            } : function () {},\n            proxy: buttonRpc,\n            showBox: function (url, props) {\n              var box = VK.Util.Box(VK.Util.getAbsUrl(url), [props.width, props.height], {\n                proxy: tooltipRpc\n              });\n              box.show();\n            }\n          }, false, {\n            safe: true\n          });\n          tooltipIfr = tooltipRpc.append(ttHere ? obj : document.body, {\n            src: buttonIfr.src + '&act=a_like_tooltip',\n            scrolling: 'no',\n            allowTransparency: true,\n            id: buttonIfr.id + '_tt',\n            style: {\n              position: 'absolute',\n              padding: 0,\n              display: 'none',\n              opacity: 0.01,\n              filter: 'alpha(opacity=1)',\n              border: '0',\n              width: '274px',\n              height: '130px',\n              zIndex: 5000,\n              overflow: 'hidden'\n            }\n          });\n          tooltipIfr.setAttribute('vkhidden', 'yes');\n          tooltipIfr.onmouseover = function () {\n            clearTimeout(checkTO);\n            isOver = true;\n          };\n          tooltipIfr.onmouseout = function () {\n            clearTimeout(checkTO);\n            isOver = false;\n            checkTO = setTimeout(function () {\n              hideTooltip();\n            }, 200);\n          };\n        },\n        showTooltip: showTooltip,\n        hideTooltip: hideTooltip,\n        destroy: function () {\n          buttonRpc.destroy();\n          try {\n            buttonIfr.src = 'about: blank;';\n          } catch (e) {}\n          buttonIfr.parentNode.removeChild(buttonIfr);\n          if (tooltipIfr) {\n            try {\n              tooltipIfr.src = 'about: blank;';\n            } catch (e) {}\n            tooltipIfr.parentNode.removeChild(tooltipIfr);\n          }\n          tooltipRpc && tooltipRpc.destroy();\n        },\n        showBox: function (url, props) {\n          var box = VK.Util.Box(VK.Util.getAbsUrl(url), [], {\n            proxy: buttonRpc\n          });\n          box.show();\n        },\n        proxy: function () {\n          if (tooltipRpc) {\n            tooltipRpc.callMethod.apply(tooltipRpc, arguments);\n          }\n        }\n      }, {\n        startHeight: height,\n        minWidth: width\n      }, function (o, i, r) {\n        buttonRpc = r;\n        VK.Util.ss(obj = o, {\n          height: height + 'px',\n          width: width + 'px',\n          position: 'relative',\n          clear: 'both'\n        });\n        VK.Util.ss(buttonIfr = i, {\n          height: height + 'px',\n          width: width + 'px',\n          overflow: 'hidden',\n          zIndex: 150\n        });\n        obj.onmouseover = function () {\n          clearTimeout(checkTO);\n          isOver = true;\n        };\n        obj.onmouseout = function () {\n          clearTimeout(checkTO);\n          isOver = false;\n          checkTO = setTimeout(function () {\n            hideTooltip();\n          }, 200);\n        };\n      });\n      instances.push(widgetId);\n      return widgetId;\n    };\n    Like.destroyAll = function () {\n      var xdm = null;\n      while (instances[0]) {\n        xdm = VK.Widgets.RPC[instances.pop()];\n        xdm && xdm.methods.destroy();\n      }\n    };\n    return Like;\n  }(VK.Widgets.Like);\n  VK.Widgets.Poll = function (objId, options, pollId) {\n    var pData = VK.Util.getPageData();\n    if (!pollId) throw Error('No poll id passed');\n    options = VK.Util.parseOptions(options);\n    var params = {\n      poll_id: pollId,\n      url: options.pageUrl || pData.url || location.href,\n      title: options.pageTitle || pData.title,\n      description: options.pageDescription || pData.description\n    };\n    if (options.preview) {\n      params.is_preview = 1;\n      delete options['preview'];\n    }\n    if (options.share !== undefined) {\n      params.share = options.share ? 1 : 0;\n    }\n    var rpc;\n    return VK.Widgets._constructor('al_widget_poll.php', objId, options, params, {\n      showBox: function (url, props) {\n        var box = VK.Util.Box(VK.Util.getAbsUrl(url), [], {\n          proxy: rpc\n        });\n        box.show();\n      }\n    }, {\n      startHeight: 144,\n      minWidth: 300\n    }, function (o, i, r) {\n      rpc = r;\n    });\n  };\n  VK.Widgets.App = function (objId, app_id, options) {\n    if (!app_id) throw Error('No app id passed');\n    options = VK.Util.parseOptions(options);\n    var startHeight = void 0,\n      height = void 0,\n      minWidth = void 0,\n      params = {\n        aid: app_id,\n        mode: parseInt(options.mode, 10) || 1\n      };\n    switch (params.mode) {\n      case 1:\n        options.width = 144;\n        startHeight = 251;\n        break;\n      case 2:\n        options.width = options.width ? Math.max(200, Math.min(10000, parseInt(options.width, 10))) : 200;\n        height = startHeight = 193;\n        break;\n      case 3:\n        options.width = options.width ? Math.max(50, Math.min(10000, parseInt(options.width, 10))) : void 0;\n        height = startHeight = options.height = {\n          18: 18,\n          20: 20,\n          22: 22,\n          24: 24,\n          30: 30\n        }[parseInt(options.height, 10) || 30];\n        break;\n    }\n    minWidth = options.width;\n    return VK.Widgets._constructor('widget_app.php', objId, options, params, {}, {\n      startHeight: startHeight,\n      height: height,\n      minWidth: minWidth\n    });\n  };\n  VK.Widgets.Community = VK.Widgets.Group = function (objId, options, gid) {\n    options = VK.Util.parseOptions(options);\n    gid = parseInt(gid, 10);\n    if (!gid) {\n      throw Error('No group_id passed');\n    }\n    options.mode = parseInt(options.mode, 10).toString();\n    var params = {\n        gid: gid,\n        mode: options.mode ? options.mode : '0'\n      },\n      startHeight = options.mode == 3 ? 185 : options.mode == 1 ? 141 : options.height | 0 || 290,\n      rpc;\n    if (options.wall) params.wall = options.wall;\n    params.color1 = options.color1 || '';\n    params.color2 = options.color2 || '';\n    params.color3 = options.color3 || '';\n    params.class_name = options.class_name || '';\n    if (options.no_head) params.no_head = 1;\n    if (options.no_cover) params.no_cover = 1;\n    if (options.wide) {\n      params.wide = 1;\n      if (!options.width || options.width < 300) {\n        options.width = 300;\n      }\n    }\n    if (!options.width | 0) options.width = 200;\n    var cursorBack;\n    function mouseup() {\n      rpc.callMethod('mouseUp');\n      return false;\n    }\n    function move(event) {\n      rpc.callMethod('mouseMove', {\n        screenY: event.screenY\n      });\n      return false;\n    }\n    return VK.Widgets._constructor('widget_community.php', objId, options, params, {\n      showBox: function (url, props) {\n        var box = VK.Util.Box(VK.Util.getAbsUrl(url), [], {\n          proxy: rpc\n        });\n        box.show();\n      },\n      startDrag: function () {\n        cursorBack = window.document.body.style.cursor;\n        window.document.body.style.cursor = 'pointer';\n        VK.Util.addEvent('mousemove', move);\n        VK.Util.addEvent('mouseup', mouseup);\n      },\n      stopDrag: function () {\n        window.document.body.style.cursor = cursorBack;\n        VK.Util.removeEvent('mousemove', move);\n        VK.Util.removeEvent('mouseup', mouseup);\n      },\n      auth: function () {\n        VK.Auth.login(null, 1);\n      }\n    }, {\n      minWidth: 120,\n      startHeight: startHeight\n    }, function (o, i, r) {\n      rpc = r;\n    });\n  };\n  VK.Widgets.Auth = function (objId, options) {\n    var pData = VK.Util.getPageData();\n    if (!VK._apiId) throw Error('VK not initialized. Please use VK.init');\n    options = VK.Util.parseOptions(options);\n    if (!options.width) {\n      options.width = 200;\n    }\n    if (options.type) {\n      type = 1;\n    } else {\n      type = 0;\n    }\n    return VK.Widgets._constructor('widget_auth.php', objId, options, {}, {\n      makeAuth: function (data) {\n        if (data.session) {\n          VK.Auth._loadState = 'loaded';\n          VK.Auth.setSession(data.session, 'connected');\n          VK.Observer.publish('auth.loginStatus', {\n            session: data.session,\n            status: 'connected'\n          });\n          VK.Observer.unsubscribe('auth.loginStatus');\n        }\n        if (options.onAuth) {\n          options.onAuth(data);\n        } else {\n          if (options.authUrl) {\n            var href = options.authUrl;\n          } else {\n            var href = window.location.href;\n          }\n          if (href.indexOf('?') == -1) {\n            href += '?';\n          } else {\n            href += '&';\n          }\n          var vars = [];\n          for (var i in data) {\n            if (i != 'session') vars.push(i + '=' + decodeURIComponent(data[i]).replace(/&/g, '%26').replace(/\\#/g, '%23').replace(/\\?/, '%3F'));\n          }\n          window.location.href = href + vars.join('&');\n        }\n      }\n    }, {\n      startHeight: 134\n    });\n  };\n  VK.Widgets.Subscribe = function (objId, options, oid) {\n    oid = parseInt(oid, 10);\n    if (!oid) {\n      throw Error('No owner_id passed');\n    }\n    options = VK.Util.parseOptions(options);\n    var params = {\n        oid: oid\n      },\n      rpc;\n    if (options.mode) {\n      params.mode = options.mode;\n    }\n    if (options.soft) {\n      params.soft = options.soft;\n    }\n    return VK.Widgets._constructor('widget_subscribe.php', objId, options, params, {\n      showBox: function (url, props) {\n        var box = VK.Util.Box(VK.Util.getAbsUrl(url), [], {\n          proxy: rpc\n        });\n        box.show();\n      },\n      auth: function () {\n        VK.Auth.login(null, 1);\n      }\n    }, {\n      minWidth: 220,\n      startHeight: 22\n    }, function (o, i, r) {\n      rpc = r;\n    });\n  };\n  VK.Widgets.ContactUs = function (objId, options, oid) {\n    oid = parseInt(oid, 10);\n    if (!oid) throw Error('No group or user id passed');\n    options = VK.Util.parseOptions(options);\n    var params = {\n        oid: oid,\n        height: {\n          18: 18,\n          20: 20,\n          22: 22,\n          24: 24,\n          30: 30\n        }[parseInt(options.height, 10) || 24],\n        text: (options.text || '').substr(0, 140)\n      },\n      rpc;\n    return VK.Widgets._constructor('widget_contactus.php', objId, options, params, {}, {\n      startHeight: params.height,\n      height: params.height\n    }, function (o, i, r) {\n      rpc = r;\n    });\n  };\n  VK.Widgets.Bookmarks = function (objId, options) {\n    options = VK.Util.parseOptions(options);\n    var params = {\n        height: {\n          18: 18,\n          20: 20,\n          22: 22,\n          24: 24,\n          30: 30\n        }[parseInt(options.height, 10) || 30],\n        url: options.url || window.location.href\n      },\n      rpc;\n    return VK.Widgets._constructor('widget_bookmarks.php', objId, options, params, {}, {\n      startHeight: params.height,\n      height: params.height\n    }, function (o, i, r) {\n      rpc = r;\n    });\n  };\n  VK.Widgets.Playlist = function (objId, ownerId, playlistId, hash, options) {\n    var params = {\n        oid: parseInt(ownerId, 10),\n        pid: parseInt(playlistId, 10),\n        hash: hash || ''\n      },\n      rpc;\n    if (!params.oid) throw Error('No owner id passed');\n    if (!params.pid) throw Error('No playlist id passed');\n    options = VK.Util.parseOptions(options);\n    return VK.Widgets._constructor('widget_playlist.php', objId, options, params, {\n      showBox: function (url, props) {\n        var box = VK.Util.Box(VK.Util.getAbsUrl(url), [], {\n          proxy: rpc\n        });\n        box.show();\n      }\n    }, {\n      minWidth: 200\n    }, function (o, i, r) {\n      rpc = r;\n    });\n  };\n  VK.Widgets.Ads = function (objId, options, paramsExtra) {\n    options = VK.Util.parseOptions(options);\n    paramsExtra = paramsExtra || {};\n    var params = {};\n    var defaults = {};\n    var funcs = {};\n    var obj = document.getElementById(objId);\n    var iframe;\n    var rpc;\n    var adsParams = {};\n    var adsParamsLocal = {};\n    var adsParamsDefault = {};\n    for (var key in paramsExtra) {\n      var keyFix = inArray(key, ['hash']) ? key : 'ads_' + key;\n      adsParams[keyFix] = paramsExtra[key];\n    }\n    if (obj && obj.getBoundingClientRect) {\n      obj.style.width = '100%';\n      obj.style.height = '100%';\n      var rect = obj.getBoundingClientRect();\n      obj.style.width = '';\n      obj.style.height = '';\n      adsParams.ads_ad_unit_width_auto = Math.floor(rect.right - rect.left);\n      adsParams.ads_ad_unit_height_auto = Math.floor(rect.bottom - rect.top);\n    }\n    adsParamsDefault.ads_ad_unit_width = 100;\n    adsParamsDefault.ads_ad_unit_height = 100;\n    adsParamsLocal.ads_ad_unit_width = parseInt(adsParams.ads_ad_unit_width) || adsParams.ads_ad_unit_width === 'auto' && adsParams.ads_ad_unit_width_auto || adsParamsDefault.ads_ad_unit_width;\n    adsParamsLocal.ads_ad_unit_height = parseInt(adsParams.ads_ad_unit_height) || adsParams.ads_ad_unit_height === 'auto' && adsParams.ads_ad_unit_height_auto || adsParamsDefault.ads_ad_unit_height;\n    if (adsParams.ads_handler) {\n      adsParamsLocal.ads_handler = adsParams.ads_handler;\n    }\n    if (adsParams.ads_handler_empty_html) {\n      adsParamsLocal.ads_handler_empty_html = adsParams.ads_handler_empty_html;\n    }\n    delete adsParams.ads_handler;\n    delete adsParams.ads_handler_empty_html;\n    params.act = 'ads_web';\n    params.url = location.href;\n    VK.extend(params, adsParams);\n    options.noDefaultParams = true;\n    options.width = adsParamsLocal.ads_ad_unit_width;\n    options.allowTransparency = true;\n    defaults.startHeight = adsParamsLocal.ads_ad_unit_height;\n    defaults.minWidth = adsParamsLocal.ads_ad_unit_width;\n    funcs.adsOnInit = adsOnInit;\n    funcs.newAdsOnInitLoader = newAdsOnInitLoader;\n    return VK.Widgets._constructor('ads_rotate.php', objId, options, params, funcs, defaults, onDone);\n    function newAdsOnInitLoader(deps) {\n      // replace's   walkVar\n      var json = JSON.parse(deps.replace(/&#039;/g, '\\'').replace(/&quot;/g, '\"').replace(/&gt;/g, '>').replace(/&lt;/g, '<').replace(/&amp;/g, '&'));\n      adsAttachScript(json);\n    }\n    function adsOnInit(errorCode, adsParamsExport) {\n      VK.Widgets.loading(obj, false);\n      adsProcessParams(adsParamsExport);\n      if (options.onAdsReady) options.onAdsReady.apply(options.onAdsReady, Array.prototype.slice.call(arguments));\n      adsProcessHandler(errorCode);\n    }\n    function adsAttachScript(adsScriptData) {\n      if (!('vk__adsLight' in window)) {\n        window.vk__adsLight = false;\n        var attachScriptFunc = VK.Api && VK.Api.attachScript || VK.addScript;\n        if (Array.isArray(adsScriptData)) {\n          adsScriptData.forEach(function (url) {\n            attachScriptFunc(VK._domain.base + url);\n          });\n        } else {\n          var adsScriptVersion = parseInt(adsScriptData);\n          attachScriptFunc(VK._domain.base + jsc('/web/ads_light.js?') + adsScriptVersion);\n        }\n      } else if (window.vk__adsLight && vk__adsLight.userHandlers && vk__adsLight.userHandlers.onInit) {\n        vk__adsLight.userHandlers.onInit(false); // false - do not publish initial onInit\n      }\n    }\n\n    function adsProcessParams(adsParamsExport) {\n      if (!adsParamsExport) {\n        return;\n      }\n      for (var paramName in adsParamsExport) {\n        var paramValue = adsParamsExport[paramName];\n        if (paramName === 'ads_ad_unit_width' || paramName === 'ads_ad_unit_height') {\n          if (!(paramName in adsParams)) {\n            adsParamsLocal[paramName] = parseInt(paramValue) || paramValue === 'auto' && adsParams[paramName + '_auto'] || adsParamsDefault[paramName];\n          }\n        } else {\n          if (!(paramName in adsParamsLocal)) {\n            adsParamsLocal[paramName] = paramValue;\n          }\n        }\n      }\n    }\n    function adsProcessHandler(errorCode) {\n      var handlerResult = adsEvalHandler(adsParamsLocal.ads_handler, errorCode);\n      if (errorCode <= 0 && handlerResult !== true) {\n        try {\n          console.log('VK: ad_unit_id = ' + adsParams.ads_ad_unit_id, ', errorCode = ', errorCode);\n        } catch (e) {}\n        adsInsertHtmlHandler(adsParamsLocal.ads_handler_empty_html, adsParamsLocal.ads_ad_unit_width, adsParamsLocal.ads_ad_unit_height);\n      }\n    }\n    function adsEvalHandler(handler) {\n      var result = false;\n      try {\n        if (!handler) {\n          return false;\n        }\n        var func = false;\n        if (isFunction(handler)) {\n          func = handler;\n        } else if (isString(handler)) {\n          var handlerFuncs = handler.split('.');\n          func = window;\n          for (var i = 0, len = handlerFuncs.length; i < len; i++) {\n            func = func[handlerFuncs[i]];\n            if (!func) {\n              break;\n            }\n          }\n          if (!func) {\n            if (handler.substr(0, 8) === 'function') {\n              handler = 'return ' + handler + ';';\n            }\n            var handlerResult = new Function(handler)();\n            if (isFunction(handlerResult)) {\n              func = handlerResult;\n            } else {\n              result = handlerResult;\n            }\n          }\n        }\n        if (func) {\n          var args = Array.prototype.slice.call(arguments, 1);\n          result = func.apply(func, args);\n        }\n      } catch (e) {\n        try {\n          console.error(e);\n        } catch (e2) {}\n      }\n      return result;\n      function isFunction(obj) {\n        return Object.prototype.toString.call(obj) === '[object Function]';\n      }\n      function isString(obj) {\n        return Object.prototype.toString.call(obj) === '[object String]';\n      }\n    }\n    function adsInsertHtmlHandler(handlerHtml, width, height) {\n      if (!handlerHtml) {\n        return;\n      }\n      if (!obj) {\n        return;\n      }\n      width = width ? width + 'px' : '';\n      height = height ? height + 'px' : '';\n      var iframeHandlerHtml = '<html><head></head><body style=\"padding: 0; margin: 0;\"><div>' + handlerHtml + '</div></body></html>';\n      var iframeHandler = document.createElement('iframe');\n      iframeHandler.onload = fixIframeHeight;\n      iframeHandler.id = (iframe ? iframe.id : 'vkwidget-' + Math.round(Math.random() * 1000000)) + '_ads_html_handler';\n      iframeHandler.src = 'about:blank';\n      iframeHandler.width = '100%';\n      iframeHandler.height = '100%';\n      iframeHandler.scrolling = 'no';\n      iframeHandler.frameBorder = '0';\n      iframeHandler.allowTransparency = true;\n      iframeHandler.style.overflow = 'hidden';\n      iframeHandler.style.width = width;\n      iframeHandler.style.height = height;\n      obj.style.width = width;\n      obj.style.height = height;\n      obj.appendChild(iframeHandler);\n      iframeHandler.contentWindow.vk_ads_html_handler = iframeHandlerHtml;\n      iframeHandler.src = 'javascript:window[\"vk_ads_html_handler\"]';\n      function fixIframeHeight() {\n        if (height) {\n          return;\n        }\n        try {\n          var rect = iframeHandler.contentWindow.document.body.firstChild.getBoundingClientRect();\n          var heightFix = Math.ceil(rect.bottom - rect.top);\n          if (heightFix) {\n            iframeHandler.style.height = heightFix;\n            obj.style.height = heightFix;\n          }\n        } catch (e) {}\n      }\n    }\n    function indexOf(arr, value, from) {\n      for (var i = from || 0, l = (arr || []).length; i < l; i++) {\n        if (arr[i] == value) return i;\n      }\n      return -1;\n    }\n    function inArray(value, arr) {\n      return indexOf(arr, value) != -1;\n    }\n    function onDone(o, i, r) {\n      obj = o;\n      iframe = i;\n      rpc = r;\n    }\n  };\n  VK.Widgets.AllowMessagesFromCommunity = function (objId, options, groupId) {\n    groupId = parseInt(groupId, 10);\n    if (!groupId || groupId < 0) throw Error('No group id passed');\n    options = VK.Util.parseOptions(options);\n    var params = {\n        height: {\n          22: 22,\n          24: 24,\n          30: 30\n        }[parseInt(options.height, 10) || 24],\n        key: options.key ? options.key.substr(0, 256) : '',\n        group_id: groupId\n      },\n      rpc;\n    return VK.Widgets._constructor('widget_allow_messages_from_community.php', objId, options, params, {}, {\n      startHeight: params.height,\n      height: params.height\n    }, function (o, i, r) {\n      rpc = r;\n    });\n  };\n  VK.Widgets.Article = function (id, url, options) {\n    var params = {\n      url: url\n    };\n    options = VK.Util.parseOptions(options);\n    var rpc;\n    return VK.Widgets._constructor('widget_article.php', id, options, params, {\n      showBox: function (url) {\n        var box = VK.Util.Box(VK.Util.getAbsUrl(url), [], {\n          proxy: rpc\n        });\n        box.show();\n      }\n    }, {}, function (o, i, r) {\n      rpc = r;\n    });\n  };\n  VK.Widgets.Podcast = function (id, episode, options) {\n    var params = {\n      episode: episode\n    };\n    options = VK.Util.parseOptions(options);\n    return VK.Widgets._constructor('widget_podcast.php', id, options, params, {\n      showBox: function (url) {\n        var box = VK.Util.Box(VK.Util.getAbsUrl(url), [], {\n          proxy: rpc\n        });\n        box.show();\n      }\n    }, {\n      minWidth: 300,\n      startHeight: 150\n    });\n  };\n  VK.Widgets.CommunityMessages = function (CommunityMessages) {\n    if (CommunityMessages) return CommunityMessages;\n    var instances = {},\n      wCur = {};\n    var BUTTONS_CONF = {\n        no_button: {\n          width: 0,\n          height: 0\n        },\n        blue_circle: {\n          width: 50,\n          height: 50,\n          margin: {\n            bottom: 20\n          }\n        }\n      },\n      DEFAULT_BUTTON_TYPE = 'blue_circle',\n      BUTTON_POSITIONS = {\n        left: {\n          bottom: 0,\n          left: 20\n        },\n        right: {\n          bottom: 0,\n          right: 20\n        }\n      },\n      DEFAULT_BUTTON_POSITION = 'right';\n\n    /* options\n      - welcomeScreen\n      - expandTimeout\n      - shown || expended\n      - widgetPosition\n      - buttonType\n      - disableButtonTooltip\n      - tooltipButtonText\n      - disableNewMessagesSound\n      - disableExpandChatSound\n      - disableTitleChange\n    */\n    CommunityMessages = function (objId, gid, options) {\n      options = VK.Util.parseOptions(options);\n      options.width = 300;\n      options.height = 399;\n      options.expandTimeout = parseInt(options.expandTimeout) || 0;\n      var params = {\n        gid: gid\n      };\n      options.expanded = parseInt(options.expanded) || 0;\n      if (!options.from_dev && lsGet('expanded') != null || options.expanded) {\n        options.shown = 1;\n      }\n      if (options.shown) {\n        params.shown = 1;\n      }\n      if (!options.welcomeScreen) {\n        params.disable_welcome_screen = 1;\n      }\n      params.ref_source_info = options.ref_source_info;\n      params.ref_source_link = location.href;\n      var buttonType = options.buttonType;\n      if (Object.keys(BUTTONS_CONF).indexOf(buttonType) == -1) {\n        buttonType = DEFAULT_BUTTON_TYPE;\n      }\n      if (buttonType == 'no_button') {\n        options.disableButtonTooltip = 1;\n      }\n      if (options.disableButtonTooltip) {\n        params.disable_tooltip = 1;\n      }\n      if (options.tooltipButtonText) {\n        params.tooltip_text = options.tooltipButtonText;\n      }\n      if (options.disableNewMessagesSound) {\n        params.disable_new_messages_sound = 1;\n      }\n      if (instances[objId]) {\n        CommunityMessages.destroy(objId);\n      }\n      params.domain = document.domain;\n      options.no_loading = 1;\n      if (!options.disableNewMessagesSound || !options.disableExpandChatSound) {\n        options.enable_autoplay = 1;\n      }\n      if (options.disableExpandChatSound) {\n        params.disable_expand_chat_sound = 1;\n      }\n      if (options.expandTimeout) {\n        params.expand_timeout = options.expandTimeout;\n      }\n      if (options.__alpha_new_widget) {\n        params.__alpha_new_widget = 1;\n      }\n      var curBox = false,\n        expanded = 0;\n      var ttSize = [0, 0],\n        widgetPosition;\n      changeWidgetPosition(options.widgetPosition);\n      params.button_position = options.widgetPosition;\n      window.addEventListener('message', receiveMessage, false);\n      function receiveMessage(event) {\n        var obj = document.getElementById(objId),\n          frame = obj.getElementsByTagName('iframe')[0];\n        if (event.data && event.data.action === 'VKReforgedWidgetResize') {\n          var width = event.data.params.width;\n          var height = event.data.params.height;\n          frame.width = width;\n          frame.height = height;\n          obj.style.width = width + 'px';\n          obj.style.height = height + 'px';\n          obj.style.margin = height > 50 ? '0' : '0 0 20px';\n        }\n        if (event.data && event.data.action === 'VKReforgedWidgetLogout') {\n          frame.parentNode.removeChild(frame);\n          obj.style = {};\n        }\n      }\n      var chatRpc, chatIfr;\n      var inited = 0,\n        timers = {};\n      instances[objId] = VK.Widgets._constructor('reforged_widget.php', objId, options, params, {\n        onStartLoading: function () {\n          var obj = document.getElementById(objId);\n          obj.style.position = 'fixed';\n          obj.style['z-index'] = 10000;\n          updateWidgetPosition();\n        },\n        onReady: function () {\n          inited = 1;\n          if (options.expandTimeout > 0 && !options.shown) {\n            timers.showTimer = setTimeout(function () {\n              expandChat({\n                playSong: !options.disableExpandChatSound,\n                noSaveState: 1\n              });\n            }, options.expandTimeout);\n          }\n        },\n        showBox: function (url) {\n          if (curBox) {\n            try {\n              curBox.hide();\n              try {\n                curBox.iframe.src = 'about: blank;';\n              } catch (e) {}\n              curBox.iframe.parentNode.removeChild(curBox.iframe);\n            } catch (e) {}\n          }\n          curBox = VK.Util.Box(VK.Util.getAbsUrl(url), [], {\n            proxy: chatRpc\n          }, {\n            zIndex: 10002\n          });\n          curBox.show();\n        },\n        setTooltipSize: function (size) {\n          ttSize = size;\n          if (!expanded) {\n            minimize();\n          }\n        },\n        expand: function (opts) {\n          opts = opts || {};\n          expanded = 1;\n          expand();\n          if (!opts.noSaveState) {\n            lsSet('expanded', 1);\n          }\n        },\n        minimize: function () {\n          setTimeout(function () {\n            expanded = 0;\n            minimize(objId);\n            lsRemove('expanded');\n          }, 120);\n        },\n        canNotWrite: function (type) {\n          options.onCanNotWrite && options.onCanNotWrite(type);\n        },\n        destroy: function () {\n          chatRpc.destroy();\n          try {\n            chatIfr.src = 'about: blank;';\n          } catch (e) {}\n          try {\n            chatIfr.parentNode.removeChild(chatIfr);\n          } catch (e) {}\n        },\n        fatalError: function (error_code, public_id) {\n          var query = {\n            code: error_code,\n            widget: 2,\n            public_id: public_id\n          };\n          if (error_code == 1903) {\n            query.referrer_domain = document.domain;\n          }\n          var query_str = [];\n          for (var i in query) {\n            query_str.push(i + '=' + query[i]);\n          }\n          CommunityMessages.destroy(objId);\n          var box = VK.Util.Box(VK.Util.getAbsUrl('blank.php?' + query_str.join('&')));\n          box.show();\n        },\n        setPageTitle: function (title) {\n          if (options.disableTitleChange) {\n            return;\n          }\n          stopTitleAnimation();\n          wCur.oldTitle = document.title || null;\n          wCur.title = title;\n          wCur.changeTitleMode = 0;\n          startTitleNotify(1);\n        },\n        resetPageTitle: function () {\n          stopTitleAnimation();\n        },\n        newMessage: function () {\n          if (document.hasFocus && !document.hasFocus() && !options.disableNewMessagesSound) {\n            callRpcMethod('playNewMsgSong');\n          }\n        }\n      }, {}, function (o, i, r) {\n        chatRpc = r;\n        chatIfr = i;\n        if (!options.shown) {\n          minimize();\n        } else {\n          expand();\n        }\n      });\n      function startTitleNotify(fast) {\n        clearTimeout(wCur.titleTimer);\n        wCur.titleTimer = setTimeout(function () {\n          if (wCur.changeTitleMode == 1) {\n            document.title = wCur.oldTitle || '';\n          } else {\n            document.title = wCur.title;\n          }\n          wCur.changeTitleMode = wCur.changeTitleMode == 1 ? 0 : 1;\n          startTitleNotify();\n        }, fast ? 0 : 1500);\n      }\n      function stopTitleAnimation() {\n        if (options.disableTitleChange) {\n          return;\n        }\n        clearTimeout(wCur.titleTimer);\n        if (wCur.oldTitle) {\n          document.title = wCur.oldTitle;\n        } else if (wCur.oldTitle === null) {\n          document.title = '';\n        }\n        wCur.title = '';\n      }\n      function expand() {\n        var obj = document.getElementById(objId),\n          frame = obj.getElementsByTagName('iframe')[0];\n        obj.style.width = frame.width = '372px';\n        obj.style.height = frame.height = '399px';\n        obj.style.margin = '0px 0px 0px 0px';\n        //frame.style.boxShadow = '0 0 0 1px rgba(0, 20, 51, .12), 0 20px 40px 0 rgba(0, 0, 0, 0.3)';\n        //frame.style.borderRadius = '6px';\n      }\n\n      function minimize() {\n        var obj = document.getElementById(objId),\n          frame = obj.getElementsByTagName('iframe')[0];\n        var btnConf = BUTTONS_CONF[buttonType];\n        var w = btnConf.width + ttSize[0];\n        var h = Math.max(btnConf.height, ttSize[1]);\n        obj.style.width = w + 'px';\n        obj.style.height = h + 'px';\n        var margin = btnConf.margin ? btnConf.margin : {};\n        obj.style.margin = '0px ' + (margin.right || 0) + 'px ' + (margin.bottom || 0) + 'px 0px';\n        if (frame) {\n          frame.style.boxShadow = 'none';\n          frame.width = w;\n          frame.height = h;\n        }\n      }\n      function changeWidgetPosition(position) {\n        widgetPosition = position;\n        if (Object.keys(BUTTON_POSITIONS).indexOf(widgetPosition) == -1) {\n          widgetPosition = DEFAULT_BUTTON_POSITION;\n        }\n        updateWidgetPosition();\n        callRpcMethod('changeButtonPosition', widgetPosition);\n      }\n      function updateWidgetPosition() {\n        var obj = document.getElementById(objId);\n        if (!obj) {\n          return;\n        }\n        var props = ['left', 'right', 'top', 'bottom'];\n        for (var i in props) {\n          obj.style[props[i]] = '';\n        }\n        var conf = BUTTON_POSITIONS[widgetPosition];\n        for (var i in conf) {\n          obj.style[i] = conf[i] + 'px';\n        }\n        if (!inited) {\n          return;\n        }\n        if (expanded) {\n          expand();\n        } else {\n          minimize();\n        }\n      }\n      function callRpcMethod() {\n        chatRpc && chatRpc.callMethod.apply(chatRpc, arguments);\n      }\n\n      /* opts\n        - welcomeScreen\n      */\n      function expandChat(opts) {\n        if (!opts || Object.prototype.toString.call(opts) !== '[object Object]') {\n          opts = {};\n        }\n        if (opts.welcomeScreen == undefined) {\n          opts.welcomeScreen = options.welcomeScreen;\n        }\n        var frame = document.getElementById(objId).getElementsByTagName('iframe')[0];\n        frame && frame.contentWindow.postMessage({\n          handler: 'VKReforgedWidgetExpand'\n        }, VK._domain.base);\n        clearTimeout(timers.showTimer);\n        callRpcMethod('expand', opts);\n      }\n      function minimizeChat() {\n        callRpcMethod('minimize');\n        var frame = document.getElementById(objId).getElementsByTagName('iframe')[0];\n        frame && frame.contentWindow.postMessage({\n          handler: 'VKReforgedWidgetMinimize'\n        }, VK._domain.base);\n      }\n      function setSourceData(data) {\n        callRpcMethod('setSourceData', VK.extend({\n          link: location.href\n        }, data));\n      }\n      VK.Util.addEvent('popstate', setSourceData.bind(this, {}), window);\n      VK.Util.addEvent('hashchange', setSourceData.bind(this, {}), window);\n      function destroyChat() {\n        stopTitleAnimation();\n        var frame = document.getElementById(objId).getElementsByTagName('iframe')[0];\n        frame && frame.contentWindow.postMessage({\n          handler: 'VKReforgedWidgetDestroy'\n        }, VK._domain.base);\n        CommunityMessages.destroy(objId);\n      }\n      return {\n        expand: expandChat,\n        minimize: minimizeChat,\n        destroy: destroyChat,\n        setSourceData: setSourceData,\n        changeButtonPosition: changeWidgetPosition,\n        stopTitleAnimation: stopTitleAnimation\n      };\n    };\n    function lsGet(key) {\n      if (!window.localStorage) {\n        return null;\n      }\n      return localStorage.getItem('vk_community_widget_' + key);\n    }\n    function lsSet(key, value) {\n      window.localStorage && localStorage.setItem('vk_community_widget_' + key, value);\n    }\n    function lsRemove(key) {\n      window.localStorage && localStorage.removeItem('vk_community_widget_' + key);\n    }\n    CommunityMessages.destroy = function (objId) {\n      if (!instances[objId]) {\n        return;\n      }\n      var xdm = VK.Widgets.RPC[instances[objId]];\n      xdm && xdm.methods.destroy();\n      delete instances[objId];\n    };\n    CommunityMessages.expand = function (objId) {\n      console.log(instances[objId]);\n    };\n    return CommunityMessages;\n  }(VK.Widgets.CommunityMessages);\n  VK.Widgets._constructor = function (widgetUrl, objId, options, params, funcs, defaults, onDone, widgetId, iter) {\n    var obj = document.getElementById(objId);\n    widgetId = widgetId || ++VK.Widgets.count;\n    if (!obj) {\n      iter = iter || 0;\n      if (iter > 10) {\n        throw Error('VK.Widgets: object #' + objId + ' not found.');\n      }\n      setTimeout(function () {\n        VK.Widgets._constructor(widgetUrl, objId, options, params, funcs, defaults, onDone, widgetId, iter + 1);\n      }, 500);\n      return widgetId;\n    }\n    options = options || {};\n    defaults = defaults || {};\n    funcs = funcs || {};\n    if (options.preview) {\n      params.preview = 1;\n      delete options['preview'];\n    }\n    var ifr,\n      url,\n      urlQueryString,\n      encodedParam,\n      rpc,\n      iframe,\n      i,\n      width = options.width === 'auto' ? (obj.clientWidth || obj.offsetWidth || defaults.minWidth) | 0 : parseInt(options.width || 0, 10);\n    if (params.act === 'silent_code') {\n      width = '1px';\n      obj.style.opacity = 0;\n      obj.style.display = 'none';\n      obj.style.position = 'absolute';\n    } else {\n      width = width ? Math.max(defaults.minWidth || 200, Math.min(defaults.maxWidth || 10000, width)) + 'px' : '100%';\n    }\n    obj.style.width = width;\n    if (options.height) {\n      params.height = options.height;\n      obj.style.height = options.height + 'px';\n    } else {\n      obj.style.height = (defaults.startHeight || 200) + 'px';\n    }\n    if (width === '100%') params.startWidth = (obj.clientWidth || obj.offsetWidth) | 0;\n    if (!params.url) params.url = options.pageUrl || location.href.replace(/#.*$/, '');\n    url = VK._domain.base + '/' + widgetUrl;\n    urlQueryString = '';\n    if (!options.noDefaultParams) {\n      urlQueryString += '&app=' + (VK._apiId || '0') + '&width=' + encodeURIComponent(width);\n    }\n    urlQueryString += '&_ver=' + VK.version;\n    if (VK._iframeAppWidget) {\n      params.iframe_app = 1;\n    }\n    var pData = VK.Util.getPageData();\n    params.url = params.url || pData.url || \"\";\n    params.referrer = params.referrer || document.referrer || \"\";\n    params.title = params.title || pData.title || document.title || \"\";\n    for (i in params) {\n      if (i == 'title' && params[i].length > 80) params[i] = params[i].substr(0, 80) + '...';\n      if (i == 'description' && params[i].length > 160) params[i] = params[i].substr(0, 160) + '...';\n      if (typeof params[i] == 'number') {\n        encodedParam = params[i];\n      } else {\n        try {\n          encodedParam = encodeURIComponent(params[i]);\n        } catch (e) {\n          encodedParam = '';\n        }\n      }\n      urlQueryString += '&' + i + '=' + encodedParam;\n    }\n    urlQueryString += '&' + (+new Date()).toString(16);\n    url += '?' + urlQueryString.substr(1);\n    funcs.onStartLoading && funcs.onStartLoading();\n    if (!options.no_loading) {\n      VK.Widgets.loading(obj, true);\n    }\n    funcs.showLoader = function (enable) {\n      VK.Util.Loader(enable);\n    };\n    funcs.publish = function () {\n      var args = Array.prototype.slice.call(arguments);\n      args.push(widgetId);\n      VK.Observer.publish.apply(VK.Observer, args);\n    };\n    funcs.onInit = function () {\n      VK.Widgets.loading(obj, false);\n      if (funcs.onReady) funcs.onReady();\n      if (options.onReady) options.onReady();\n    };\n    funcs.resize = function (e, cb) {\n      obj.style.height = e + 'px';\n      var el = document.getElementById('vkwidget' + widgetId);\n      if (el) {\n        el.style.height = e + 'px';\n      }\n    };\n    funcs.resizeWidget = function (newWidth, newHeight) {\n      newWidth = parseInt(newWidth);\n      newHeight = parseInt(newHeight);\n      var widgetElem = document.getElementById('vkwidget' + widgetId);\n      if (isFinite(newWidth)) {\n        obj.style.width = newWidth + 'px';\n        if (widgetElem) {\n          widgetElem.style.width = newWidth + 'px';\n        }\n      }\n      if (isFinite(newHeight)) {\n        obj.style.height = newHeight + 'px';\n        if (widgetElem) {\n          widgetElem.style.height = newHeight + 'px';\n        }\n      }\n      if (options.onResizeWidget) options.onResizeWidget();\n    };\n    funcs.updateVersion = function (ver) {\n      if (ver > 1) {\n        VK.Api.attachScript('//vk.com/js/api/openapi_update.js?' + parseInt(ver));\n      }\n    };\n    rpc = VK.Widgets.RPC[widgetId] = new fastXDM.Server(funcs, function (origin) {\n      if (!origin) return true;\n      origin = origin.toLowerCase();\n      return origin.match(/(\\.|\\/)vk\\.com($|\\/|\\?)/);\n    }, {\n      safe: true\n    });\n    var style = {\n      overflow: 'hidden'\n    };\n    if (options.custom_style && typeof options.custom_style === 'object') {\n      style = VK.extend(style, options.custom_style);\n    }\n    var attrsString = \"\";\n    if (options.enable_autoplay) {\n      attrsString = 'allow=\"autoplay\"';\n    }\n    iframe = VK.Widgets.RPC[widgetId].append(obj, {\n      src: url,\n      width: width.indexOf('%') != -1 ? width : parseInt(width) || width,\n      height: defaults.startHeight || '100%',\n      scrolling: 'no',\n      id: 'vkwidget' + widgetId,\n      allowTransparency: options.allowTransparency || false,\n      style: style\n    }, attrsString);\n    onDone && setTimeout(function () {\n      onDone(obj, iframe || obj.firstChild, rpc);\n    }, 10);\n    return widgetId;\n  };\n}\nif (!VK.Util) {\n  VK.Util = {\n    getPageData: function () {\n      if (!VK._pData) {\n        var metas = document.getElementsByTagName('meta'),\n          pData = {},\n          keys = ['description', 'title', 'url', 'image', 'app_id'],\n          metaName;\n        for (var i in metas) {\n          if (!metas[i].getAttribute) continue;\n          if (metas[i].getAttribute && ((metaName = metas[i].getAttribute('name')) || (metaName = metas[i].getAttribute('property')))) {\n            for (var j in keys) {\n              if (metaName == keys[j] || metaName == 'og:' + keys[j] || metaName == 'vk:' + keys[j]) {\n                pData[keys[j]] = metas[i].content;\n              }\n            }\n          }\n        }\n        if (pData.app_id && !VK._apiId) {\n          VK._apiId = pData.app_id;\n        }\n        pData.title = pData.title || document.title || '';\n        pData.description = pData.description || '';\n        pData.image = pData.image || '';\n        if (!pData.url && VK._iframeAppWidget && VK._apiId) {\n          pData.url = '/app' + VK._apiId;\n          if (VK._browserHash) {\n            pData.url += VK._browserHash;\n          }\n        }\n        var loc = location.href.replace(/#.*$/, '');\n        if (!pData.url || !pData.url.indexOf(loc)) {\n          pData.url = loc;\n        }\n        VK._pData = pData;\n      }\n      return VK._pData;\n    },\n    getStyle: function (elem, name) {\n      var ret,\n        defaultView = document.defaultView || window;\n      if (defaultView.getComputedStyle) {\n        name = name.replace(/([A-Z])/g, '-$1').toLowerCase();\n        var computedStyle = defaultView.getComputedStyle(elem, null);\n        if (computedStyle) {\n          ret = computedStyle.getPropertyValue(name);\n        }\n      } else if (elem.currentStyle) {\n        var camelCase = name.replace(/\\-(\\w)/g, function (all, letter) {\n          return letter.toUpperCase();\n        });\n        ret = elem.currentStyle[name] || elem.currentStyle[camelCase];\n      }\n      return ret;\n    },\n    getAbsUrl: function (url) {\n      return VK._domain.base + '/' + url.replace(/^\\s*\\/?/, '');\n    },\n    parseOptions: function (options) {\n      if (Object.prototype.toString.call(options) !== '[object Object]') {\n        options = {};\n      }\n      if (options.base_domain) {\n        VK._domain.base = options.base_domain;\n      }\n      if (options.login_domain) {\n        VK._domain.login = options.login_domain;\n      }\n      return options;\n    },\n    getXY: function (obj, fixed) {\n      if (!obj || obj === undefined) return;\n      var left = 0,\n        top = 0;\n      if (obj.getBoundingClientRect !== undefined) {\n        var rect = obj.getBoundingClientRect();\n        left = rect.left;\n        top = rect.top;\n        fixed = true;\n      } else if (obj.offsetParent) {\n        do {\n          left += obj.offsetLeft;\n          top += obj.offsetTop;\n          if (fixed) {\n            left -= obj.scrollLeft;\n            top -= obj.scrollTop;\n          }\n        } while (obj = obj.offsetParent);\n      }\n      if (fixed) {\n        top += window.pageYOffset || window.scrollNode && scrollNode.scrollTop || document.documentElement.scrollTop;\n        left += window.pageXOffset || window.scrollNode && scrollNode.scrollLeft || document.documentElement.scrollLeft;\n      }\n      return [left, top];\n    },\n    Loader: function self(enable) {\n      if (!self.loader) {\n        self.loader = document.createElement('DIV');\n        self.loader.innerHTML = '<style type=\"text/css\">\\\n        @-webkit-keyframes VKWidgetsLoaderKeyframes {0%{opacity: 0.2;}30%{opacity: 1;}100%{opacity: 0.2;}}\\\n        @keyframes VKWidgetsLoaderKeyframes {0%{opacity: 0.2;}30%{opacity: 1;}100%{opacity: 0.2;}}\\\n        .VKWidgetsLoader div {width: 7px;height: 7px;-webkit-border-radius: 50%;-khtml-border-radius: 50%;-moz-border-radius: 50%;border-radius: 50%;background: #fff;top: 21px;position: absolute;z-index: 2;-o-transition: opacity 350ms linear; transition: opacity 350ms linear;opacity: 0.2;-webkit-animation-duration: 750ms;-o-animation-duration: 750ms;animation-duration: 750ms;-webkit-animation-name: VKWidgetsLoaderKeyframes;-o-animation-name: VKWidgetsLoaderKeyframes;animation-name: VKWidgetsLoaderKeyframes;-webkit-animation-iteration-count: infinite;-o-animation-iteration-count: infinite;animation-iteration-count: infinite;-webkit-transform: translateZ(0);transform: translateZ(0);}</style><div class=\"VKWidgetsLoader\" style=\"position: fixed;left: 50%;top: 50%;margin: -25px -50px;z-index: 1002;height: 50px;width: 100px;\"><div style=\"left: 36px;-webkit-animation-delay: 0ms;-o-animation-delay: 0ms;animation-delay: 0ms;\"></div><div style=\"left: 47px;-webkit-animation-delay: 180ms;-o-animation-delay: 180ms;animation-delay: 180ms;\"></div><div style=\"left: 58px;-webkit-animation-delay: 360ms;-o-animation-delay: 360ms;animation-delay: 360ms;\"></div><span style=\"display: block;background-color: #000;-webkit-border-radius: 4px;-khtml-border-radius: 4px;-moz-border-radius: 4px;border-radius: 4px;-webkit-box-shadow: 0px 2px 10px rgba(0, 0, 0, 0.35);-moz-box-shadow: 0px 2px 10px rgba(0, 0, 0, 0.35);box-shadow: 0px 2px 10px rgba(0, 0, 0, 0.35);position: absolute;left: 0;top: 0;bottom: 0; right: 0;z-index: 1;opacity: 0.7;\"></span></div>';\n        document.body.insertBefore(self.loader, document.body.firstChild);\n      }\n      self.loader.style.display = enable ? 'block' : 'none';\n    },\n    Box: function (src, sizes, fnc, options) {\n      fnc = fnc || {};\n      var overflowB = document.body.style.overflow;\n      VK.Util.Loader(true);\n      var is_vk = /(^|\\.)(vk\\.com|vkontakte\\.ru)$/.test(location.hostname);\n      var rpc = new fastXDM.Server(VK.extend(fnc, {\n          onInit: function () {\n            iframe.style.background = 'transparent';\n            iframe.style.visibility = 'visible';\n            document.body.style.overflow = 'hidden';\n            iframe.setAttribute('allowfullscreen', 1);\n            if (is_vk) document.body.className += ' layers_shown';\n            VK.Util.Loader();\n          },\n          hide: function () {\n            iframe.style.display = 'none';\n          },\n          tempHide: function () {\n            iframe.style.left = '-10000px';\n            iframe.style.top = '-10000px';\n            iframe.style.width = '10px';\n            iframe.style.height = '10px';\n            if (is_vk) document.body.className = document.body.className.replace(/\\b\\s*?layers_shown\\s*\\b/, ' ');\n            document.body.style.overflow = overflowB;\n          },\n          destroy: function () {\n            try {\n              iframe.src = 'about: blank;';\n            } catch (e) {}\n            iframe.parentNode.removeChild(iframe);\n            if (is_vk) document.body.className = document.body.className.replace(/\\b\\s*?layers_shown\\s*\\b/, ' ');\n            document.body.style.overflow = overflowB;\n          },\n          resize: function (w, h) {}\n        }, true), false, {\n          safe: true\n        }),\n        iframe = rpc.append(document.body, {\n          src: src.replace(/&amp;/g, '&'),\n          scrolling: 'no',\n          allowTransparency: true,\n          style: {\n            position: 'fixed',\n            left: 0,\n            top: 0,\n            zIndex: options && options.zIndex || 1002,\n            background: VK._domain.base + '/images/upload.gif center center no-repeat transparent',\n            padding: '0',\n            border: '0',\n            width: '100%',\n            height: '100%',\n            overflow: 'hidden',\n            visibility: 'hidden'\n          }\n        });\n      return {\n        show: function (scrollTop, height) {\n          iframe.style.display = 'block';\n          document.body.style.overflow = 'hidden';\n        },\n        hide: function () {\n          iframe.style.display = 'none';\n          document.body.style.overflow = overflowB;\n        },\n        iframe: iframe,\n        rpc: rpc\n      };\n    },\n    addEvent: function (type, func, target) {\n      target = target || window.document;\n      if (target.addEventListener) {\n        target.addEventListener(type, func, false);\n      } else if (target.attachEvent) {\n        target.attachEvent('on' + type, func);\n      }\n    },\n    removeEvent: function (type, func, target) {\n      target = target || window.document;\n      if (target.removeEventListener) {\n        target.removeEventListener(type, func, false);\n      } else if (target.detachEvent) {\n        target.detachEvent('on' + type, func);\n      }\n    },\n    ss: function (el, styles) {\n      VK.extend(el.style, styles, true);\n    }\n  };\n}\nif (!VK.Retargeting) {\n  VK.Retargeting = {\n    pixelCode: null,\n    Init: function (pixelCode) {\n      this.pixelCode = pixelCode;\n      return this;\n    },\n    Event: function (event) {\n      if (!this.pixelCode) {\n        return;\n      }\n      if (IS_BRIDGE_AVAILABLE) {\n        _bridgeSend('VKWebAppRetargetingPixel', {\n          pixel_code: this.pixelCode,\n          event: event\n        });\n        return;\n      }\n      var pData = VK.Util.getPageData();\n      var metatagUrl = pData.url.substr(0, 500);\n      var metatagTitle = pData.title && pData.title.substr(0, 500) || '';\n      (window.Image ? new Image() : document.createElement('img')).src = VK._domain.base + '/rtrg?p=' + this.pixelCode + (event ? '&event=' + encodeURIComponent(event) : '') + (metatagUrl ? '&metatag_url=' + encodeURIComponent(metatagUrl) : '') + (metatagTitle ? '&metatag_title=' + encodeURIComponent(metatagTitle) : '');\n    },\n    Hit: function () {\n      this.Event();\n    },\n    Add: function (audienceID) {\n      if (!this.pixelCode || !audienceID) {\n        return;\n      }\n      if (IS_BRIDGE_AVAILABLE) {\n        _bridgeSend('VKWebAppRetargetingPixel', {\n          pixel_code: this.pixelCode,\n          target_group_id: audienceID\n        });\n        return;\n      }\n      (window.Image ? new Image() : document.createElement('img')).src = VK._domain.base + '/rtrg?p=' + this.pixelCode + '&audience=' + encodeURIComponent(audienceID);\n    },\n    ProductEvent: function (priceListID, event, params, opts) {\n      if (!this.pixelCode || !event || !priceListID) {\n        return;\n      }\n      opts = opts || {};\n      var canShowErrors = true;\n      if (typeof opts.show_errors !== 'undefined') {\n        canShowErrors = opts.show_errors ? true : false;\n      }\n      var errorsIgnore = '0';\n      if (typeof opts.errors_ignore !== 'undefined') {\n        errorsIgnore = opts.errors_ignore ? '1' : '0';\n      }\n      var pData = VK.Util.getPageData();\n      var metatagUrl = pData.url.substr(0, 500);\n      var metatagTitle = pData.title && pData.title.substr(0, 500) || '';\n      var url = VK._domain.base + '/rtrg';\n      var productParams = params ? JSON.stringify(params) : '';\n      var requestParams = {\n        'p': this.pixelCode,\n        'products_event': event,\n        'price_list_id': priceListID,\n        'e': '1',\n        'i': errorsIgnore,\n        'metatag_url': metatagUrl,\n        'metatag_title': metatagTitle\n      };\n      if (productParams) {\n        requestParams.products_params = productParams;\n      }\n      if (IS_BRIDGE_AVAILABLE) {\n        _bridgeSend('VKWebAppRetargetingPixel', {\n          pixel_code: this.pixelCode,\n          price_list_id: priceListID,\n          products_event: event,\n          products_params: productParams\n        });\n        return;\n      }\n      var query = Object.keys(requestParams).map(function (key) {\n        var segment = encodeURIComponent(key) + '=' + encodeURIComponent(requestParams[key]);\n        return segment;\n      }).join('&');\n      var requestUrl = url + '?' + query;\n      VK.Api.makeRequest(requestUrl, this.onDone.bind(this, canShowErrors));\n    },\n    onDone: function (canShowErrors, response) {\n      if (!response || !canShowErrors) {\n        return;\n      }\n      var resp;\n      try {\n        resp = JSON.parse(response);\n      } catch (e) {\n        return;\n      }\n      if (!resp || !resp.errors) {\n        return;\n      }\n      this.showErrors(resp.errors);\n    },\n    showErrors: function (errors) {\n      if (!errors && !errors.length) {\n        return;\n      }\n      var errorBegin = 'VK Pixel Error (' + this.pixelCode + '): ';\n      if (typeof errors === 'string') {\n        console.error(errorBegin + errors);\n        return;\n      }\n      var errorsLength = errors.length;\n      if (!errorsLength) {\n        return;\n      }\n      for (var i = 0; i < errorsLength; i++) {\n        console.error(errorBegin + errors[i]);\n      }\n    }\n  };\n}\nif (!VK.Pixel) {\n  VK.Pixel = function (pixelCode) {\n    if (this.constructor != VK.Pixel) {\n      throw Error('VK.Pixel was called without \\'new\\' operator');\n    }\n    VK.extend(this, VK.Retargeting);\n    this.pixelCode = pixelCode;\n    this.Goal = function (conversionName, parameters) {\n      return VK.Goal(conversionName, parameters, pixelCode);\n    };\n    return this;\n  };\n}\nif (!VK.Goal) {\n  /**\n   * @param {String} [conversionName=conversion]\n   * @param {Object} [parameters]\n   * @param {Integer} [parameters.value=0] - conversion amount\n   * @param {String} [pixelCode] - pixel code\n   * @public\n   */\n  VK.Goal = function (conversionName, parameters, pixelCode) {\n    var pixel = pixelCode || VK.Retargeting.pixelCode;\n    if (!pixel || typeof pixel !== 'string') {\n      console.error('Error argument: pixelCode not a string. Use VK.Retargeting.Init or VK.Pixel to initialize pixel');\n      return;\n    }\n    var eventName = conversionName || 'conversion';\n    if (typeof eventName !== 'string') {\n      console.error('Error argument: conversionName not a string');\n      return;\n    }\n    var value = (parameters || {}).value || 0;\n    if (typeof value === 'string') {\n      if (parseFloat(value).toString() !== value) {\n        console.error('Error argument: parameters.value not a number or valid number string');\n        return;\n      }\n    } else if (typeof value !== 'number') {\n      console.error('Error argument: parameters.value not a number or valid number string');\n      return;\n    }\n    if (IS_BRIDGE_AVAILABLE) {\n      _bridgeSend('VKWebAppConversionHit', {\n        pixel_code: pixel,\n        conversion_event: eventName,\n        conversion_value: value\n      });\n      return;\n    }\n    var url = VK._domain.base + '/rtrg';\n    var requestParams = {\n      'p': pixel,\n      'e': '1',\n      'c': eventName,\n      'v': value\n    };\n    var query = Object.keys(requestParams).map(function (key) {\n      return encodeURIComponent(key) + '=' + encodeURIComponent(requestParams[key]);\n    }).join('&');\n    var requestUrl = url + '?' + query;\n    VK.Api.makeRequest(requestUrl, VK.Retargeting.onDone.bind(VK.Retargeting, true));\n  };\n}\n\n// Init asynchronous library loading\nwindow.vkAsyncInit && setTimeout(vkAsyncInit, 0);\nif (window.vkAsyncInitCallbacks && vkAsyncInitCallbacks.length) {\n  setTimeout(function () {\n    var callback;\n    while (callback = vkAsyncInitCallbacks.pop()) {\n      try {\n        callback();\n      } catch (e) {\n        try {\n          console.error(e);\n        } catch (e2) {}\n      }\n    }\n  }, 0);\n}\ntry {\n  stManager.done('api/openapi.js');\n} catch (e) {}","map":{"version":3,"names":["IS_CLIENT_SIDE","window","IS_ANDROID_WEBVIEW","Boolean","AndroidBridge","IS_IOS_WEBVIEW","webkit","messageHandlers","VKWebAppClose","IS_WEB","androidBridge","undefined","iosBridge","_bridgeSend","method","props","JSON","stringify","postMessage","_bridgeSupports","IS_BRIDGE_AVAILABLE","w","fastXDM","handlers","proxyToServer","onEnvLoad","env","genKey","key","i","Math","ceil","random","toString","waitFor","obj","prop","func","self","count","apply","setTimeout","attachScript","url","newScript","document","createElement","type","src","helperUrl","getElementsByTagName","appendChild","walkVar","value","clean","newValue","replace","Object","prototype","len","length","k","hasOwnProperty","call","getEnv","callback","loaded","push","envLoaded","applyMethod","strData","origin","data","json","parse","protocol","options","sameOrigin","isUnsafeMethod","Error","_func","funcNum","args","Array","slice","arguments","unshift","callMethod","safe","methods","extend","obj1","obj2","_id","Server","filter","id","frameName","server","__fxdm_i","proxyFromServer","send","bind","run","onInit","Client","client","name","indexOf","substr","caller","parent","frames","frame","contentWindow","on","onClientStart","onMessage","e","String","setJSON","getJSON","getProxyToServer","setEnv","exEnv","_q","act","start","onServerStart","destroy","append","attrs","div","innerHTML","firstChild","frameBorder","insertBefore","shift","funcsCount","funcName","xdm","unsafeMethods","a","_needJSON","win","addEventListener","attachEvent","_onlyJSON","VK","MD5","n","j","o","r","q","p","g","v","u","h","c","m","b","A","z","y","t","s","f","charCodeAt","fromCharCode","l","d","charAt","target","source","overwrite","_domain","base","login","main","api","xdConnectionCallbacks","version","_apiId","_session","_userStatus","_path","proxy","_rootId","_nameTransportPath","xdReady","access","FRIENDS","PHOTOS","AUDIO","VIDEO","MATCHES","QUESTIONS","WIKI","init","body","root","apiId","onlyWidgets","nameTransportPath","getElementById","childNodes","style","position","top","session","Cookie","load","Auth","_loadState","setSession","cookie","match","decode","secret","expire","parseInt","location","hostname","setRaw","val","ts","domain","time","rawCookie","exp","Date","getTime","toGMTString","set","resp","encode","clear","params","pairs","encodeURIComponent","sort","join","str","parts","split","pair","decodeURIComponent","obj2qs","qs","Api","_headId","_callbacks","ie6_7","ieTested","isIE6_7","navigator","userAgent","supportCORS","xhr","XMLHttpRequest","XDomainRequest","makeRequest","cb","createRequest","onload","text","responseText","status","console","error","response","onerror","open","withCredentials","setAttribute","checkMethod","queryTry","toLowerCase","validAttacheRegexp","validAttachments","methodAccess","queryParams","query","timer","attachments","attachment","attach","trim","test","widget","aid","message","method_access","owner_id","publish_date","UI","popup","width","height","setInterval","active","closed","clearInterval","group_id","responseCb","method_force","authFunc","result","Observer","unsubscribe","subscribe","getLoginStatus","queryLength","useXDM","rnd","sid","access_token","error_code","repeatCall","XDM","remote","lsCb","settings","logout","both","mid","sessionChange","statusChange","publish","authCallback","popupOpened","popupCheck","revokeGrants","onLogout","logoutCallback","getSession","force","loginCallback","eval","auth","user","sig","App","_appOpened","_addToGroupPopup","_openApp","box","request","arg","Util","Box","closeExternalApp","_result","hide","externalAppDone","noCloseLayer","show","addToGroup","appId","_onAddToGroupDone","removeEvent","event","app_id","group_ids","addEvent","pop","Widgets","_constructor","_buttons","screenX","screenLeft","screenY","screenTop","outerWidth","clientWidth","outerHeight","clientHeight","left","features","screen","button","el","handler","html","index","offsetWidth","_change","state","row","rows","elems","cells","elem","backgroundColor","borderTopColor","borderLeftColor","borderRightColor","borderBottomColor","backgroundPosition","xdHandler","code","_subscribers","_subscribersMap","eventName","subscribers","RPC","loading","enabled","background","Comments","objId","page","pData","getPageData","parseOptions","limit","mini","norealtime","mouseup","rpc","move","iframe","browse","replies","pageUrl","host","status_publish","autoPublish","title","pageTitle","description","pageDescription","image","pageImage","onChange","showBox","getAbsUrl","startDrag","cursorBack","cursor","stopDrag","startHeight","minWidth","CommentsBrowse","Recommended","max","verb","period","Post","ownerId","postId","hash","post_id","from","TextLive","widgetRootElementId","textLiveId","textPostId","textlive_id","textpost_id","Like","instances","allowTransparency","verticalBtnHeightWidth","autoWidth","btnHeight","size","color","ttHere","isOver","hideTimeout","buttonIfr","buttonRpc","tooltipIfr","tooltipRpc","checkTO","auto_width","showTooltip","display","getAttribute","clearTimeout","scrollTop","getScrollTop","documentElement","objPos","getXY","fixed","startY","tooltipPos","ss","opacity","hideTooltip","widgetId","initTooltip","counter","scrolling","padding","border","zIndex","overflow","onmouseover","onmouseout","parentNode","removeChild","destroyAll","Poll","pollId","poll_id","href","preview","is_preview","share","mode","min","Community","Group","gid","wall","color1","color2","color3","class_name","no_head","no_cover","wide","makeAuth","onAuth","authUrl","vars","Subscribe","oid","soft","ContactUs","Bookmarks","Playlist","playlistId","pid","Ads","paramsExtra","defaults","funcs","adsParams","adsParamsLocal","adsParamsDefault","keyFix","inArray","getBoundingClientRect","rect","ads_ad_unit_width_auto","floor","right","ads_ad_unit_height_auto","bottom","ads_ad_unit_width","ads_ad_unit_height","ads_handler","ads_handler_empty_html","noDefaultParams","adsOnInit","newAdsOnInitLoader","onDone","deps","adsAttachScript","errorCode","adsParamsExport","adsProcessParams","onAdsReady","adsProcessHandler","adsScriptData","vk__adsLight","attachScriptFunc","addScript","isArray","forEach","adsScriptVersion","jsc","userHandlers","paramName","paramValue","handlerResult","adsEvalHandler","log","ads_ad_unit_id","adsInsertHtmlHandler","isFunction","isString","handlerFuncs","Function","e2","handlerHtml","iframeHandlerHtml","iframeHandler","fixIframeHeight","round","vk_ads_html_handler","heightFix","arr","AllowMessagesFromCommunity","groupId","Article","Podcast","episode","CommunityMessages","wCur","BUTTONS_CONF","no_button","blue_circle","margin","DEFAULT_BUTTON_TYPE","BUTTON_POSITIONS","DEFAULT_BUTTON_POSITION","expandTimeout","expanded","from_dev","lsGet","shown","welcomeScreen","disable_welcome_screen","ref_source_info","ref_source_link","buttonType","keys","disableButtonTooltip","disable_tooltip","tooltipButtonText","tooltip_text","disableNewMessagesSound","disable_new_messages_sound","no_loading","disableExpandChatSound","enable_autoplay","disable_expand_chat_sound","expand_timeout","__alpha_new_widget","curBox","ttSize","widgetPosition","changeWidgetPosition","button_position","receiveMessage","action","chatRpc","chatIfr","inited","timers","onStartLoading","updateWidgetPosition","onReady","showTimer","expandChat","playSong","noSaveState","setTooltipSize","minimize","expand","opts","lsSet","lsRemove","canNotWrite","onCanNotWrite","fatalError","public_id","referrer_domain","query_str","setPageTitle","disableTitleChange","stopTitleAnimation","oldTitle","changeTitleMode","startTitleNotify","resetPageTitle","newMessage","hasFocus","callRpcMethod","fast","titleTimer","btnConf","boxShadow","conf","minimizeChat","setSourceData","link","destroyChat","changeButtonPosition","localStorage","getItem","setItem","removeItem","widgetUrl","iter","ifr","urlQueryString","encodedParam","maxWidth","startWidth","_iframeAppWidget","iframe_app","referrer","showLoader","enable","Loader","resize","resizeWidget","newWidth","newHeight","widgetElem","isFinite","onResizeWidget","updateVersion","ver","custom_style","attrsString","_pData","metas","metaName","content","_browserHash","loc","getStyle","ret","defaultView","getComputedStyle","computedStyle","getPropertyValue","currentStyle","camelCase","all","letter","toUpperCase","base_domain","login_domain","offsetParent","offsetLeft","offsetTop","scrollLeft","pageYOffset","scrollNode","pageXOffset","loader","sizes","fnc","overflowB","is_vk","visibility","className","tempHide","removeEventListener","detachEvent","styles","Retargeting","pixelCode","Init","Event","pixel_code","metatagUrl","metatagTitle","Image","Hit","Add","audienceID","target_group_id","ProductEvent","priceListID","canShowErrors","show_errors","errorsIgnore","errors_ignore","productParams","requestParams","products_params","price_list_id","products_event","map","segment","requestUrl","errors","showErrors","errorBegin","errorsLength","Pixel","constructor","Goal","conversionName","parameters","pixel","parseFloat","conversion_event","conversion_value","vkAsyncInit","vkAsyncInitCallbacks","stManager","done"],"sources":["/home/vlad12345/Projects/aaa.ru/src/assets/Vk_api/openapi.js"],"sourcesContent":["var IS_CLIENT_SIDE = typeof window !== 'undefined';\nvar IS_ANDROID_WEBVIEW = Boolean(IS_CLIENT_SIDE && window.AndroidBridge);\nvar IS_IOS_WEBVIEW = Boolean(\n  IS_CLIENT_SIDE &&\n  window.webkit &&\n  window.webkit.messageHandlers &&\n  window.webkit.messageHandlers.VKWebAppClose\n);\n\nvar IS_WEB = IS_CLIENT_SIDE && !IS_ANDROID_WEBVIEW && !IS_IOS_WEBVIEW;\n\nvar androidBridge = IS_CLIENT_SIDE ? window.AndroidBridge : undefined;\nvar iosBridge = IS_IOS_WEBVIEW ? window.webkit.messageHandlers : undefined;\n\nfunction _bridgeSend(method, props) {\n  if (androidBridge && androidBridge[method]) {\n    androidBridge[method](JSON.stringify(props));\n  }\n\n  else if (iosBridge && iosBridge[method] && typeof iosBridge[method].postMessage === 'function') {\n    iosBridge[method].postMessage(props);\n  }\n}\n\nfunction _bridgeSupports(method) {\n  if (IS_ANDROID_WEBVIEW) {\n    return androidBridge && typeof androidBridge[method] === 'function';\n  } else if (IS_IOS_WEBVIEW) {\n    return iosBridge && iosBridge[method] && typeof iosBridge[method].postMessage === 'function';\n  }\n\n  return false;\n}\n\nvar IS_BRIDGE_AVAILABLE = !IS_WEB && _bridgeSupports('VKWebAppConversionHit');\n\n(function(w) {\n  if (w.fastXDM) return;\n\n  var handlers  = {};\n  var proxyToServer = {};\n  var onEnvLoad = [];\n  var env       = {};\n\n  // Key generation\n  function genKey() {\n    var key = '';\n    for (var i = 0; i < 5; i++) {\n      key += Math.ceil(Math.random() * 15).toString(16);\n    }\n    return key;\n  }\n\n  function waitFor(obj, prop, func, self,  count) {\n    if (obj[prop]) {\n      func.apply(self);\n    } else {\n      count = count || 0;\n      if (count < 1000) {\n        setTimeout(function() {\n          waitFor(obj, prop, func, self, count + 1);\n        }, 0);\n      }\n    }\n  }\n\n  function attachScript(url) {\n    setTimeout(function() {\n      var newScript  = document.createElement('script');\n      newScript.type = 'text/javascript';\n      newScript.src  = url || w.fastXDM.helperUrl;\n      waitFor(document, 'body', function() {\n        document.getElementsByTagName('HEAD')[0].appendChild(newScript);\n      });\n    }, 0);\n  }\n\n  function walkVar(value, clean) {\n    var newValue;\n\n    switch (typeof value) {\n      case 'string':\n        if (clean) {\n          newValue = value.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\"/g, '&quot;').replace(/'/g, '&#039;');\n        } else {\n          newValue = value.replace(/&#039;/g, '\\'').replace(/&quot;/g, '\"').replace(/&gt;/g, '>').replace(/&lt;/g, '<').replace(/&amp;/g, '&');\n        }\n        break;\n      case 'object':\n        if (Object.prototype.toString.apply(value) === '[object Array]') {\n          newValue = [];\n          for (var i = 0, len = value.length; i < len; i++) {\n            newValue[i] = walkVar(value[i], clean);\n          }\n        } else {\n          newValue = {};\n          for (var k in value) {\n            if (Object.hasOwnProperty.call(value, k)) {\n              newValue[k] = walkVar(value[k], clean);\n            }\n          }\n        }\n        break;\n      default:\n        newValue = value;\n        break;\n    }\n\n    return newValue;\n  }\n\n  // Env functions\n  function getEnv(callback, self) {\n    if (env.loaded) {\n      callback.apply(self, [env]);\n    } else {\n      onEnvLoad.push([self, callback]);\n    }\n  }\n\n  function envLoaded() {\n    env.loaded = true;\n\n    for (var i = 0, len = onEnvLoad.length; i < len; i++) {\n      onEnvLoad[i][1].apply(onEnvLoad[i][0], [env]);\n    }\n  }\n\n  function applyMethod(strData, self, origin) {\n    getEnv(function(env) {\n      var data = env.json.parse(strData);\n      var method = data[0];\n\n      if (method) {\n        if (\n          env.protocol === 'p' &&\n          self.options.sameOrigin &&\n          origin !== w.origin &&\n          !self.isUnsafeMethod(method)\n        ) {\n          throw Error('Insecure method call.');\n        }\n\n        if (!data[1]) data[1] = [];\n\n        for (var i = 0, len = data[1].length; i < len; i++) {\n          if (data[1][i] && data[1][i]._func) {\n            var funcNum = data[1][i]._func;\n            data[1][i] = function() {\n              var args = Array.prototype.slice.call(arguments);\n              args.unshift('_func' + funcNum);\n              self.callMethod.apply(self, args);\n            }\n          } else if (self.options.safe) {\n            data[1][i] = walkVar(data[1][i], true);\n          }\n        }\n\n        setTimeout(function() {\n          if (!self.methods[method]) {\n            throw Error('fastXDM: Method ' + method + ' is undefined');\n          }\n          self.methods[method].apply(self, data[1]);\n        }, 0);\n      }\n    });\n  }\n\n  function extend(obj1, obj2) {\n    for (var i in obj2) {\n      if (obj1[i] && typeof(obj1[i]) === 'object') {\n        extend(obj1[i], obj2[i])\n      } else {\n        obj1[i] = obj2[i];\n      }\n    }\n  }\n\n  // XDM object\n  w.fastXDM = {\n    _id: 0,\n    helperUrl: 'https://vk.com/js/api/xdmHelper.js',\n\n    Server: function(methods, filter, options) {\n      this.methods   = methods || {};\n      this.filter    = filter;\n      this.options   = options || {};\n      this.id        = w.fastXDM._id++;\n      this.key       = genKey();\n      this.frameName = 'fXD' + this.key;\n      this.server    = true;\n\n      this.methods['%init%'] = this.methods.__fxdm_i = function() {\n        getEnv(function(env) {\n          for (var method in this.methods) {\n            if (this.methods[method] instanceof w.fastXDM.Server) {\n              var proxyFromServer = this;\n              var proxyToServer = this.methods[method];\n\n              if (env.protocol === 'p') {\n                env.send(proxyFromServer, env.json.stringify(['%proxy%', [method, proxyToServer.key]]));\n              }\n\n              this.methods[method] = function() {\n                this.callMethod.apply(this, arguments);\n              }.bind(proxyToServer)\n            }\n          }\n        }, this);\n\n        w.fastXDM.run(this.id);\n        if (this.methods.onInit) {\n          this.methods.onInit();\n        }\n      };\n\n      handlers[this.key] = [applyMethod, this];\n    },\n\n    Client: function(methods, options) {\n      this.methods = methods || {};\n      this.options = options || {};\n      this.id      = w.fastXDM._id++;\n      this.client  = true;\n\n      w.fastXDM.run(this.id);\n\n      if (window.name.indexOf('fXD') === 0) {\n        this.key = window.name.substr(3);\n      } else {\n        throw Error('Wrong window.name property.');\n      }\n\n      this.caller = window.parent;\n\n      if (!proxyToServer[this.key]) {\n        proxyToServer[this.key] = {};\n      }\n      this.methods['%proxy%'] = function(method, key) {\n        if (method && key && this.caller.frames['fXD' + key]) {\n          proxyToServer[this.key][method] = {\n            key: key,\n            frame: {\n              contentWindow: this.caller.frames['fXD' + key]\n            }\n          };\n        }\n      }.bind(this);\n\n      handlers[this.key] = [applyMethod, this];\n\n      w.fastXDM.on('helper', function() {\n        w.fastXDM.onClientStart(this);\n      }, this);\n\n      getEnv(function(env) {\n        env.send(this, env.json.stringify(['%init%']));\n\n        var methods = this.methods;\n        setTimeout(function() {\n          if (methods.onInit) {\n            methods.onInit();\n          }\n        }, 0);\n      }, this);\n    },\n\n    onMessage: function(e) {\n      var data = e.data;\n      if (!data) {\n        return false;\n      }\n      if (typeof data !== 'string' && !(data instanceof String)) {\n        return false;\n      }\n\n      var key = data.substr(0, 5);\n      if (handlers[key]) {\n        var self = handlers[key][1];\n        if (self && (!self.filter || self.filter(e.origin))) {\n          handlers[key][0](data.substr(6), self, e.origin);\n        }\n      }\n    },\n\n    setJSON: function(json) {\n      env.json = json;\n    },\n\n    getJSON: function(callback) {\n      if (!callback) {\n        return env.json;\n      }\n\n      getEnv(function(env) {\n        callback(env.json);\n      });\n    },\n\n    getProxyToServer: function(key, method) {\n      return proxyToServer[key] && proxyToServer[key][method];\n    },\n\n    setEnv: function(exEnv) {\n      for (var i in exEnv) {\n        env[i] = exEnv[i];\n      }\n\n      envLoaded();\n    },\n\n    _q: {},\n\n    on: function(key, act, self) {\n      if (!this._q[key]) this._q[key] = [];\n\n      if (this._q[key] == -1) {\n        act.apply(self);\n      } else {\n        this._q[key].push([act, self]);\n      }\n    },\n\n    run: function(key) {\n      var len = (this._q[key] || []).length;\n      for (var i = 0; i < len; i++) {\n        this._q[key][i][0].apply(this._q[key][i][1]);\n      }\n\n      this._q[key] = -1;\n    },\n\n    waitFor: waitFor\n  }\n\n  w.fastXDM.Server.prototype.start = function(obj, count) {\n    if (obj.contentWindow) {\n      this.caller = obj.contentWindow;\n      this.frame  = obj;\n\n      w.fastXDM.on('helper', function() {\n        w.fastXDM.onServerStart(this);\n      }, this);\n    } else { // Opera old versions\n      var self = this;\n      count = count || 0;\n      if (count < 50) {\n        setTimeout(function() {\n          self.start.apply(self, [obj, count + 1]);\n        }, 100);\n      }\n    }\n  }\n\n  w.fastXDM.Server.prototype.destroy = function() {\n    delete handlers[this.key];\n  }\n\n  w.fastXDM.Server.prototype.append = function(obj, options, attrs) {\n    var div       = document.createElement('DIV');\n    div.innerHTML = '<iframe name=\"' + this.frameName + '\" ' + (attrs || '') + '></iframe>';\n    var frame     = div.firstChild;\n    var self      = this;\n\n    setTimeout(function() {\n      frame.frameBorder = '0';\n      if (options) extend(frame, options);\n      obj.insertBefore(frame, obj.firstChild);\n      self.start(frame);\n    }, 0);\n\n    return frame;\n  }\n\n  w.fastXDM.Client.prototype.callMethod = w.fastXDM.Server.prototype.callMethod = function() {\n    var args   = Array.prototype.slice.call(arguments);\n    var method = args.shift();\n\n    for (var i = 0, len = args.length; i < len; i++) {\n      if (typeof(args[i]) === 'function') {\n        this.funcsCount = (this.funcsCount || 0) + 1;\n        var func        = args[i];\n        var funcName    = '_func' + this.funcsCount;\n\n        this.methods[funcName] = function() {\n          func.apply(this, arguments);\n          delete this.methods[funcName];\n        }\n\n        args[i] = {_func: this.funcsCount};\n      } else if (this.options.safe) {\n        args[i] = walkVar(args[i], false);\n      }\n    }\n\n    waitFor(this, 'caller', function() {\n      w.fastXDM.on(this.id, function() {\n        getEnv(function(env) {\n          var xdm = this;\n          var proxyToServer = w.fastXDM.getProxyToServer(this.key, method);\n\n          if (proxyToServer) {\n            xdm = proxyToServer;\n            method = args.shift();\n          }\n\n          env.send(xdm, env.json.stringify([method, args]));\n        }, this);\n      }, this);\n    }, this);\n  }\n\n  w.fastXDM.Client.prototype.isUnsafeMethod = w.fastXDM.Server.prototype.isUnsafeMethod = function(method) {\n    return ~['%proxy%', '%init%'].indexOf(method) || this.options.unsafeMethods && ~this.options.unsafeMethods.indexOf(method);\n  }\n\n  if (w.JSON && typeof(w.JSON) === 'object' && w.JSON.parse && w.JSON.stringify && w.JSON.stringify({a:[1,2,3]}).replace(/ /g, '') === '{\"a\":[1,2,3]}') {\n    env.json = {parse: w.JSON.parse, stringify: w.JSON.stringify};\n  } else {\n    w.fastXDM._needJSON = true;\n  }\n\n  // PostMessage cover\n  if (w.postMessage) {\n    env.protocol = 'p';\n    env.send = function(xdm, strData) {\n      var win = (xdm.frame ? xdm.frame.contentWindow : xdm.caller);\n      if (win) {\n        try {\n          win.postMessage(xdm.key + ':' + strData, \"*\");\n        } catch(e) {\n          window.postMessage.call(win, xdm.key + ':' + strData, \"*\");\n        }\n      }\n    }\n\n    if (w.addEventListener) {\n      w.addEventListener(\"message\", w.fastXDM.onMessage, false);\n    } else {\n      w.attachEvent(\"onmessage\", w.fastXDM.onMessage);\n    }\n\n    if (w.fastXDM._needJSON) {\n      w.fastXDM._onlyJSON = true;\n      attachScript();\n    } else {\n      envLoaded();\n    }\n  } else {\n    attachScript();\n  }\n})(window);\n\nif (!window.VK) window.VK = {};\n\n/*\n * Based on JavaScript implementation of the RSA Data Security, Inc. MD5 Message\n * Copyright (C) Paul Johnston 1999 - 2009\n * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet\n * Distributed under the BSD License\n */\nif(!VK.MD5){VK.MD5=function(n){var j=function(o,r){var q=(o&65535)+(r&65535),p=(o>>16)+(r>>16)+(q>>16);return(p<<16)|(q&65535)},g=function(o,p){return(o<<p)|(o>>>(32-p))},k=function(w,r,p,o,v,u){return j(g(j(j(r,w),j(o,u)),v),p)},a=function(q,p,w,v,o,u,r){return k((p&w)|((~p)&v),q,p,o,u,r)},h=function(q,p,w,v,o,u,r){return k((p&v)|(w&(~v)),q,p,o,u,r)},c=function(q,p,w,v,o,u,r){return k(p^w^v,q,p,o,u,r)},m=function(q,p,w,v,o,u,r){return k(w^(p|(~v)),q,p,o,u,r)},b=function(A,u){var z=1732584193,y=-271733879,w=-1732584194,v=271733878,r,q,p,o;A[u>>5]|=128<<((u)%32);A[(((u+64)>>>9)<<4)+14]=u;for(var t=0,s=A.length;t<s;t+=16){r=z;q=y;p=w;o=v;z=a(z,y,w,v,A[t+0],7,-680876936);v=a(v,z,y,w,A[t+1],12,-389564586);w=a(w,v,z,y,A[t+2],17,606105819);y=a(y,w,v,z,A[t+3],22,-1044525330);z=a(z,y,w,v,A[t+4],7,-176418897);v=a(v,z,y,w,A[t+5],12,1200080426);w=a(w,v,z,y,A[t+6],17,-1473231341);y=a(y,w,v,z,A[t+7],22,-45705983);z=a(z,y,w,v,A[t+8],7,1770035416);v=a(v,z,y,w,A[t+9],12,-1958414417);w=a(w,v,z,y,A[t+10],17,-42063);y=a(y,w,v,z,A[t+11],22,-1990404162);z=a(z,y,w,v,A[t+12],7,1804603682);v=a(v,z,y,w,A[t+13],12,-40341101);w=a(w,v,z,y,A[t+14],17,-1502002290);y=a(y,w,v,z,A[t+15],22,1236535329);z=h(z,y,w,v,A[t+1],5,-165796510);v=h(v,z,y,w,A[t+6],9,-1069501632);w=h(w,v,z,y,A[t+11],14,643717713);y=h(y,w,v,z,A[t+0],20,-373897302);z=h(z,y,w,v,A[t+5],5,-701558691);v=h(v,z,y,w,A[t+10],9,38016083);w=h(w,v,z,y,A[t+15],14,-660478335);y=h(y,w,v,z,A[t+4],20,-405537848);z=h(z,y,w,v,A[t+9],5,568446438);v=h(v,z,y,w,A[t+14],9,-1019803690);w=h(w,v,z,y,A[t+3],14,-187363961);y=h(y,w,v,z,A[t+8],20,1163531501);z=h(z,y,w,v,A[t+13],5,-1444681467);v=h(v,z,y,w,A[t+2],9,-51403784);w=h(w,v,z,y,A[t+7],14,1735328473);y=h(y,w,v,z,A[t+12],20,-1926607734);z=c(z,y,w,v,A[t+5],4,-378558);v=c(v,z,y,w,A[t+8],11,-2022574463);w=c(w,v,z,y,A[t+11],16,1839030562);y=c(y,w,v,z,A[t+14],23,-35309556);z=c(z,y,w,v,A[t+1],4,-1530992060);v=c(v,z,y,w,A[t+4],11,1272893353);w=c(w,v,z,y,A[t+7],16,-155497632);y=c(y,w,v,z,A[t+10],23,-1094730640);z=c(z,y,w,v,A[t+13],4,681279174);v=c(v,z,y,w,A[t+0],11,-358537222);w=c(w,v,z,y,A[t+3],16,-722521979);y=c(y,w,v,z,A[t+6],23,76029189);z=c(z,y,w,v,A[t+9],4,-640364487);v=c(v,z,y,w,A[t+12],11,-421815835);w=c(w,v,z,y,A[t+15],16,530742520);y=c(y,w,v,z,A[t+2],23,-995338651);z=m(z,y,w,v,A[t+0],6,-198630844);v=m(v,z,y,w,A[t+7],10,1126891415);w=m(w,v,z,y,A[t+14],15,-1416354905);y=m(y,w,v,z,A[t+5],21,-57434055);z=m(z,y,w,v,A[t+12],6,1700485571);v=m(v,z,y,w,A[t+3],10,-1894986606);w=m(w,v,z,y,A[t+10],15,-1051523);y=m(y,w,v,z,A[t+1],21,-2054922799);z=m(z,y,w,v,A[t+8],6,1873313359);v=m(v,z,y,w,A[t+15],10,-30611744);w=m(w,v,z,y,A[t+6],15,-1560198380);y=m(y,w,v,z,A[t+13],21,1309151649);z=m(z,y,w,v,A[t+4],6,-145523070);v=m(v,z,y,w,A[t+11],10,-1120210379);w=m(w,v,z,y,A[t+2],15,718787259);y=m(y,w,v,z,A[t+9],21,-343485551);z=j(z,r);y=j(y,q);w=j(w,p);v=j(v,o)}return[z,y,w,v]},f=function(r){var q=\"\",s=-1,p=r.length,o,t;while(++s<p){o=r.charCodeAt(s);t=s+1<p?r.charCodeAt(s+1):0;if(55296<=o&&o<=56319&&56320<=t&&t<=57343){o=65536+((o&1023)<<10)+(t&1023);s++}if(o<=127){q+=String.fromCharCode(o)}else{if(o<=2047){q+=String.fromCharCode(192|((o>>>6)&31),128|(o&63))}else{if(o<=65535){q+=String.fromCharCode(224|((o>>>12)&15),128|((o>>>6)&63),128|(o&63))}else{if(o<=2097151){q+=String.fromCharCode(240|((o>>>18)&7),128|((o>>>12)&63),128|((o>>>6)&63),128|(o&63))}}}}}return q},e=function(p){var o=Array(p.length>>2),r,q;for(r=0,q=o.length;r<q;r++){o[r]=0}for(r=0,q=p.length*8;r<q;r+=8){o[r>>5]|=(p.charCodeAt(r/8)&255)<<(r%32)}return o},l=function(p){var o=\"\";for(var r=0,q=p.length*32;r<q;r+=8){o+=String.fromCharCode((p[r>>5]>>>(r%32))&255)}return o},d=function(o){return l(b(e(o),o.length*8))},i=function(q){var t=\"0123456789abcdef\",p=\"\",o;for(var s=0,r=q.length;s<r;s++){o=q.charCodeAt(s);p+=t.charAt((o>>>4)&15)+t.charAt(o&15)}return p};return i(d(f(n)))}}\n\n/*\n * VKontakte Open API JavaScript library\n * http://vk.com/\n */\n\nVK.extend = function(target, source, overwrite) {\n  for (var key in source) {\n    if (overwrite || typeof target[key] === 'undefined') {\n      target[key] = source[key];\n    }\n  }\n  return target;\n};\n\nVK.extend(VK, {\n  _domain: {\n    base: 'https://vk.com',\n    login: 'https://login.vk.com',\n    main: 'https://oauth.vk.com',\n    api: 'https://api.vk.com'\n  }\n}, true);\n\nif (!VK.xdConnectionCallbacks) {\n\n  VK.extend(VK, {\n    version: 1,\n    _apiId: null,\n    _session: null,\n    _userStatus: 'unknown',\n    _path: {\n      login: 'authorize',\n      proxy: 'fxdm_oauth_proxy.html'\n    },\n    _rootId: 'vk_api_transport',\n    _nameTransportPath: '',\n    xdReady: false,\n    access: {\n      FRIENDS:   0x2,\n      PHOTOS:    0x4,\n      AUDIO:     0x8,\n      VIDEO:     0x10,\n      MATCHES:   0x20,\n      QUESTIONS: 0x40,\n      WIKI:      0x80\n    }\n  });\n\n  VK.init = function(options) {\n    var body, root;\n\n    VK._apiId = null;\n    if (!options.apiId) {\n      throw Error('VK.init() called without an apiId');\n    }\n    VK._apiId = options.apiId;\n\n    if (options.onlyWidgets) return true;\n\n    if (options.nameTransportPath && options.nameTransportPath !== '') {\n      VK._nameTransportPath = options.nameTransportPath;\n    }\n\n    root = document.getElementById(VK._rootId);\n    if (!root) {\n      root = document.createElement('div');\n      root.id = VK._rootId;\n      body = document.body;\n      body.insertBefore(root, body.childNodes[0]);\n    }\n    root.style.position = 'absolute';\n    root.style.top = '-10000px';\n\n    var session = VK.Cookie.load();\n    if (session) {\n      VK.Auth._loadState = 'loaded';\n      VK.Auth.setSession(session, session ? 'connected' : 'unknown');\n    }\n  };\n\n  if (!VK.Cookie) {\n    VK.Cookie = {\n      _domain: null,\n      load: function() {\n        var cookie = document.cookie.match('\\\\bvk_app_' + VK._apiId + '=([^;]*)\\\\b')\n        var session;\n\n        if (cookie) {\n          session = this.decode(cookie[1]);\n          if (session.secret != 'oauth') {\n            return false;\n          }\n          session.expire = parseInt(session.expire, 10);\n          VK.Cookie._domain = '.' + window.location.hostname;\n        }\n\n        return session;\n      },\n      setRaw: function(val, ts, domain, time) {\n        var rawCookie;\n        rawCookie = 'vk_app_' + VK._apiId + '=' + val + '';\n        var exp = time ? (new Date().getTime() + time * 1000) : ts * 1000;\n        rawCookie += (val && ts === 0 ? '' : '; expires=' + new Date(exp).toGMTString());\n        rawCookie += '; path=/';\n        rawCookie += (domain ? '; domain=.' + domain : '');\n        document.cookie = rawCookie;\n\n        this._domain = domain;\n      },\n      set: function(session, resp) {\n        if (session) {\n          this.setRaw(this.encode(session), session.expire, window.location.hostname, (resp || {}).time);\n        } else {\n          this.clear();\n        }\n      },\n      clear: function() {\n        this.setRaw('', 0, this._domain, 0);\n      },\n      encode: function(params) {\n        var\n            pairs = [],\n            key;\n\n        for (key in params) {\n          if (key != 'user') pairs.push(encodeURIComponent(key) + '=' + encodeURIComponent(params[key]));\n        }\n        pairs.sort();\n\n        return pairs.join('&');\n      },\n      decode: function(str) {\n        var\n            params = {},\n            parts = str.split('&'),\n            i,\n            pair;\n\n        for (i=0; i < parts.length; i++) {\n          pair = parts[i].split('=', 2);\n          if (pair && pair[0]) {\n            params[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\n          }\n        }\n\n        return params;\n      }\n    };\n  }\n\n  function obj2qs(obj) {\n    if (!obj) return '';\n    var qs = [];\n    for (var k in obj) {\n      if (obj.hasOwnProperty(k)) {\n        qs.push(encodeURIComponent(k) + '=' + encodeURIComponent(obj[k].toString() || ''));\n      }\n    }\n    return qs.length ? '?' + qs.join('&') : '';\n  }\n\n  if (!VK.Api) {\n    VK.Api = {\n      _headId: null,\n      _callbacks: {},\n\n      ie6_7: function() {\n        if (!VK.Api.ieTested) {\n          VK.Api.isIE6_7 = navigator.userAgent.match(/MSIE [6|7]/i);\n          VK.Api.ieTested = true;\n        }\n        return VK.Api.isIE6_7;\n      },\n\n      supportCORS: function() {\n        var xhr = new XMLHttpRequest();\n        if (\"withCredentials\" in xhr) {\n          return true;\n        }\n\n        if (typeof XDomainRequest != \"undefined\") {\n          return true;\n        }\n\n        return false;\n      },\n\n      makeRequest: function(url, cb) {\n        var xhr = VK.Api.createRequest('GET', url);\n        if (!xhr) {\n          return false;\n        }\n\n        xhr.onload = function() {\n          var text = xhr.responseText;\n          if (xhr.status === 200) {\n            cb(text);\n          } else {\n            try {\n              console.error('Open api access error', xhr.response);\n            } catch(e) {\n              //nop\n            }\n          }\n        };\n\n        xhr.onerror = function() {\n          try {\n            console.error('Open api access error');\n          } catch(e) {\n            //nop\n          }\n        };\n\n        xhr.send();\n        return true;\n      },\n\n      createRequest: function(method, url) {\n        var xhr = new XMLHttpRequest();\n\n        if (\"withCredentials\" in xhr) {\n          // XHR for Chrome/Firefox/Opera/Safari.\n          xhr.open(method, url, true);\n          xhr.withCredentials = true;\n        } else if (typeof XDomainRequest != \"undefined\") {\n          // XDomainRequest for IE.\n          xhr = new XDomainRequest();\n          xhr.open(method, url);\n          xhr.withCredentials = true;\n        } else {\n          // CORS not supported.\n          xhr = null;\n        }\n\n        return xhr;\n      },\n\n      attachScript: function(url) {\n        if (!VK.Api._headId) VK.Api._headId = document.getElementsByTagName(\"head\")[0];\n        var newScript = document.createElement('script');\n        newScript.type = 'text/javascript';\n        newScript.setAttribute('encoding', 'UTF-8');\n        newScript.src = url;\n        VK.Api._headId.appendChild(newScript);\n      },\n\n      checkMethod: function(method, params, cb, queryTry) {\n        var m = method.toLowerCase();\n\n        if (m === 'wall.post') {\n          var validAttacheRegexp = /(^https?:\\/\\/)|(^(poll|album|photo|video|doc|audio|page|note)-?\\d+_-?\\d+)$/,\n              validAttachments = [],\n              methodAccess,\n              queryParams,\n              query,\n              timer;\n\n          if (!params.v) {\n            params.v = '5.95';\n          }\n\n          params.attachments = params.attachments || params.attachment || [];\n          if (typeof params.attachments === 'string') {\n            params.attachments = params.attachments.split(',')\n          }\n\n          for (var i = 0; i < params.attachments.length; i++) {\n            var attach = params.attachments[i].trim();\n            if (validAttacheRegexp.test(attach)) {\n              validAttachments.push(attach);\n            }\n          }\n\n          params.attachments = validAttachments.length ? validAttachments : '';\n          methodAccess = '_' + (Math.random()).toString(16).substr(2);\n          queryParams = {\n            act: 'wall_post_box',\n            method: m,\n            widget: 4,\n            aid: parseInt(VK._apiId, 10),\n            text: params.message || '',\n            method_access: methodAccess\n          };\n\n          queryParams = VK.extend(queryParams, params);\n          queryParams.owner_id = parseInt(params.owner_id || 0, 10);\n          queryParams.publish_date = params.publish_date || '';\n          query = VK._domain.base + '/al_apps.php';\n          query += obj2qs(queryParams);\n\n          VK.UI.popup({\n            url: query,\n            width: 560,\n            height: 304\n          });\n\n          timer = setInterval(function() {\n            if (VK.UI.active.closed) {\n              clearInterval(timer);\n              params.method_access = methodAccess;\n              VK.Api.call(method, params, cb, queryTry);\n            }\n          }, 500);\n          return false;\n        }\n\n        if (m == 'messages.allowmessagesfromgroup') {\n          methodAccess = '_' + (Math.random()).toString(16).substr(2);\n          query = VK._domain.base + '/widget_allow_messages_from_community.php?act=allow_box&group_id=' + parseInt(params.group_id, 10) + '&app_id=' + parseInt(VK._apiId, 10) + '&method_access=' + methodAccess;\n\n          VK.UI.popup({\n            url: query,\n            width: 560,\n            height: 304\n          });\n\n          timer = setInterval(function () {\n            if (VK.UI.active.closed) {\n              clearInterval(timer);\n              params.method_access = methodAccess;\n              VK.Api.call(method, params, cb, queryTry);\n            }\n          }, 500);\n\n          return false;\n        }\n\n        return true;\n      },\n\n      call: function(method, params, cb, queryTry) {\n        var\n            query = params || {},\n            qs,\n            responseCb;\n\n        if (typeof query != 'object' || typeof cb != 'function') {\n          return false;\n        }\n        if (!params.method_access && !params.method_force && !VK.Api.checkMethod(method, params, cb, queryTry)) {\n          return;\n        }\n\n        if (!queryTry) queryTry = 0;\n\n        if (VK.Auth._loadState != 'loaded') {\n          var authFunc = function(result) {\n            if (result && result.session) {\n              VK.Observer.unsubscribe('auth.loginStatus', authFunc);\n              VK.Api.call(method, params, cb);\n            }\n          };\n          VK.Observer.subscribe('auth.loginStatus', authFunc);\n          VK.Auth.getLoginStatus();\n          return;\n        }\n\n        if (VK.Api.queryLength(query) < 1500 && !VK.Api.ie6_7()) {\n          var useXDM = false;\n          var rnd = parseInt(Math.random() * 10000000, 10);\n          while (VK.Api._callbacks[rnd]) {\n            rnd = parseInt(Math.random() * 10000000, 10)\n          }\n          query.callback = 'VK.Api._callbacks['+rnd+']';\n        } else {\n          var useXDM = true;\n        }\n\n        if (VK._session && VK._session.sid) {\n          query.access_token = VK._session.sid;\n        }\n\n        qs = VK.Cookie.encode(query);\n\n        responseCb = function(response) {\n          if (response.error && (response.error.error_code == 3 || response.error.error_code == 4 || response.error.error_code == 5)) {\n            if (queryTry > 3) return false;\n            var repeatCall = function(resp) {\n              VK.Observer.unsubscribe('auth.sessionChange', repeatCall);\n              delete params.access_token;\n              if (resp.session) VK.Api.call(method, params, cb, queryTry + 1);\n            }\n            VK.Observer.subscribe('auth.sessionChange', repeatCall);\n            VK.Auth.getLoginStatus();\n          } else {\n            cb(response);\n          }\n          if (!useXDM) delete VK.Api._callbacks[rnd];\n        };\n\n        if (useXDM) {\n          if (VK.xdReady) {\n            VK.XDM.remote.callMethod('apiCall', method, qs, responseCb);\n          } else {\n            VK.Observer.subscribe('xdm.init', function() {\n              VK.XDM.remote.callMethod('apiCall', method, qs, responseCb);\n            });\n            VK.XDM.init();\n          }\n        } else {\n          VK.Api._callbacks[rnd] = responseCb;\n          VK.Api.attachScript(VK._domain.api + '/method/' + method +'?' + qs);\n        }\n      },\n\n      queryLength: function(query) {\n        var len = 100, i; // sid + sig\n        for (i in query) {\n          len += i.length + encodeURIComponent(query[i]).length + 1;\n        }\n        return len;\n      }\n    };\n\n// Alias\n    VK.api = function(method, params, cb) {VK.Api.call(method, params, cb);}\n  };\n\n  if (!VK.Auth) {\n    VK.Auth = {\n      popup: null,\n      lsCb: {},\n\n      setSession: function(session, status, settings, resp) {\n        var\n            login = !VK._session && session,\n            logout = VK._session && !session,\n            both = VK._session && session && VK._session.mid != session.mid,\n            sessionChange = login || logout || (VK._session && session && VK._session.sid != session.sid),\n            statusChange = status != VK._userStatus,\n            response = {\n              'session': session,\n              'status': status,\n              'settings': settings\n            };\n\n        VK._session = session;\n\n        VK._userStatus = status;\n\n        VK.Cookie.set(session, resp);\n\n        if (sessionChange || statusChange || both) {\n          setTimeout(function() {\n            if (statusChange) {\n              VK.Observer.publish('auth.statusChange', response);\n            }\n\n            if (logout || both) {\n              VK.Observer.publish('auth.logout', response);\n            }\n\n            if (login || both) {\n              VK.Observer.publish('auth.login', response);\n            }\n\n            if (sessionChange) {\n              VK.Observer.publish('auth.sessionChange', response);\n            }\n          }, 0);\n        }\n\n        return response;\n      },\n\n      // Public VK.Auth methods\n      login: function(cb, settings) {\n        if (!VK._apiId) {\n          return false;\n        }\n\n        var url = VK._domain.main + '/' + VK._path.login + '?client_id='+VK._apiId+'&display=popup&redirect_uri=close.html&response_type=token&openapi=1';\n        if (settings && parseInt(settings, 10) > 0) {\n          url += '&scope=' + settings;\n        }\n\n        VK.Observer.unsubscribe('auth.onLogin');\n        VK.Observer.subscribe('auth.onLogin', cb);\n\n        VK.UI.popup({\n          width: 665,\n          height: 370,\n          url: url\n        });\n\n        var authCallback = function() {\n          VK.Auth.getLoginStatus(function(resp) {\n            VK.Observer.publish('auth.onLogin', resp);\n            VK.Observer.unsubscribe('auth.onLogin');\n          }, true);\n        }\n\n        VK.UI.popupOpened = true;\n        var popupCheck = function() {\n          if (!VK.UI.popupOpened) {\n            return false;\n          }\n\n          try {\n            if (!VK.UI.active.top || VK.UI.active.closed) {\n              VK.UI.popupOpened = false;\n              authCallback();\n              return true;\n            }\n          } catch(e) {\n            VK.UI.popupOpened = false;\n            authCallback();\n            return true;\n          }\n          setTimeout(popupCheck, 100);\n        };\n\n        setTimeout(popupCheck, 100);\n      },\n\n      // Logout user from app, vk.com & login.vk.com\n      logout: function(cb) {\n        VK.Auth.revokeGrants(cb);\n      },\n\n      revokeGrants: function(cb) {\n        var onLogout = function(resp) {\n          VK.Observer.unsubscribe('auth.statusChange', onLogout);\n          if (cb) {\n            cb(resp);\n          }\n        }\n\n        VK.Observer.subscribe('auth.statusChange', onLogout);\n        if (VK._session && VK._session.sid) {\n          var url = VK._domain.login + '?act=openapi&oauth=1&aid=' + parseInt(VK._apiId, 10) + '&location=' + encodeURIComponent(window.location.hostname) + '&do_logout=1&token=' + VK._session.sid;\n          if (VK.Api.supportCORS()) {\n            var logoutCallback = function() {\n              VK.Auth.setSession(null, 'unknown');\n            };\n\n            VK.Api.makeRequest(url + '&new=1', logoutCallback);\n          } else {\n            VK.Api.attachScript(url);\n          }\n        }\n\n        VK.Cookie.clear();\n      },\n\n      // Get current login status from session (sync) (not use on load time)\n      getSession: function() {\n        return VK._session;\n      },\n\n      // Get current login status from vk.com (async)\n      getLoginStatus: function(cb, force) {\n        if (!VK._apiId) {\n          return;\n        }\n\n        if (cb) {\n          if (!force && VK.Auth._loadState == 'loaded') {\n            cb({status: VK._userStatus, session: VK._session});\n            return;\n          } else {\n            VK.Observer.subscribe('auth.loginStatus', cb);\n          }\n        }\n\n        if (!force && VK.Auth._loadState == 'loading') {\n          return;\n        }\n\n        VK.Auth._loadState = 'loading';\n\n        var url = VK._domain.login + '?act=openapi&oauth=1&aid=' + parseInt(VK._apiId, 10) + '&location=' + encodeURIComponent(window.location.hostname);\n        if (VK.Api.supportCORS()) {\n          var loginCallback = function(response) {\n            if (!this.JSON) {\n              this.JSON = {};\n            }\n\n            if (typeof JSON.parse !== 'function') {\n              //IE6 and IE7\n              response = eval(response);\n            } else {\n              response = JSON.parse(response);\n            }\n\n            VK.Auth._loadState = 'loaded';\n            if (response && response.auth) {\n              var session = {\n                mid: response.user.id,\n                sid: response.access_token,\n                sig: response.sig,\n                secret: response.secret,\n                expire: response.expire\n              };\n\n              if (force) {\n                session.user = response.user;\n              }\n\n              var status = 'connected';\n            } else {\n              var session = null;\n              var status = response.user ? 'not_authorized' : 'unknown';\n              VK.Cookie.clear();\n            }\n\n            VK.Auth.setSession(session, status, false, response);\n            VK.Observer.publish('auth.loginStatus', {session: session, status: status});\n            VK.Observer.unsubscribe('auth.loginStatus');\n          };\n\n          VK.Api.makeRequest(url + '&new=1', loginCallback);\n        } else {\n          var rnd = parseInt(Math.random() * 10000000, 10);\n          while (VK.Auth.lsCb[rnd]) {\n            rnd = parseInt(Math.random() * 10000000, 10);\n          }\n\n          VK.Auth.lsCb[rnd] = function(response) {\n            delete VK.Auth.lsCb[rnd];\n            VK.Auth._loadState = 'loaded';\n            if (response && response.auth) {\n              var session = {\n                mid: response.user.id,\n                sid: response.access_token,\n                sig: response.sig,\n                secret: response.secret,\n                expire: response.expire\n              };\n              if (force) session.user = response.user;\n              var status = 'connected';\n            } else {\n              var session = null;\n              var status = response.user ? 'not_authorized' : 'unknown';\n              VK.Cookie.clear();\n            }\n            VK.Auth.setSession(session, status, false, response);\n            VK.Observer.publish('auth.loginStatus', {session: session, status: status});\n            VK.Observer.unsubscribe('auth.loginStatus');\n          };\n\n            // AttachScript here\n          VK.Api.attachScript(url+'&rnd='+rnd);\n        }\n      }\n    };\n  }\n\n  if (!VK.App) {\n    VK.App = {\n      _appOpened: false,\n      _addToGroupPopup: null,\n\n      open: function (url, params) {\n        if (VK.App._appOpened || !VK._apiId) {\n          return;\n        }\n\n        if (!VK._session) {\n          VK.Auth.login(function(resp) {\n            if (resp && resp.session) {\n              VK.App._openApp(url, params);\n            }\n          });\n        } else {\n          VK.App._openApp(url, params);\n        }\n      },\n\n      _openApp: function (url, params) {\n        var src, box, request = [];\n        params = params || {};\n\n        if (!url || !VK._apiId || VK.App._appOpened) {\n          return;\n\n        }\n\n        if (Object.prototype.toString.call(params.data) === '[object Object]') {\n          try {\n            params.data = JSON.stringify(params.data);\n          } catch (e) {\n            params.data = '';\n          }\n        }\n\n        src = VK._domain.base + '/apps?act=open_external_app_openapi&aid=' + VK._apiId;\n        params['aid'] = VK._apiId;\n\n        for (var arg in params) {\n          var val = '';\n          if (!params.hasOwnProperty(arg)) {\n            continue;\n          }\n          if (params[arg] !== undefined) {\n            val = encodeURIComponent(params[arg]);\n          }\n          request.push(encodeURIComponent(arg) + '=' + val);\n        }\n\n        src += '&url=' + url;\n        src += '&q=' + encodeURIComponent(request.join('&'));\n\n        box = VK.Util.Box(src, {}, {\n          closeExternalApp: function() {\n            if (VK.App._result) {\n              VK.Observer.publish('app.done', VK.App._result);\n              VK.App._result = null;\n            } else {\n              VK.Observer.publish('app.closed');\n            }\n            box.hide();\n            VK.App._appOpened = false;\n          },\n          externalAppDone: function (params, noCloseLayer) {\n            if (noCloseLayer) {\n              VK.App._result = params;\n            } else {\n              VK.Observer.publish('app.done', params);\n              box.hide();\n              VK.App._appOpened = false;\n              VK.App._result = null;\n            }\n          }\n        });\n        box.show();\n        VK.App._appOpened = true;\n        VK.App._result = null;\n      },\n\n      addToGroup: function(appId) {\n        if (this._addToGroupPopup && !this._addToGroupPopup.closed) {\n          return;\n        }\n\n        if (this._onAddToGroupDone) {\n          VK.Util.removeEvent('message', this._onAddToGroupDone, window);\n        }\n\n        this._onAddToGroupDone = function(event) {\n          if (event.origin === VK._domain.base && event.data.method === 'app.addToGroup') {\n            VK.Observer.publish('app.addToGroupDone', {\n              app_id: event.data.app_id,\n              group_ids: event.data.group_ids\n            });\n            VK.Util.removeEvent('message', this._onAddToGroupDone, window);\n            this._onAddToGroupDone = null;\n          }\n        }.bind(this);\n\n        if (window.postMessage) {\n          VK.Util.addEvent('message', this._onAddToGroupDone, window);\n        }\n\n        this._addToGroupPopup = VK.UI.popup({\n          url: VK._domain.base + '/add_community_app.php?aid=' + appId,\n          width: 560,\n          height: 650\n        });\n      }\n    }\n  }\n\n} else { // if VK.xdConnectionCallbacks\n  setTimeout(function() {\n    var callback;\n    while (callback = VK.xdConnectionCallbacks.pop()) {\n      callback();\n    }\n  }, 0);\n  if (VK.Widgets && !VK.Widgets._constructor) {\n    VK.Widgets = false;\n  }\n}\n\nif (!VK.UI) {\n  VK.UI = {\n    active: null,\n    _buttons: [],\n    popup: function(options) {\n      var\n          screenX = typeof window.screenX != 'undefined' ? window.screenX : window.screenLeft,\n          screenY = typeof window.screenY != 'undefined' ? window.screenY : window.screenTop,\n          outerWidth = typeof window.outerWidth != 'undefined' ? window.outerWidth : document.body.clientWidth,\n          outerHeight = typeof window.outerHeight != 'undefined' ? window.outerHeight : (document.body.clientHeight - 22),\n          width = options.width,\n          height = options.height,\n          left = parseInt(screenX + ((outerWidth - width) / 2), 10),\n          top = parseInt(screenY + ((outerHeight - height) / 2.5), 10),\n          features;\n      left = window.screen && window.screenX && screen.left && screen.left > 1000 ? 0 : left; // FF with 2 monitors fix\n      features = (\n          'width=' + width +\n          ',height=' + height +\n          ',left=' + left +\n          ',top=' + top\n      );\n      this.active = window.open(options.url, 'vk_openapi', features);\n      return this.active;\n    },\n    button: function(el, handler) {\n      var html = '';\n\n      if (typeof el == 'string') {\n        el = document.getElementById(el);\n      }\n\n\n      this._buttons.push(el);\n      index = this._buttons.length - 1;\n\n      html = (\n          '<table cellspacing=\"0\" cellpadding=\"0\" id=\"openapi_UI_' + index + '\" onmouseover=\"VK.UI._change(1, ' + index + ');\" onmouseout=\"VK.UI._change(0, ' + index + ');\" onmousedown=\"VK.UI._change(2, ' + index + ');\" onmouseup=\"VK.UI._change(1, ' + index + ');\" style=\"cursor: pointer; border: 0px; font-family: tahoma, arial, verdana, sans-serif, Lucida Sans; font-size: 10px;\"><tr style=\"vertical-align: middle\">' +\n          '<td><div style=\"border: 1px solid #3b6798;border-radius: 2px 0px 0px 2px;-moz-border-radius: 2px 0px 0px 2px;-webkit-border-radius: 2px 0px 0px 2px;\"><div style=\"border: 1px solid #5c82ab; border-top-color: #7e9cbc; background-color: #6D8DB1; color: #fff; text-shadow: 0px 1px #45688E; height: 15px; padding: 2px 4px 0px 6px;line-height: 13px;\">&#1042;&#1086;&#1081;&#1090;&#1080;</div></div></td>' +\n          '<td><div style=\"background: url(' + VK._domain.base + '/images/btns.png) 0px -42px no-repeat; width: 21px; height: 21px\"></div></td>' +\n          '<td><div style=\"border: 1px solid #3b6798;border-radius: 0px 2px 2px 0px;-moz-border-radius: 0px 2px 2px 0px;-webkit-border-radius: 0px 2px 2px 0px;\"><div style=\"border: 1px solid #5c82ab; border-top-color: #7e9cbc; background-color: #6D8DB1; color: #fff; text-shadow: 0px 1px #45688E; height: 15px; padding: 2px 6px 0px 4px;line-height: 13px;\">&#1050;&#1086;&#1085;&#1090;&#1072;&#1082;&#1090;&#1077;</div></div></td>' +\n          '</tr></table>'\n      );\n      el.innerHTML = html;\n      el.style.width = el.childNodes[0].offsetWidth + 'px';\n    },\n    _change: function(state, index) {\n      var row = document.getElementById('openapi_UI_' + index).rows[0];\n      var elems = [row.cells[0].firstChild.firstChild, row.cells[2].firstChild.firstChild];\n      for (var i = 0; i < 2; ++i) {\n        var elem = elems[i];\n        if (state === 0) {\n          elem.style.backgroundColor = '#6D8DB1';\n          elem.style.borderTopColor = '#7E9CBC';\n          elem.style.borderLeftColor = elem.style.borderRightColor = elem.style.borderBottomColor = '#5C82AB';\n        } else if (state == 1) {\n          elem.style.backgroundColor = '#7693B6';\n          elem.style.borderTopColor = '#88A4C4';\n          elem.style.borderLeftColor = elem.style.borderRightColor = elem.style.borderBottomColor = '#6088B4';\n        } else if (state == 2) {\n          elem.style.backgroundColor = '#6688AD';\n          elem.style.borderBottomColor = '#7495B8';\n          elem.style.borderLeftColor = elem.style.borderRightColor = elem.style.borderTopColor = '#51779F';\n        }\n      }\n      if (state === 0 || state == 2) {\n        row.cells[2].firstChild.style.backgroundPosition = '0px -42px';\n      } else if (state == 1) {\n        row.cells[2].firstChild.style.backgroundPosition = '0px -63px';\n      }\n    }\n  };\n}\n\nif (!VK.XDM) {\n  VK.XDM = {\n    remote: null,\n    init: function() {\n      if (this.remote) return false;\n      var url = VK._domain.api + '/' + VK._path.proxy;\n      this.remote = new fastXDM.Server({\n        onInit: function() {\n          VK.xdReady = true;\n          VK.Observer.publish('xdm.init');\n        }\n      });\n\n      this.remote.append(document.getElementById(VK._rootId), {\n        src: url\n      });\n    },\n    xdHandler: function(code) {\n      try {\n        eval('VK.' + code);\n      } catch(e) {}\n    }\n  };\n}\n\nif (!VK.Observer) {\n  VK.Observer = {\n    _subscribers: function() {\n      if (!this._subscribersMap) {\n        this._subscribersMap = {};\n      }\n      return this._subscribersMap;\n    },\n    publish: function(eventName) {\n      var\n          args = Array.prototype.slice.call(arguments),\n          eventName = args.shift(),\n          subscribers = this._subscribers()[eventName],\n          i, j;\n\n      if (!subscribers) return;\n\n      for (i = 0, j = subscribers.length; i < j; i++) {\n        if (subscribers[i] != null) {\n          subscribers[i].apply(this, args);\n        }\n      }\n    },\n    subscribe: function(eventName, handler) {\n      var\n          subscribers = this._subscribers();\n\n      if (typeof handler != 'function') return false;\n\n      if (!subscribers[eventName]) {\n        subscribers[eventName] = [handler];\n      } else {\n        subscribers[eventName].push(handler);\n      }\n    },\n    unsubscribe: function(eventName, handler) {\n      var\n          subscribers = this._subscribers()[eventName],\n          i, j;\n\n      if (!subscribers) return false;\n      if (typeof handler == 'function') {\n        for (i = 0, j = subscribers.length; i < j; i++) {\n          if (subscribers[i] == handler) {\n            subscribers[i] = null;\n          }\n        }\n      } else {\n        delete this._subscribers()[eventName];\n      }\n    }\n  };\n}\n\nif (!VK.Widgets) {\n  VK.Widgets = {};\n\n  VK.Widgets.count = 0;\n  VK.Widgets.RPC = {};\n\n  VK.Widgets.loading = function(obj, enabled) {\n    obj.style.background = enabled ? 'url(\"' + VK._domain.base + '/images/upload.gif\") center center no-repeat transparent' : 'none';\n  };\n\n  VK.Widgets.Comments = function(objId, options, page) {\n    var pData = VK.Util.getPageData();\n    if (!VK._apiId) throw Error('VK not initialized. Please use VK.init');\n    options = VK.Util.parseOptions(options);\n\n    var obj = document.getElementById(objId),\n      params = {\n        limit: options.limit || 10,\n        height: options.height || 0,\n        mini: options.mini === undefined ? 'auto' : options.mini,\n        norealtime: options.norealtime ? 1 : 0\n      }, mouseup = function() {\n        rpc.callMethod('mouseUp');\n        return false;\n      }, move = function(event) {\n        rpc.callMethod('mouseMove', {screenY: event.screenY});\n      }, iframe, rpc;\n\n    if (options.browse) { // browse all comments\n      params.browse = 1;\n      params.replies = options.replies || 0;\n    } else { // page\n      var url = options.pageUrl || pData.url;\n      if (url.substr(0, 1) == '/') {\n        url = (location.protocol + '//' + location.host) + url;\n      }\n      VK.extend(params, {\n        page: page || 0,\n        status_publish: options.autoPublish === undefined ? 0 : options.autoPublish,\n        attach: options.attach === undefined ? '*' : (options.attach ? options.attach : ''),\n        url: url,\n        title: options.pageTitle || pData.title,\n        description: options.pageDescription || pData.description,\n        image: options.pageImage || pData.image\n      });\n    }\n    if (options.onChange) { // DEPRECATED\n      VK.Observer.subscribe('widgets.comments.new_comment', options.onChange);\n      VK.Observer.subscribe('widgets.comments.delete_comment', options.onChange);\n    }\n\n    return VK.Widgets._constructor('widget_comments.php', objId, options, params, {\n      showBox: function(url, props) {\n        var box = VK.Util.Box(VK.Util.getAbsUrl(url), [], {\n          proxy: rpc\n        });\n        box.show();\n      },\n      startDrag: function() {\n        cursorBack = window.document.body.style.cursor;\n        window.document.body.style.cursor = 'pointer';\n        VK.Util.addEvent('mousemove', move);\n        VK.Util.addEvent('mouseup', mouseup);\n      },\n      stopDrag: function() {\n        window.document.body.style.cursor = cursorBack;\n        VK.Util.removeEvent('mousemove', move);\n        VK.Util.removeEvent('mouseup', mouseup);\n      }\n    }, {\n      startHeight: 133,\n      minWidth: 300\n    }, function(o, i, r) {iframe = i; rpc = r;});\n  };\n\n  VK.Widgets.CommentsBrowse = function(objId, options) {\n    options = VK.Util.parseOptions(options);\n    options.browse = 1;\n    return VK.Widgets.Comments(objId, options);\n  };\n\n  VK.Widgets.Recommended = function(objId, options) {\n    var pData = VK.Util.getPageData();\n    if (!VK._apiId) throw Error('VK not initialized. Please use VK.init');\n    options = VK.Util.parseOptions(options);\n    var params = {\n      limit: options.limit || 5,\n      max: options.max || 0,\n      sort: options.sort || 'friend_likes',\n      verb: options.verb || 0,\n      period: options.period || 'week',\n      target: options.target || 'parent'\n    };\n    return VK.Widgets._constructor('widget_recommended.php', objId, options, params, {}, {\n      startHeight: (116 + params.limit * 47 - 15),\n      minWidth: 150\n    });\n  };\n\n  VK.Widgets.Post = function(objId, ownerId, postId, hash, options) {\n    options = VK.Util.parseOptions(options);\n    var obj = document.getElementById(objId),\n      params = {\n        owner_id: ownerId,\n        post_id: postId,\n        hash: hash || '',\n        from: options ? options.from : '',\n      }, iframe, rpc, cursorBack;\n    return VK.Widgets._constructor('widget_post.php', objId, options, params, {\n      showBox: function(url, props) {\n        var box = VK.Util.Box(VK.Util.getAbsUrl(url), [], {\n          proxy: rpc\n        });\n        box.show();\n      },\n      startDrag: function() {\n        cursorBack = window.document.body.style.cursor;\n        window.document.body.style.cursor = 'pointer';\n      },\n      stopDrag: function() {\n        window.document.body.style.cursor = cursorBack;\n      }\n    }, {\n      startHeight: 90,\n      minWidth: 250\n    }, function(o, i, r) {iframe = i; rpc = r;});\n  };\n\n  VK.Widgets.TextLive = function(widgetRootElementId, textLiveId, textPostId, hash, options) {\n    options = VK.Util.parseOptions(options);\n\n    return VK.Widgets._constructor('widget_textlive.php', widgetRootElementId, options, {\n      textlive_id: textLiveId,\n      textpost_id: textPostId,\n      hash: hash || '',\n    }, null, {\n      startHeight: textPostId ? 176 : 167,\n      minWidth: 320\n    });\n  };\n\n  VK.Widgets.Like = (function(Like) {\n    if (Like) return Like;\n\n    var instances = [];\n\n    Like = function(objId, options, page) {\n      var pData = VK.Util.getPageData();\n      if (!VK._apiId) throw Error('VK not initialized. Please use VK.init');\n      options = VK.extend(VK.Util.parseOptions(options), {allowTransparency: true});\n      var verticalBtnHeightWidth = {\n            18: 43,\n            20: 47,\n            22: 51,\n            24: 55,\n            30: 67,\n          },\n          type = (options.type == 'full' || options.type == 'button' || options.type == 'vertical' || options.type == 'mini') ? options.type : 'full',\n          autoWidth = options.width === 'auto' && (type == 'button' || type == 'mini'),\n          btnHeight = parseInt(options.height, 10) || 22,\n          size = btnHeight && verticalBtnHeightWidth[btnHeight] ? btnHeight : 22,\n          width = autoWidth ? 153 : (type == 'full' ? Math.max(200, options.width || 350) : (type == 'button' ? 180 : (type == 'mini' ? 115 : verticalBtnHeightWidth[size]))),\n          height = type == 'vertical' ? (2 * btnHeight + 7) : btnHeight,\n          params = {\n            page: page || 0,\n            url: options.pageUrl || pData.url,\n            type: type,\n            verb: options.verb == 1 ? 1 : 0,\n            color: options.color || '',\n            title: options.pageTitle || pData.title,\n            description: options.pageDescription || pData.description,\n            image: options.pageImage || pData.image,\n            text: (options.text || '').substr(0, 140),\n            h: btnHeight\n          },\n          ttHere = options.ttHere || false,\n          isOver = false,\n          hideTimeout = null,\n          obj, buttonIfr, buttonRpc, tooltipIfr, tooltipRpc, checkTO;\n      if (type == 'vertical' || type == 'button' || type == 'mini') delete options.width;\n      if (autoWidth) params.auto_width = 1;\n      function showTooltip(force) {\n        if ((!isOver && !force) || !tooltipRpc) return;\n        if (!tooltipIfr || !tooltipRpc || tooltipIfr.style.display != 'none' && tooltipIfr.getAttribute('vkhidden') != 'yes') return;\n        hideTimeout && clearTimeout(hideTimeout);\n        checkTO && clearTimeout(checkTO);\n        var scrollTop = options.getScrollTop ? options.getScrollTop() : (document.body.scrollTop || document.documentElement.scrollTop || 0);\n        var objPos = VK.Util.getXY(obj, options.fixed);\n        var startY = ttHere ? 0 : objPos[1];\n        if (scrollTop > objPos[1] - 120 && options.tooltipPos != 'top' || type == 'vertical' || options.tooltipPos == 'bottom') {\n          tooltipIfr.style.top = (startY + height + 2) + 'px';\n          tooltipRpc.callMethod('show', false, type+'_'+size);\n        } else {\n          tooltipIfr.style.top = (startY - 128) + 'px';\n          tooltipRpc.callMethod('show', true, type+'_'+size);\n        }\n        VK.Util.ss(tooltipIfr, {left: (ttHere ? 0 : objPos[0]) - (type == 'full' || type == 'button' ? 32 : 2) + 'px', display: 'block', opacity: 1, filter: 'none'});\n        tooltipIfr.setAttribute('vkhidden', 'no');\n        isOver = true;\n      }\n\n      function hideTooltip(force) {\n        if ((isOver && !force) || !tooltipRpc) return;\n        tooltipRpc.callMethod('hide');\n        buttonRpc.callMethod('hide');\n        hideTimeout = setTimeout(function() {\n          tooltipIfr.style.display = 'none'\n        }, 400);\n      }\n\n      var widgetId = VK.Widgets._constructor('widget_like.php', objId, options, params, {\n        initTooltip: function(counter) {\n          tooltipRpc = new fastXDM.Server({\n            onInit: counter ? function() {\n                showTooltip();\n              } : function() {},\n            proxy: buttonRpc,\n            showBox: function(url, props) {\n              var box = VK.Util.Box(VK.Util.getAbsUrl(url), [props.width, props.height], {\n                proxy: tooltipRpc\n              });\n              box.show();\n            },\n          }, false, {safe: true});\n          tooltipIfr = tooltipRpc.append(ttHere ? obj : document.body, {\n            src: buttonIfr.src + '&act=a_like_tooltip',\n            scrolling: 'no',\n            allowTransparency: true,\n            id: buttonIfr.id + '_tt',\n            style: {position: 'absolute', padding: 0, display: 'none', opacity: 0.01, filter: 'alpha(opacity=1)', border: '0', width: '274px', height: '130px', zIndex: 5000, overflow: 'hidden'}\n          });\n          tooltipIfr.setAttribute('vkhidden', 'yes');\n\n          tooltipIfr.onmouseover = function() {\n            clearTimeout(checkTO);\n            isOver = true;\n          };\n          tooltipIfr.onmouseout = function() {\n            clearTimeout(checkTO);\n            isOver = false;\n            checkTO = setTimeout(function() {hideTooltip(); }, 200);\n          };\n        },\n        showTooltip: showTooltip,\n        hideTooltip: hideTooltip,\n        destroy: function() {\n          buttonRpc.destroy();\n          try {buttonIfr.src = 'about: blank;';} catch (e) {}\n          buttonIfr.parentNode.removeChild(buttonIfr);\n          if (tooltipIfr) {\n            try {tooltipIfr.src = 'about: blank;';} catch (e) {}\n            tooltipIfr.parentNode.removeChild(tooltipIfr);\n          }\n          tooltipRpc && tooltipRpc.destroy();\n        },\n        showBox: function(url, props) {\n          var box = VK.Util.Box(VK.Util.getAbsUrl(url), [], {\n            proxy: buttonRpc\n          });\n          box.show();\n        },\n        proxy: function() {\n          if (tooltipRpc) {\n            tooltipRpc.callMethod.apply(tooltipRpc, arguments);\n          }\n        }\n      }, {\n        startHeight: height,\n        minWidth: width\n      }, function(o, i, r) {\n        buttonRpc = r;\n        VK.Util.ss(obj = o, {height: height + 'px', width: width + 'px', position: 'relative', clear: 'both'});\n        VK.Util.ss(buttonIfr = i, {height: height + 'px', width: width + 'px', overflow: 'hidden', zIndex: 150});\n        obj.onmouseover = function() {\n          clearTimeout(checkTO);\n          isOver = true;\n        };\n        obj.onmouseout = function() {\n          clearTimeout(checkTO);\n          isOver = false;\n          checkTO = setTimeout(function() {hideTooltip(); }, 200);\n        };\n      });\n\n      instances.push(widgetId);\n      return widgetId;\n    };\n\n    Like.destroyAll = function() {\n      var xdm = null;\n      while (instances[0]) {\n        xdm = VK.Widgets.RPC[instances.pop()];\n        xdm && xdm.methods.destroy();\n      }\n    }\n\n    return Like;\n  })(VK.Widgets.Like);\n\n  VK.Widgets.Poll = function(objId, options, pollId) {\n    var pData = VK.Util.getPageData();\n    if (!pollId) throw Error('No poll id passed');\n    options = VK.Util.parseOptions(options);\n    var params = {\n      poll_id: pollId,\n      url: options.pageUrl || pData.url || location.href,\n      title: options.pageTitle || pData.title,\n      description: options.pageDescription || pData.description\n    };\n    if (options.preview) {\n      params.is_preview = 1;\n      delete options['preview'];\n    }\n    if (options.share !== undefined) {\n      params.share = options.share ? 1 : 0;\n    }\n    var rpc;\n    return VK.Widgets._constructor('al_widget_poll.php', objId, options, params, {\n      showBox: function(url, props) {\n        var box = VK.Util.Box(VK.Util.getAbsUrl(url), [], {\n          proxy: rpc\n        });\n        box.show();\n      }\n    }, {\n      startHeight: 144,\n      minWidth: 300\n    }, function(o, i, r) {\n      rpc = r;\n    });\n  };\n\n  VK.Widgets.App = function(objId, app_id, options) {\n    if (!app_id) throw Error('No app id passed');\n    options = VK.Util.parseOptions(options);\n    var startHeight = void 0,\n        height = void 0,\n        minWidth = void 0,\n        params = {\n          aid: app_id,\n          mode: parseInt(options.mode, 10) || 1,\n        };\n    switch (params.mode) {\n      case 1:\n        options.width = 144;\n        startHeight = 251;\n        break;\n      case 2:\n        options.width = options.width ? Math.max(200, Math.min(10000, parseInt(options.width, 10))) : 200;\n        height = startHeight = 193;\n        break;\n      case 3:\n        options.width = options.width ? Math.max(50, Math.min(10000, parseInt(options.width, 10))) : void 0;\n        height = startHeight = options.height = ({18: 18, 20: 20, 22: 22, 24: 24, 30: 30})[parseInt(options.height, 10) || 30];\n        break;\n    }\n    minWidth = options.width;\n    return VK.Widgets._constructor('widget_app.php', objId, options, params, {}, {\n      startHeight: startHeight,\n      height: height,\n      minWidth: minWidth\n    });\n  };\n\n  VK.Widgets.Community = VK.Widgets.Group = function(objId, options, gid) {\n    options = VK.Util.parseOptions(options);\n    gid = parseInt(gid, 10);\n    if (!gid) {\n      throw Error('No group_id passed');\n    }\n    options.mode = parseInt(options.mode, 10).toString();\n    var params = {\n        gid: gid,\n        mode: (options.mode) ? options.mode : '0'\n      },\n      startHeight = options.mode == 3 ? 185 : (options.mode == 1 ? 141 : options.height|0 || 290),\n      rpc;\n    if (options.wall) params.wall = options.wall;\n    params.color1 = options.color1 || '';\n    params.color2 = options.color2 || '';\n    params.color3 = options.color3 || '';\n    params.class_name = options.class_name || '';\n    if (options.no_head) params.no_head = 1;\n    if (options.no_cover) params.no_cover = 1;\n    if (options.wide) {\n      params.wide = 1;\n      if (!options.width || options.width < 300) {\n        options.width = 300;\n      }\n    }\n    if (!options.width|0) options.width = 200;\n\n    var cursorBack;\n\n    function mouseup() {\n      rpc.callMethod('mouseUp');\n      return false;\n    }\n\n    function move(event) {\n      rpc.callMethod('mouseMove', {screenY: event.screenY});\n      return false;\n    }\n\n    return VK.Widgets._constructor('widget_community.php', objId, options, params, {\n      showBox: function(url, props) {\n        var box = VK.Util.Box(VK.Util.getAbsUrl(url), [], {\n          proxy: rpc\n        });\n        box.show();\n      },\n      startDrag: function() {\n        cursorBack = window.document.body.style.cursor;\n        window.document.body.style.cursor = 'pointer';\n        VK.Util.addEvent('mousemove', move);\n        VK.Util.addEvent('mouseup', mouseup);\n      },\n      stopDrag: function() {\n        window.document.body.style.cursor = cursorBack;\n        VK.Util.removeEvent('mousemove', move);\n        VK.Util.removeEvent('mouseup', mouseup);\n      },\n      auth: function() {\n        VK.Auth.login(null, 1);\n      }\n    }, {\n      minWidth: 120,\n      startHeight: startHeight\n    }, function(o, i, r) {\n      rpc = r;\n    });\n  };\n\n  VK.Widgets.Auth = function(objId, options) {\n    var pData = VK.Util.getPageData();\n    if (!VK._apiId) throw Error('VK not initialized. Please use VK.init');\n    options = VK.Util.parseOptions(options);\n    if (!options.width) {\n      options.width = 200;\n    }\n    if (options.type) {\n      type = 1;\n    } else {\n      type = 0;\n    }\n    return VK.Widgets._constructor('widget_auth.php', objId, options, {}, {makeAuth: function(data) {\n      if (data.session) {\n        VK.Auth._loadState = 'loaded';\n        VK.Auth.setSession(data.session, 'connected');\n        VK.Observer.publish('auth.loginStatus', {session: data.session, status: 'connected'});\n        VK.Observer.unsubscribe('auth.loginStatus');\n      }\n      if (options.onAuth) {\n        options.onAuth(data);\n      } else {\n        if (options.authUrl) {\n          var href = options.authUrl;\n        } else {\n          var href = window.location.href;\n        }\n        if (href.indexOf('?') == -1) {\n          href+='?';\n        } else {\n          href+='&';\n        }\n        var vars = [];\n\n        for (var i in data) {\n          if (i != 'session') vars.push(i+'='+decodeURIComponent(data[i]).replace(/&/g, '%26').replace(/\\#/g, '%23').replace(/\\?/, '%3F'));\n        }\n        window.location.href = href + vars.join('&');\n      }\n    }}, {\n      startHeight: 134\n    });\n  };\n\n  VK.Widgets.Subscribe = function(objId, options, oid) {\n    oid = parseInt(oid, 10);\n    if (!oid) {throw Error('No owner_id passed');}\n    options = VK.Util.parseOptions(options);\n    var params = {\n      oid: oid\n    }, rpc;\n    if (options.mode) {\n      params.mode = options.mode;\n    }\n    if (options.soft) {\n      params.soft = options.soft;\n    }\n\n    return VK.Widgets._constructor('widget_subscribe.php', objId, options, params, {\n      showBox: function(url, props) {\n        var box = VK.Util.Box(VK.Util.getAbsUrl(url), [], {\n          proxy: rpc\n        });\n        box.show();\n      },\n      auth: function() {\n        VK.Auth.login(null, 1);\n      }\n    }, {\n      minWidth: 220,\n      startHeight: 22\n    }, function(o, i, r) {\n      rpc = r;\n    });\n  };\n\n  VK.Widgets.ContactUs = function(objId, options, oid) {\n    oid = parseInt(oid, 10);\n    if (!oid) throw Error('No group or user id passed');\n    options = VK.Util.parseOptions(options);\n\n    var params = {\n      oid: oid,\n      height: ({18: 18, 20: 20, 22: 22, 24: 24, 30: 30})[parseInt(options.height, 10) || 24],\n      text: (options.text || '').substr(0, 140)\n    }, rpc;\n\n    return VK.Widgets._constructor('widget_contactus.php', objId, options, params, {}, {\n      startHeight: params.height,\n      height: params.height\n    }, function(o, i, r) {\n      rpc = r;\n    });\n  };\n\n  VK.Widgets.Bookmarks = function(objId, options) {\n    options = VK.Util.parseOptions(options);\n\n    var params = {\n      height: ({18: 18, 20: 20, 22: 22, 24: 24, 30: 30})[parseInt(options.height, 10) || 30],\n      url: options.url || window.location.href\n    }, rpc;\n\n    return VK.Widgets._constructor('widget_bookmarks.php', objId, options, params, {}, {\n      startHeight: params.height,\n      height: params.height\n    }, function(o, i, r) {\n      rpc = r;\n    });\n  };\n\n  VK.Widgets.Playlist = function(objId, ownerId, playlistId, hash, options) {\n    var params = {\n      oid: parseInt(ownerId, 10),\n      pid: parseInt(playlistId, 10),\n      hash: hash || ''\n    }, rpc;\n\n    if (!params.oid) throw Error('No owner id passed');\n    if (!params.pid) throw Error('No playlist id passed');\n    options = VK.Util.parseOptions(options);\n\n    return VK.Widgets._constructor('widget_playlist.php', objId, options, params, {\n      showBox: function(url, props) {\n        var box = VK.Util.Box(VK.Util.getAbsUrl(url), [], {\n          proxy: rpc\n        });\n        box.show();\n      }\n    }, {\n      minWidth: 200\n    }, function(o, i, r) {\n      rpc = r;\n    });\n  };\n\n  VK.Widgets.Ads = function(objId, options, paramsExtra) {\n    options = VK.Util.parseOptions(options);\n    paramsExtra = paramsExtra || {};\n    var params = {};\n    var defaults = {};\n    var funcs = {};\n    var obj = document.getElementById(objId);\n    var iframe;\n    var rpc;\n\n    var adsParams = {};\n    var adsParamsLocal = {};\n    var adsParamsDefault = {};\n    for (var key in paramsExtra) {\n      var keyFix = (inArray(key, ['hash']) ? key : 'ads_' + key);\n      adsParams[keyFix] = paramsExtra[key];\n    }\n\n    if (obj && obj.getBoundingClientRect) {\n      obj.style.width  = '100%';\n      obj.style.height = '100%';\n      var rect = obj.getBoundingClientRect();\n      obj.style.width  = '';\n      obj.style.height = '';\n      adsParams.ads_ad_unit_width_auto  = Math.floor(rect.right - rect.left);\n      adsParams.ads_ad_unit_height_auto = Math.floor(rect.bottom - rect.top);\n    }\n\n    adsParamsDefault.ads_ad_unit_width  = 100;\n    adsParamsDefault.ads_ad_unit_height = 100;\n\n    adsParamsLocal.ads_ad_unit_width  = (parseInt(adsParams.ads_ad_unit_width)  || adsParams.ads_ad_unit_width === 'auto'  && adsParams.ads_ad_unit_width_auto  || adsParamsDefault.ads_ad_unit_width);\n    adsParamsLocal.ads_ad_unit_height = (parseInt(adsParams.ads_ad_unit_height) || adsParams.ads_ad_unit_height === 'auto' && adsParams.ads_ad_unit_height_auto || adsParamsDefault.ads_ad_unit_height);\n    if (adsParams.ads_handler) {\n      adsParamsLocal.ads_handler = adsParams.ads_handler;\n    }\n    if (adsParams.ads_handler_empty_html) {\n      adsParamsLocal.ads_handler_empty_html = adsParams.ads_handler_empty_html;\n    }\n\n    delete adsParams.ads_handler;\n    delete adsParams.ads_handler_empty_html;\n\n    params.act = 'ads_web';\n    params.url = location.href;\n    VK.extend(params, adsParams);\n\n    options.noDefaultParams   = true;\n    options.width             = adsParamsLocal.ads_ad_unit_width;\n    options.allowTransparency = true;\n    defaults.startHeight = adsParamsLocal.ads_ad_unit_height;\n    defaults.minWidth    = adsParamsLocal.ads_ad_unit_width;\n    funcs.adsOnInit       = adsOnInit;\n    funcs.newAdsOnInitLoader = newAdsOnInitLoader;\n\n    return VK.Widgets._constructor('ads_rotate.php', objId, options, params, funcs, defaults, onDone);\n\n    function newAdsOnInitLoader(deps) {\n      // replace's   walkVar\n      var json = JSON.parse(deps.replace(/&#039;/g, '\\'').replace(/&quot;/g, '\"').replace(/&gt;/g, '>').replace(/&lt;/g, '<').replace(/&amp;/g, '&'));\n      adsAttachScript(json);\n    }\n    function adsOnInit(errorCode, adsParamsExport) {\n      VK.Widgets.loading(obj, false);\n      adsProcessParams(adsParamsExport);\n      if (options.onAdsReady) options.onAdsReady.apply(options.onAdsReady, Array.prototype.slice.call(arguments));\n      adsProcessHandler(errorCode);\n    }\n    function adsAttachScript(adsScriptData) {\n      if (!('vk__adsLight' in window)) {\n        window.vk__adsLight = false;\n        var attachScriptFunc = (VK.Api && VK.Api.attachScript || VK.addScript);\n        if (Array.isArray(adsScriptData)) {\n          adsScriptData.forEach(function(url){\n            attachScriptFunc(VK._domain.base + url)\n          });\n        } else {\n          var adsScriptVersion = parseInt(adsScriptData);\n          attachScriptFunc(VK._domain.base + jsc('/web/ads_light.js?') + adsScriptVersion);\n        }\n      } else if (window.vk__adsLight && vk__adsLight.userHandlers && vk__adsLight.userHandlers.onInit) {\n        vk__adsLight.userHandlers.onInit(false); // false - do not publish initial onInit\n      }\n    }\n    function adsProcessParams(adsParamsExport) {\n      if (!adsParamsExport) {\n        return;\n      }\n      for (var paramName in adsParamsExport) {\n        var paramValue = adsParamsExport[paramName];\n        if (paramName === 'ads_ad_unit_width' || paramName === 'ads_ad_unit_height') {\n          if (!(paramName in adsParams)) {\n            adsParamsLocal[paramName] = (parseInt(paramValue) || paramValue === 'auto' && adsParams[paramName + '_auto'] || adsParamsDefault[paramName]);\n          }\n        } else {\n          if (!(paramName in adsParamsLocal)) {\n            adsParamsLocal[paramName] = paramValue;\n          }\n        }\n      }\n    }\n    function adsProcessHandler(errorCode) {\n      var handlerResult = adsEvalHandler(adsParamsLocal.ads_handler, errorCode);\n      if (errorCode <= 0 && handlerResult !== true) {\n        try { console.log('VK: ad_unit_id = ' + adsParams.ads_ad_unit_id, ', errorCode = ', errorCode); } catch (e) {}\n        adsInsertHtmlHandler(adsParamsLocal.ads_handler_empty_html, adsParamsLocal.ads_ad_unit_width, adsParamsLocal.ads_ad_unit_height);\n      }\n    }\n    function adsEvalHandler(handler) {\n      var result = false;\n      try {\n        if (!handler) {\n          return false;\n        }\n        var func = false;\n        if (isFunction(handler)) {\n          func = handler;\n        } else if (isString(handler)) {\n          var handlerFuncs = handler.split('.');\n          func = window;\n          for (var i = 0, len = handlerFuncs.length; i < len; i++) {\n            func = func[handlerFuncs[i]];\n            if (!func) {\n              break;\n            }\n          }\n          if (!func) {\n            if (handler.substr(0, 8) === 'function') {\n              handler = 'return ' + handler + ';';\n            }\n            var handlerResult = (new Function(handler))();\n            if (isFunction(handlerResult)) {\n              func = handlerResult;\n            } else {\n              result = handlerResult;\n            }\n          }\n        }\n        if (func) {\n          var args = Array.prototype.slice.call(arguments, 1);\n          result = func.apply(func, args);\n        }\n      } catch (e) {\n        try {\n          console.error(e);\n        } catch (e2) {}\n      }\n\n      return result;\n\n      function isFunction(obj) {\n        return Object.prototype.toString.call(obj) === '[object Function]';\n      }\n      function isString(obj) {\n        return Object.prototype.toString.call(obj) === '[object String]';\n      }\n    }\n    function adsInsertHtmlHandler(handlerHtml, width, height) {\n      if (!handlerHtml) {\n        return;\n      }\n      if (!obj) {\n        return;\n      }\n\n      width  = (width  ? width  + 'px' : '');\n      height = (height ? height + 'px' : '');\n\n      var iframeHandlerHtml = '<html><head></head><body style=\"padding: 0; margin: 0;\"><div>' + handlerHtml + '</div></body></html>';\n\n      var iframeHandler = document.createElement('iframe');\n      iframeHandler.onload            = fixIframeHeight;\n      iframeHandler.id                = (iframe ? iframe.id : ('vkwidget-' + Math.round(Math.random() * 1000000))) + '_ads_html_handler';\n      iframeHandler.src               = 'about:blank';\n      iframeHandler.width             = '100%';\n      iframeHandler.height            = '100%';\n      iframeHandler.scrolling         = 'no';\n      iframeHandler.frameBorder       = '0';\n      iframeHandler.allowTransparency = true;\n      iframeHandler.style.overflow    = 'hidden';\n      iframeHandler.style.width       = width;\n      iframeHandler.style.height      = height;\n\n      obj.style.width                 = width;\n      obj.style.height                = height;\n\n      obj.appendChild(iframeHandler);\n\n      iframeHandler.contentWindow.vk_ads_html_handler = iframeHandlerHtml;\n      iframeHandler.src = 'javascript:window[\"vk_ads_html_handler\"]';\n\n      function fixIframeHeight() {\n        if (height) {\n          return;\n        }\n        try {\n          var rect = iframeHandler.contentWindow.document.body.firstChild.getBoundingClientRect();\n          var heightFix = Math.ceil(rect.bottom - rect.top);\n          if (heightFix) {\n            iframeHandler.style.height = heightFix;\n            obj.style.height           = heightFix;\n          }\n        } catch (e) {}\n      }\n    }\n    function indexOf(arr, value, from) {\n      for (var i = from || 0, l = (arr || []).length; i < l; i++) {\n        if (arr[i] == value) return i;\n      }\n      return -1;\n    }\n    function inArray(value, arr) {\n      return indexOf(arr, value) != -1;\n    }\n    function onDone(o, i, r) {\n      obj = o;\n      iframe = i;\n      rpc = r;\n    }\n  };\n\n  VK.Widgets.AllowMessagesFromCommunity = function (objId, options, groupId) {\n    groupId = parseInt(groupId, 10);\n    if (!groupId || groupId < 0) throw Error('No group id passed');\n    options = VK.Util.parseOptions(options);\n\n    var params = {\n      height: ({22: 22, 24: 24, 30: 30})[parseInt(options.height, 10) || 24],\n      key: options.key ? options.key.substr(0, 256) : '',\n      group_id: groupId\n    }, rpc;\n\n    return VK.Widgets._constructor('widget_allow_messages_from_community.php', objId, options, params, {}, {\n      startHeight: params.height,\n      height: params.height\n    }, function(o, i, r) {\n      rpc = r;\n    });\n  };\n\n  VK.Widgets.Article = function(id, url, options) {\n    var params = {\n      url: url\n    };\n\n    options = VK.Util.parseOptions(options);\n\n    var rpc;\n    return VK.Widgets._constructor('widget_article.php', id, options, params, {\n      showBox: function(url) {\n        var box = VK.Util.Box(VK.Util.getAbsUrl(url), [], {\n          proxy: rpc\n        });\n        box.show();\n      },\n    }, {\n    }, function(o, i, r) {\n      rpc = r;\n    });\n  };\n\n  VK.Widgets.Podcast = function(id, episode, options) {\n    var params = {\n      episode: episode,\n    };\n\n    options = VK.Util.parseOptions(options);\n\n    return VK.Widgets._constructor('widget_podcast.php', id, options, params, {\n      showBox: function(url) {\n        var box = VK.Util.Box(VK.Util.getAbsUrl(url), [], {\n          proxy: rpc\n        });\n        box.show();\n      },\n    }, {\n      minWidth: 300,\n      startHeight: 150,\n    });\n  };\n\n  VK.Widgets.CommunityMessages = (function(CommunityMessages) {\n    if (CommunityMessages) return CommunityMessages;\n\n    var instances = {}, wCur = {};\n    var BUTTONS_CONF = {\n      no_button: {width: 0, height: 0},\n      blue_circle: {\n        width: 50,\n        height: 50,\n        margin: {\n          bottom: 20\n        }\n      }\n    }, DEFAULT_BUTTON_TYPE = 'blue_circle',\n    BUTTON_POSITIONS = {\n      left: {\n        bottom: 0,\n        left: 20\n      },\n      right: {\n        bottom: 0,\n        right: 20\n      }\n    }, DEFAULT_BUTTON_POSITION = 'right';\n\n    /* options\n      - welcomeScreen\n      - expandTimeout\n      - shown || expended\n      - widgetPosition\n      - buttonType\n      - disableButtonTooltip\n      - tooltipButtonText\n      - disableNewMessagesSound\n      - disableExpandChatSound\n      - disableTitleChange\n    */\n    CommunityMessages = function(objId, gid, options) {\n      options = VK.Util.parseOptions(options);\n\n      options.width = 300;\n      options.height = 399;\n\n      options.expandTimeout = parseInt(options.expandTimeout) || 0;\n\n      var params = {\n        gid: gid\n      };\n\n      options.expanded = parseInt(options.expanded) || 0;\n\n      if (!options.from_dev && lsGet('expanded') != null || options.expanded) {\n        options.shown = 1;\n      }\n\n      if (options.shown) {\n        params.shown = 1;\n      }\n\n      if (!options.welcomeScreen) {\n        params.disable_welcome_screen = 1;\n      }\n\n      params.ref_source_info = options.ref_source_info;\n      params.ref_source_link = location.href;\n\n      var buttonType = options.buttonType;\n      if (Object.keys(BUTTONS_CONF).indexOf(buttonType) == -1) {\n        buttonType = DEFAULT_BUTTON_TYPE;\n      }\n\n      if (buttonType == 'no_button') {\n        options.disableButtonTooltip = 1;\n      }\n\n      if (options.disableButtonTooltip) {\n        params.disable_tooltip = 1;\n      }\n      if (options.tooltipButtonText) {\n        params.tooltip_text = options.tooltipButtonText;\n      }\n\n      if (options.disableNewMessagesSound) {\n        params.disable_new_messages_sound = 1;\n      }\n\n      if (instances[objId]) {\n        CommunityMessages.destroy(objId);\n      }\n\n      params.domain = document.domain;\n\n      options.no_loading = 1;\n      if (!options.disableNewMessagesSound || !options.disableExpandChatSound) {\n        options.enable_autoplay = 1;\n      }\n\n      if (options.disableExpandChatSound) {\n        params.disable_expand_chat_sound = 1\n      }\n\n      if (options.expandTimeout) {\n        params.expand_timeout = options.expandTimeout\n      }\n\n      if(options.__alpha_new_widget) {\n        params.__alpha_new_widget = 1;\n      }\n\n      var curBox = false, expanded = 0;\n      var ttSize = [0, 0], widgetPosition;\n\n      changeWidgetPosition(options.widgetPosition);\n      params.button_position = options.widgetPosition;\n\n       window.addEventListener('message', receiveMessage, false);\n\n      function receiveMessage(event) {\n        var obj = document.getElementById(objId), frame = obj.getElementsByTagName('iframe')[0];\n        if (event.data && event.data.action === 'VKReforgedWidgetResize') {\n          var width = event.data.params.width\n          var height = event.data.params.height\n\n          frame.width = width;\n          frame.height = height;\n\n          obj.style.width = width + 'px';\n          obj.style.height = height + 'px';\n          obj.style.margin = height > 50 ? '0' : '0 0 20px';\n        }\n\n        if(event.data && event.data.action === 'VKReforgedWidgetLogout') {\n          frame.parentNode.removeChild(frame);\n          obj.style = {}\n        }\n      }\n      var chatRpc, chatIfr;\n      var inited = 0, timers = {};\n      instances[objId] = VK.Widgets._constructor('reforged_widget.php', objId, options, params, {\n        onStartLoading: function() {\n          var obj = document.getElementById(objId);\n          obj.style.position = 'fixed';\n          obj.style['z-index'] = 10000;\n          updateWidgetPosition();\n        },\n        onReady: function () {\n          inited = 1;\n          if (options.expandTimeout > 0 && !options.shown) {\n            timers.showTimer = setTimeout(function () {\n              expandChat({\n                playSong: !options.disableExpandChatSound,\n                noSaveState: 1\n              });\n            }, options.expandTimeout);\n          }\n        },\n        showBox: function(url) {\n          if (curBox) {\n            try {\n              curBox.hide();\n              try {\n                curBox.iframe.src = 'about: blank;';\n              } catch (e) {}\n              curBox.iframe.parentNode.removeChild(curBox.iframe);\n            } catch(e) { }\n          }\n          curBox = VK.Util.Box(VK.Util.getAbsUrl(url), [], {\n            proxy: chatRpc\n          }, {\n            zIndex: 10002\n          });\n          curBox.show();\n        },\n        setTooltipSize: function (size) {\n          ttSize = size;\n          if (!expanded) {\n            minimize();\n          }\n        },\n        expand: function(opts) {\n          opts = opts || {};\n          expanded = 1;\n          expand();\n\n          if (!opts.noSaveState) {\n            lsSet('expanded', 1);\n          }\n        },\n        minimize: function() {\n          setTimeout(function() {\n            expanded = 0;\n            minimize(objId);\n            lsRemove('expanded');\n          }, 120);\n        },\n        canNotWrite: function(type) {\n          options.onCanNotWrite && options.onCanNotWrite(type);\n        },\n        destroy: function() {\n          chatRpc.destroy();\n          try {chatIfr.src = 'about: blank;';} catch (e) {}\n          try {\n            chatIfr.parentNode.removeChild(chatIfr);\n          } catch(e) { }\n        },\n        fatalError: function(error_code, public_id) {\n\n          var query = {\n            code: error_code,\n            widget: 2,\n            public_id: public_id,\n          };\n\n          if (error_code == 1903) {\n            query.referrer_domain = document.domain;\n          }\n\n          var query_str = [];\n          for(var i in query) {\n            query_str.push(i+'='+query[i]);\n          }\n\n          CommunityMessages.destroy(objId);\n          var box = VK.Util.Box(VK.Util.getAbsUrl('blank.php?'+query_str.join('&')));\n          box.show();\n        },\n        setPageTitle: function (title) {\n          if (options.disableTitleChange) {\n            return;\n          }\n          stopTitleAnimation();\n          wCur.oldTitle = document.title || null;\n          wCur.title = title;\n          wCur.changeTitleMode = 0;\n          startTitleNotify(1);\n        },\n        resetPageTitle: function () {\n          stopTitleAnimation();\n        },\n        newMessage: function () {\n          if (document.hasFocus && !document.hasFocus() && !options.disableNewMessagesSound) {\n            callRpcMethod('playNewMsgSong');\n          }\n        }\n      }, {}, function(o, i, r) {\n        chatRpc = r;\n        chatIfr = i;\n        if (!options.shown) {\n          minimize();\n        } else {\n          expand();\n        }\n      });\n\n      function startTitleNotify(fast) {\n        clearTimeout(wCur.titleTimer);\n        wCur.titleTimer = setTimeout(function () {\n          if (wCur.changeTitleMode == 1) {\n            document.title = wCur.oldTitle || '';\n          } else {\n            document.title = wCur.title;\n          }\n          wCur.changeTitleMode = wCur.changeTitleMode == 1 ? 0 : 1;\n          startTitleNotify();\n        }, fast ? 0 : 1500);\n      }\n\n      function stopTitleAnimation() {\n        if (options.disableTitleChange) {\n          return;\n        }\n        clearTimeout(wCur.titleTimer);\n        if (wCur.oldTitle) {\n          document.title = wCur.oldTitle;\n        } else if (wCur.oldTitle === null) {\n          document.title = '';\n        }\n        wCur.title = '';\n      }\n\n      function expand() {\n        var obj = document.getElementById(objId), frame = obj.getElementsByTagName('iframe')[0];\n\n        obj.style.width = frame.width = '372px';\n        obj.style.height = frame.height = '399px';\n        obj.style.margin = '0px 0px 0px 0px';\n        //frame.style.boxShadow = '0 0 0 1px rgba(0, 20, 51, .12), 0 20px 40px 0 rgba(0, 0, 0, 0.3)';\n        //frame.style.borderRadius = '6px';\n      }\n\n      function minimize() {\n        var obj = document.getElementById(objId), frame = obj.getElementsByTagName('iframe')[0];\n\n        var btnConf = BUTTONS_CONF[buttonType];\n\n        var w = btnConf.width + ttSize[0];\n        var h = Math.max(btnConf.height, ttSize[1]);\n\n        obj.style.width = w + 'px';\n        obj.style.height = h + 'px';\n\n        var margin = btnConf.margin ? btnConf.margin : {};\n        obj.style.margin = '0px ' + (margin.right || 0) + 'px ' + (margin.bottom || 0) + 'px 0px';\n\n        if (frame) {\n          frame.style.boxShadow = 'none';\n          frame.width = w;\n          frame.height = h;\n        }\n      }\n\n      function changeWidgetPosition(position) {\n        widgetPosition = position;\n        if (Object.keys(BUTTON_POSITIONS).indexOf(widgetPosition) == -1) {\n          widgetPosition = DEFAULT_BUTTON_POSITION;\n        }\n        updateWidgetPosition();\n        callRpcMethod('changeButtonPosition', widgetPosition);\n      }\n\n      function updateWidgetPosition() {\n        var obj = document.getElementById(objId);\n\n        if (!obj) {\n          return;\n        }\n\n        var props = ['left', 'right', 'top', 'bottom'];\n        for(var i in props) {\n          obj.style[props[i]] = '';\n        }\n\n        var conf = BUTTON_POSITIONS[widgetPosition];\n        for(var i in conf) {\n          obj.style[i] = conf[i] + 'px';\n        }\n\n        if (!inited) {\n          return;\n        }\n\n        if (expanded) {\n          expand();\n        } else {\n          minimize();\n        }\n      }\n\n      function callRpcMethod() {\n        chatRpc && chatRpc.callMethod.apply(chatRpc, arguments);\n      }\n\n      /* opts\n        - welcomeScreen\n      */\n      function expandChat(opts) {\n        if (!opts || Object.prototype.toString.call(opts) !== '[object Object]') {\n          opts = {};\n        }\n\n        if (opts.welcomeScreen == undefined) {\n          opts.welcomeScreen = options.welcomeScreen;\n        }\n\n        var frame = document.getElementById(objId).getElementsByTagName('iframe')[0];\n        frame && frame.contentWindow.postMessage({ handler: 'VKReforgedWidgetExpand' }, VK._domain.base);\n\n        clearTimeout(timers.showTimer);\n        callRpcMethod('expand', opts);\n      }\n\n      function minimizeChat() {\n        callRpcMethod('minimize');\n\n        var frame = document.getElementById(objId).getElementsByTagName('iframe')[0];\n        frame && frame.contentWindow.postMessage({ handler: 'VKReforgedWidgetMinimize' }, VK._domain.base);\n      }\n\n      function setSourceData(data) {\n        callRpcMethod('setSourceData', VK.extend({\n          link: location.href,\n        }, data));\n      }\n\n      VK.Util.addEvent('popstate', setSourceData.bind(this, {}), window);\n      VK.Util.addEvent('hashchange', setSourceData.bind(this, {}), window);\n\n      function destroyChat() {\n        stopTitleAnimation();\n        var frame = document.getElementById(objId).getElementsByTagName('iframe')[0];\n        frame && frame.contentWindow.postMessage({ handler: 'VKReforgedWidgetDestroy' }, VK._domain.base);\n        CommunityMessages.destroy(objId);\n      }\n\n      return {\n        expand: expandChat,\n        minimize: minimizeChat,\n        destroy: destroyChat,\n        setSourceData: setSourceData,\n        changeButtonPosition: changeWidgetPosition,\n        stopTitleAnimation: stopTitleAnimation,\n      };\n    };\n\n    function lsGet(key) {\n      if (!window.localStorage) {\n        return null;\n      }\n      return localStorage.getItem('vk_community_widget_' + key);\n    }\n\n    function lsSet(key, value) {\n      window.localStorage && localStorage.setItem('vk_community_widget_' + key, value);\n    }\n\n    function lsRemove(key) {\n      window.localStorage && localStorage.removeItem('vk_community_widget_' + key);\n    }\n\n    CommunityMessages.destroy = function(objId) {\n      if (!instances[objId]) {\n        return;\n      }\n\n      var xdm = VK.Widgets.RPC[instances[objId]];\n      xdm && xdm.methods.destroy();\n\n      delete instances[objId];\n    };\n\n    CommunityMessages.expand = function (objId) {\n      console.log(instances[objId]);\n    };\n\n    return CommunityMessages;\n  })(VK.Widgets.CommunityMessages);\n\n  VK.Widgets._constructor = function(widgetUrl, objId, options, params, funcs, defaults, onDone, widgetId, iter) {\n    var obj = document.getElementById(objId);\n    widgetId = widgetId || (++VK.Widgets.count);\n\n    if (!obj) {\n      iter = iter || 0;\n      if (iter > 10) {\n        throw Error('VK.Widgets: object #' + objId + ' not found.');\n      }\n      setTimeout(function() {\n        VK.Widgets._constructor(widgetUrl, objId, options, params, funcs, defaults, onDone, widgetId, iter + 1);\n      }, 500);\n      return widgetId;\n    }\n\n    options = options || {};\n    defaults = defaults || {};\n    funcs = funcs || {};\n\n    if (options.preview) {\n      params.preview = 1;\n      delete options['preview'];\n    }\n\n    var ifr, url, urlQueryString, encodedParam, rpc, iframe, i,\n      width = options.width === 'auto' ? (obj.clientWidth || obj.offsetWidth || defaults.minWidth) | 0 : parseInt(options.width || 0, 10);\n    if (params.act === 'silent_code') {\n      width = '1px';\n      obj.style.opacity = 0;\n      obj.style.display = 'none';\n      obj.style.position = 'absolute';\n    } else {\n      width = width ? (Math.max(defaults.minWidth || 200, Math.min(defaults.maxWidth || 10000, width)) + 'px') : '100%';\n    }\n    obj.style.width = width;\n\n    if (options.height) {\n      params.height = options.height;\n      obj.style.height = options.height + 'px';\n    } else {\n      obj.style.height = (defaults.startHeight || 200) + 'px';\n    }\n\n    if (width === '100%') params.startWidth = (obj.clientWidth || obj.offsetWidth) | 0;\n    if (!params.url) params.url = options.pageUrl || location.href.replace(/#.*$/, '');\n\n    url = VK._domain.base + '/' + widgetUrl;\n    urlQueryString = '';\n    if (!options.noDefaultParams) {\n      urlQueryString += '&app=' + (VK._apiId || '0') + '&width=' + encodeURIComponent(width)\n    }\n    urlQueryString += '&_ver=' + VK.version\n    if (VK._iframeAppWidget) {\n      params.iframe_app = 1;\n    }\n    var pData = VK.Util.getPageData();\n    params.url      = params.url     || pData.url || \"\";\n    params.referrer = params.referrer || document.referrer || \"\";\n    params.title    = params.title   || pData.title  || document.title || \"\";\n    for (i in params) {\n      if (i == 'title' && params[i].length > 80) params[i] = params[i].substr(0, 80)+'...';\n      if (i == 'description' && params[i].length > 160) params[i] = params[i].substr(0, 160)+'...';\n      if (typeof(params[i]) == 'number') {\n        encodedParam = params[i];\n      } else {\n        try {\n          encodedParam = encodeURIComponent(params[i]);\n        } catch (e) {\n          encodedParam = '';\n        }\n      }\n      urlQueryString += '&' + i + '=' + encodedParam;\n    }\n    urlQueryString += '&' + (+new Date()).toString(16);\n    url += '?' + urlQueryString.substr(1);\n\n    funcs.onStartLoading && funcs.onStartLoading();\n    if (!options.no_loading) {\n      VK.Widgets.loading(obj, true);\n    }\n\n    funcs.showLoader = function(enable) {\n      VK.Util.Loader(enable);\n    };\n    funcs.publish = function() {\n      var args = Array.prototype.slice.call(arguments);\n      args.push(widgetId);\n      VK.Observer.publish.apply(VK.Observer, args);\n    };\n    funcs.onInit = function() {\n      VK.Widgets.loading(obj, false);\n      if (funcs.onReady) funcs.onReady();\n      if (options.onReady) options.onReady();\n    };\n    funcs.resize = function(e, cb) {\n      obj.style.height = e + 'px';\n      var el = document.getElementById('vkwidget' + widgetId);\n      if (el) {\n        el.style.height = e + 'px';\n      }\n    };\n    funcs.resizeWidget = function(newWidth, newHeight) {\n      newWidth  = parseInt(newWidth);\n      newHeight = parseInt(newHeight);\n      var widgetElem = document.getElementById('vkwidget' + widgetId);\n      if (isFinite(newWidth)) {\n        obj.style.width = newWidth + 'px';\n        if (widgetElem) {\n          widgetElem.style.width = newWidth + 'px';\n        }\n      }\n      if (isFinite(newHeight)) {\n        obj.style.height = newHeight + 'px';\n        if (widgetElem) {\n          widgetElem.style.height = newHeight + 'px';\n        }\n      }\n      if (options.onResizeWidget) options.onResizeWidget();\n    };\n    funcs.updateVersion = function(ver) {\n      if (ver > 1) {\n        VK.Api.attachScript('//vk.com/js/api/openapi_update.js?'+parseInt(ver));\n      }\n    };\n    rpc = VK.Widgets.RPC[widgetId] = new fastXDM.Server(funcs, function(origin) {\n      if (!origin) return true;\n      origin = origin.toLowerCase();\n      return (origin.match(/(\\.|\\/)vk\\.com($|\\/|\\?)/));\n    }, {safe: true});\n    var style = {\n      overflow: 'hidden'\n    };\n    if (options.custom_style && typeof options.custom_style === 'object') {\n      style = VK.extend(style, options.custom_style);\n    }\n    var attrsString = \"\";\n    if (options.enable_autoplay) {\n      attrsString = 'allow=\"autoplay\"';\n    }\n    iframe = VK.Widgets.RPC[widgetId].append(\n      obj,\n      {\n        src: url,\n        width: (width.indexOf('%') != -1) ? width : (parseInt(width) || width),\n        height: defaults.startHeight || '100%',\n        scrolling: 'no',\n        id: 'vkwidget' + widgetId,\n        allowTransparency: options.allowTransparency || false,\n        style: style,\n      },\n      attrsString\n    );\n    onDone && setTimeout(function() {onDone(obj, iframe || obj.firstChild, rpc);}, 10);\n    return widgetId;\n  };\n}\n\nif (!VK.Util) {\n  VK.Util = {\n    getPageData: function() {\n      if (!VK._pData) {\n        var metas = document.getElementsByTagName('meta'), pData = {}, keys = ['description', 'title', 'url', 'image', 'app_id'], metaName;\n        for (var i in metas) {\n          if (!metas[i].getAttribute) continue;\n          if (metas[i].getAttribute && ((metaName = metas[i].getAttribute('name')) || (metaName = metas[i].getAttribute('property')))) {\n            for (var j in keys) {\n              if (metaName == keys[j] || metaName == 'og:'+keys[j] || metaName == 'vk:'+keys[j]) {\n                pData[keys[j]] = metas[i].content;\n              }\n            }\n          }\n        }\n        if (pData.app_id && !VK._apiId) {\n          VK._apiId = pData.app_id;\n        }\n        pData.title = pData.title || document.title || '';\n        pData.description = pData.description || '';\n        pData.image = pData.image || '';\n        if (!pData.url && VK._iframeAppWidget && VK._apiId) {\n          pData.url = '/app' + VK._apiId;\n          if (VK._browserHash) {\n            pData.url += VK._browserHash\n          }\n        }\n        var loc = location.href.replace(/#.*$/, '');\n        if (!pData.url || !pData.url.indexOf(loc)) {\n          pData.url = loc;\n        }\n        VK._pData = pData;\n      }\n      return VK._pData;\n    },\n\n    getStyle: function(elem, name) {\n      var ret, defaultView = document.defaultView || window;\n      if (defaultView.getComputedStyle) {\n        name = name.replace(/([A-Z])/g, '-$1').toLowerCase();\n        var computedStyle = defaultView.getComputedStyle(elem, null);\n        if (computedStyle) {\n          ret = computedStyle.getPropertyValue(name);\n        }\n      } else if (elem.currentStyle) {\n        var camelCase = name.replace(/\\-(\\w)/g, function(all, letter){\n          return letter.toUpperCase();\n        });\n        ret = elem.currentStyle[name] || elem.currentStyle[camelCase];\n      }\n\n      return ret;\n    },\n\n    getAbsUrl: function(url) {\n      return VK._domain.base + '/' + url.replace(/^\\s*\\/?/, '');\n    },\n\n    parseOptions: function(options) {\n      if (Object.prototype.toString.call(options) !== '[object Object]') {\n        options = {};\n      }\n\n      if (options.base_domain) {\n        VK._domain.base = options.base_domain;\n      }\n      if (options.login_domain) {\n        VK._domain.login = options.login_domain;\n      }\n\n      return options;\n    },\n\n    getXY: function(obj, fixed) {\n      if (!obj || obj === undefined) return;\n\n      var left = 0, top = 0;\n      if (obj.getBoundingClientRect !== undefined) {\n        var rect = obj.getBoundingClientRect();\n        left = rect.left;\n        top = rect.top;\n        fixed = true;\n      } else if (obj.offsetParent) {\n        do {\n          left += obj.offsetLeft;\n          top += obj.offsetTop;\n          if (fixed) {\n            left -= obj.scrollLeft;\n            top -= obj.scrollTop;\n          }\n        } while (obj = obj.offsetParent);\n      }\n      if (fixed) {\n        top += window.pageYOffset || window.scrollNode && scrollNode.scrollTop || document.documentElement.scrollTop;\n        left += window.pageXOffset || window.scrollNode && scrollNode.scrollLeft || document.documentElement.scrollLeft;\n      }\n\n      return [left, top];\n    },\n\n    Loader: function self(enable) {\n      if (!self.loader) {\n        self.loader = document.createElement('DIV');\n        self.loader.innerHTML = '<style type=\"text/css\">\\\n        @-webkit-keyframes VKWidgetsLoaderKeyframes {0%{opacity: 0.2;}30%{opacity: 1;}100%{opacity: 0.2;}}\\\n        @keyframes VKWidgetsLoaderKeyframes {0%{opacity: 0.2;}30%{opacity: 1;}100%{opacity: 0.2;}}\\\n        .VKWidgetsLoader div {width: 7px;height: 7px;-webkit-border-radius: 50%;-khtml-border-radius: 50%;-moz-border-radius: 50%;border-radius: 50%;background: #fff;top: 21px;position: absolute;z-index: 2;-o-transition: opacity 350ms linear; transition: opacity 350ms linear;opacity: 0.2;-webkit-animation-duration: 750ms;-o-animation-duration: 750ms;animation-duration: 750ms;-webkit-animation-name: VKWidgetsLoaderKeyframes;-o-animation-name: VKWidgetsLoaderKeyframes;animation-name: VKWidgetsLoaderKeyframes;-webkit-animation-iteration-count: infinite;-o-animation-iteration-count: infinite;animation-iteration-count: infinite;-webkit-transform: translateZ(0);transform: translateZ(0);}</style><div class=\"VKWidgetsLoader\" style=\"position: fixed;left: 50%;top: 50%;margin: -25px -50px;z-index: 1002;height: 50px;width: 100px;\"><div style=\"left: 36px;-webkit-animation-delay: 0ms;-o-animation-delay: 0ms;animation-delay: 0ms;\"></div><div style=\"left: 47px;-webkit-animation-delay: 180ms;-o-animation-delay: 180ms;animation-delay: 180ms;\"></div><div style=\"left: 58px;-webkit-animation-delay: 360ms;-o-animation-delay: 360ms;animation-delay: 360ms;\"></div><span style=\"display: block;background-color: #000;-webkit-border-radius: 4px;-khtml-border-radius: 4px;-moz-border-radius: 4px;border-radius: 4px;-webkit-box-shadow: 0px 2px 10px rgba(0, 0, 0, 0.35);-moz-box-shadow: 0px 2px 10px rgba(0, 0, 0, 0.35);box-shadow: 0px 2px 10px rgba(0, 0, 0, 0.35);position: absolute;left: 0;top: 0;bottom: 0; right: 0;z-index: 1;opacity: 0.7;\"></span></div>';\n        document.body.insertBefore(self.loader, document.body.firstChild);\n      }\n      self.loader.style.display = enable ? 'block' : 'none';\n    },\n\n    Box: function(src, sizes, fnc, options) {\n      fnc = fnc || {};\n      var overflowB = document.body.style.overflow;\n      VK.Util.Loader(true);\n      var is_vk = /(^|\\.)(vk\\.com|vkontakte\\.ru)$/.test(location.hostname);\n      var rpc = new fastXDM.Server(VK.extend(fnc, {\n            onInit: function() {\n              iframe.style.background = 'transparent';\n              iframe.style.visibility = 'visible';\n              document.body.style.overflow = 'hidden';\n              iframe.setAttribute('allowfullscreen', 1);\n              if (is_vk) document.body.className += ' layers_shown';\n              VK.Util.Loader();\n            },\n            hide: function() {\n              iframe.style.display = 'none';\n            },\n            tempHide: function() {\n              iframe.style.left = '-10000px';\n              iframe.style.top = '-10000px';\n              iframe.style.width = '10px';\n              iframe.style.height = '10px';\n              if (is_vk) document.body.className = document.body.className.replace(/\\b\\s*?layers_shown\\s*\\b/, ' ');\n              document.body.style.overflow = overflowB;\n            },\n            destroy: function() {\n              try {\n                iframe.src = 'about: blank;';\n              } catch (e) {}\n              iframe.parentNode.removeChild(iframe);\n              if (is_vk) document.body.className = document.body.className.replace(/\\b\\s*?layers_shown\\s*\\b/, ' ');\n              document.body.style.overflow = overflowB;\n            },\n            resize: function(w, h) {\n            }\n          }, true), false, {safe: true}),\n          iframe = rpc.append(document.body, {\n            src: src.replace(/&amp;/g, '&'),\n            scrolling: 'no',\n            allowTransparency: true,\n            style: {\n              position: 'fixed',\n              left: 0,\n              top: 0,\n              zIndex: options && options.zIndex || 1002,\n              background: VK._domain.base + '/images/upload.gif center center no-repeat transparent',\n              padding: '0',\n              border: '0',\n              width: '100%',\n              height: '100%',\n              overflow: 'hidden',\n              visibility: 'hidden'\n            }\n          });\n      return {\n        show: function(scrollTop, height) {\n          iframe.style.display = 'block';\n          document.body.style.overflow = 'hidden';\n        },\n        hide: function() {\n          iframe.style.display = 'none';\n          document.body.style.overflow = overflowB;\n        },\n        iframe: iframe,\n        rpc: rpc\n      }\n    },\n\n    addEvent: function(type, func, target) {\n      target = target || window.document;\n      if (target.addEventListener) {\n        target.addEventListener(type, func, false);\n      } else if (target.attachEvent) {\n        target.attachEvent('on'+type, func);\n      }\n    },\n\n    removeEvent: function(type, func, target) {\n      target = target || window.document;\n      if (target.removeEventListener) {\n        target.removeEventListener(type, func, false);\n      } else if (target.detachEvent) {\n        target.detachEvent('on'+type, func);\n      }\n    },\n\n    ss: function(el, styles) {VK.extend(el.style, styles, true);}\n  };\n}\n\nif (!VK.Retargeting) {\n  VK.Retargeting = {\n    pixelCode: null,\n    Init: function (pixelCode) {\n      this.pixelCode = pixelCode;\n      return this;\n    },\n    Event: function (event) {\n      if (!this.pixelCode) {\n        return;\n      }\n\n      if (IS_BRIDGE_AVAILABLE) {\n        _bridgeSend('VKWebAppRetargetingPixel', {\n          pixel_code: this.pixelCode,\n          event: event,\n        });\n        return;\n      }\n\n      var pData = VK.Util.getPageData();\n      var metatagUrl = pData.url.substr(0, 500);\n      var metatagTitle = pData.title && pData.title.substr(0, 500) || '';\n\n      (window.Image ? (new Image()) : document.createElement('img')).src = VK._domain.base + '/rtrg?p=' + this.pixelCode +\n        (event ? ('&event=' + encodeURIComponent(event)) : '') +\n        (metatagUrl ? ('&metatag_url=' + encodeURIComponent(metatagUrl)) : '') +\n        (metatagTitle ? ('&metatag_title=' + encodeURIComponent(metatagTitle)) : '');\n    },\n    Hit: function () {\n      this.Event();\n    },\n    Add: function (audienceID) {\n      if (!this.pixelCode || !audienceID) {\n        return;\n      }\n\n      if (IS_BRIDGE_AVAILABLE) {\n        _bridgeSend('VKWebAppRetargetingPixel', {\n          pixel_code: this.pixelCode,\n          target_group_id: audienceID,\n        });\n        return;\n      }\n\n      (window.Image ? (new Image()) : document.createElement('img')).src = VK._domain.base + '/rtrg?p=' + this.pixelCode + '&audience=' + encodeURIComponent(audienceID);\n    },\n    ProductEvent: function (priceListID, event, params, opts) {\n      if (!this.pixelCode || !event || !priceListID) {\n        return;\n      }\n\n      opts = opts || {};\n\n      var canShowErrors = true;\n      if (typeof opts.show_errors !== 'undefined') {\n        canShowErrors = opts.show_errors ? true : false;\n      }\n      var errorsIgnore = '0';\n      if (typeof opts.errors_ignore !== 'undefined') {\n        errorsIgnore = opts.errors_ignore ? '1' : '0';\n      }\n\n      var pData = VK.Util.getPageData();\n      var metatagUrl = pData.url.substr(0, 500);\n      var metatagTitle = pData.title && pData.title.substr(0, 500) || '';\n      var url = VK._domain.base + '/rtrg';\n      var productParams = params ? JSON.stringify(params) : '';\n      var requestParams = {\n        'p': this.pixelCode,\n        'products_event': event,\n        'price_list_id': priceListID,\n        'e': '1',\n        'i': errorsIgnore,\n        'metatag_url' : metatagUrl,\n        'metatag_title' : metatagTitle\n      };\n      if (productParams) {\n        requestParams.products_params = productParams;\n      }\n\n      if (IS_BRIDGE_AVAILABLE) {\n        _bridgeSend('VKWebAppRetargetingPixel', {\n          pixel_code: this.pixelCode,\n          price_list_id: priceListID,\n          products_event: event,\n          products_params: productParams,\n        });\n        return;\n      }\n\n      var query = Object.keys(requestParams).map(function(key) {\n        var segment = encodeURIComponent(key) + '=' + encodeURIComponent(requestParams[key]);\n        return segment;\n      }).join('&');\n\n      var requestUrl = url + '?' + query;\n\n      VK.Api.makeRequest(requestUrl, this.onDone.bind(this, canShowErrors));\n    },\n    onDone: function(canShowErrors, response) {\n      if (!response || !canShowErrors) {\n        return;\n      }\n\n      var resp;\n      try {\n        resp = JSON.parse(response);\n      } catch (e) {\n        return;\n      }\n\n      if (!resp || !resp.errors) {\n        return;\n      }\n      this.showErrors(resp.errors);\n    },\n    showErrors: function(errors) {\n      if (!errors && !errors.length) {\n        return;\n      }\n\n      var errorBegin = 'VK Pixel Error (' + this.pixelCode + '): ';\n\n      if (typeof errors === 'string') {\n        console.error(errorBegin + errors);\n        return;\n      }\n\n      var errorsLength = errors.length;\n\n      if (!errorsLength) {\n        return;\n      }\n\n      for (var i = 0; i < errorsLength; i++) {\n        console.error(errorBegin + errors[i]);\n      }\n    }\n  };\n}\n\nif (!VK.Pixel) {\n  VK.Pixel = function (pixelCode) {\n    if (this.constructor != VK.Pixel) {\n      throw Error('VK.Pixel was called without \\'new\\' operator');\n    }\n\n    VK.extend(this, VK.Retargeting);\n    this.pixelCode = pixelCode;\n    this.Goal = function(conversionName, parameters) {\n      return VK.Goal(conversionName, parameters, pixelCode);\n    };\n\n    return this;\n  };\n}\n\nif (!VK.Goal) {\n  /**\n   * @param {String} [conversionName=conversion]\n   * @param {Object} [parameters]\n   * @param {Integer} [parameters.value=0] - conversion amount\n   * @param {String} [pixelCode] - pixel code\n   * @public\n   */\n  VK.Goal = function (conversionName, parameters, pixelCode) {\n    var pixel = pixelCode || VK.Retargeting.pixelCode;\n    if (!pixel || typeof pixel !== 'string') {\n      console.error('Error argument: pixelCode not a string. Use VK.Retargeting.Init or VK.Pixel to initialize pixel');\n      return;\n    }\n\n    var eventName = conversionName || 'conversion';\n    if (typeof eventName !== 'string') {\n      console.error('Error argument: conversionName not a string');\n      return;\n    }\n\n    var value = (parameters || {}).value || 0;\n    if (typeof value === 'string') {\n      if(parseFloat(value).toString() !== value) {\n        console.error('Error argument: parameters.value not a number or valid number string');\n        return;\n      }\n    } else if (typeof value !== 'number') {\n      console.error('Error argument: parameters.value not a number or valid number string');\n      return;\n    }\n\n    if (IS_BRIDGE_AVAILABLE) {\n      _bridgeSend('VKWebAppConversionHit', {\n        pixel_code: pixel,\n        conversion_event: eventName,\n        conversion_value: value,\n      })\n      return;\n    }\n\n    var url = VK._domain.base + '/rtrg';\n    var requestParams = {\n      'p': pixel,\n      'e': '1',\n      'c': eventName,\n      'v': value,\n    };\n\n    var query = Object.keys(requestParams).map(function(key) {\n      return encodeURIComponent(key) + '=' + encodeURIComponent(requestParams[key]);\n    }).join('&');\n\n    var requestUrl = url + '?' + query;\n    VK.Api.makeRequest(requestUrl, VK.Retargeting.onDone.bind(VK.Retargeting, true));\n  };\n}\n\n// Init asynchronous library loading\nwindow.vkAsyncInit && setTimeout(vkAsyncInit, 0);\n\nif (window.vkAsyncInitCallbacks && vkAsyncInitCallbacks.length) {\n  setTimeout(function() {\n    var callback;\n    while (callback = vkAsyncInitCallbacks.pop()) {\n      try {\n        callback();\n      } catch(e) {\n        try {\n          console.error(e);\n        } catch (e2) {}\n      }\n    }\n  }, 0);\n}\n\ntry{stManager.done('api/openapi.js');}catch(e){}\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}